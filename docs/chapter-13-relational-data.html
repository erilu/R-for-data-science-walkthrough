<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 13 - Relational data | R for Data Science Walkthrough</title>
  <meta name="description" content="This is a walkthrough of the book R for Data Science (r4ds) with notes and solutions for the exercises." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 13 - Relational data | R for Data Science Walkthrough" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a walkthrough of the book R for Data Science (r4ds) with notes and solutions for the exercises." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 13 - Relational data | R for Data Science Walkthrough" />
  
  <meta name="twitter:description" content="This is a walkthrough of the book R for Data Science (r4ds) with notes and solutions for the exercises." />
  

<meta name="author" content="Erick Lu" />


<meta name="date" content="2020-01-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-12-tidy-data.html"/>
<link rel="next" href="chapter-14-strings.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Data Science Walkthrough</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-me"><i class="fa fa-check"></i>About me</a></li>
</ul></li>
<li class="part"><span><b>I Data Exploration</b></span></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html"><i class="fa fa-check"></i>Chapter 3 - Data visualization</a><ul>
<li><a href="chapter-3-data-visualization.html#notes---creating-a-ggplot"><strong>3.2</strong> Notes - Creating a ggplot</a></li>
<li><a href="chapter-3-data-visualization.html#exercises"><strong>3.2.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#run-ggplotdata-mpg.-what-do-you-see"><i class="fa fa-check"></i>1. Run ggplot(data = mpg). What do you see?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#how-many-rows-are-in-mpg-how-many-columns"><i class="fa fa-check"></i>2. How many rows are in mpg? How many columns?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-the-drv-variable-describe-read-the-help-for-mpg-to-find-out."><i class="fa fa-check"></i>3. What does the drv variable describe? Read the help for ?mpg to find out.</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#make-a-scatterplot-of-hwy-vs-cyl."><i class="fa fa-check"></i>4. Make a scatterplot of hwy vs cyl.</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-happens-if-you-make-a-scatterplot-of-class-vs-drv-why-is-the-plot-not-useful"><i class="fa fa-check"></i>5. What happens if you make a scatterplot of class vs drv? Why is the plot not useful?</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---aesthetic-mappings"><strong>3.3</strong> Notes - Aesthetic Mappings</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-1"><strong>3.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#whats-gone-wrong-with-this-code-why-are-the-points-not-blue"><i class="fa fa-check"></i>1. What’s gone wrong with this code? Why are the points not blue?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#which-variables-in-mpg-are-categorical-which-variables-are-continuous-hint-type-mpg-to-read-the-documentation-for-the-dataset.-how-can-you-see-this-information-when-you-run-mpg"><i class="fa fa-check"></i>2. Which variables in mpg are categorical? Which variables are continuous? (Hint: type ?mpg to read the documentation for the dataset). How can you see this information when you run mpg?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#map-a-continuous-variable-to-color-size-and-shape.-how-do-these-aesthetics-behave-differently-for-categorical-vs.continuous-variables"><i class="fa fa-check"></i>3. Map a continuous variable to color, size, and shape. How do these aesthetics behave differently for categorical vs. continuous variables?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-happens-if-you-map-the-same-variable-to-multiple-aesthetics"><i class="fa fa-check"></i>4. What happens if you map the same variable to multiple aesthetics?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-the-stroke-aesthetic-do-what-shapes-does-it-work-with-hint-use-geom_point"><i class="fa fa-check"></i>5. What does the stroke aesthetic do? What shapes does it work with? (Hint: use ?geom_point)</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-happens-if-you-map-an-aesthetic-to-something-other-than-a-variable-name-like-aescolour-displ-5"><i class="fa fa-check"></i>6. What happens if you map an aesthetic to something other than a variable name, like aes(colour = displ &lt; 5)?</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---facets"><strong>3.5</strong> Notes - Facets</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-2"><strong>3.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-happens-if-you-facet-on-a-continuous-variable"><i class="fa fa-check"></i>1. What happens if you facet on a continuous variable?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-do-the-empty-cells-in-plot-with-facet_griddrv-cyl-mean-how-do-they-relate-to-this-plot"><i class="fa fa-check"></i>2. What do the empty cells in plot with facet_grid(drv ~ cyl) mean? How do they relate to this plot?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-plots-does-the-following-code-make-what-does-.-do"><i class="fa fa-check"></i>3. What plots does the following code make? What does . do?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#take-the-first-faceted-plot-in-this-section"><i class="fa fa-check"></i>4. Take the first faceted plot in this section:</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#read-facet_wrap.-what-does-nrow-do-what-does-ncol-do-what-other-options-control-the-layout-of-the-individual-panels-why-doesnt-facet_grid-have-nrow-and-ncol-argument"><i class="fa fa-check"></i>5. Read ?facet_wrap. What does nrow do? What does ncol do? What other options control the layout of the individual panels? Why doesn’t facet_grid() have nrow and ncol argument?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#when-using-facet_grid-you-should-usually-put-the-variable-with-more-unique-levels-in-the-columns.-why"><i class="fa fa-check"></i>6. When using facet_grid() you should usually put the variable with more unique levels in the columns. Why?</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---geometric-objects"><strong>3.6</strong> Notes - Geometric objects</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-3"><strong>3.6.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-geom-would-you-use-to-draw-a-line-chart-a-boxplot-a-histogram-an-area-chart"><i class="fa fa-check"></i>1. What geom would you use to draw a line chart? A boxplot? A histogram? An area chart?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#run-this-code-in-your-head-and-predict-what-the-output-will-look-like.-then-run-the-code-in-r-and-check-your-predictions."><i class="fa fa-check"></i>2. Run this code in your head and predict what the output will look like. Then, run the code in R and check your predictions.</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-show.legend-false-do-what-happens-if-you-remove-it-why-do-you-think-i-used-it-earlier-in-the-chapter"><i class="fa fa-check"></i>3. What does show.legend = FALSE do? What happens if you remove it? Why do you think I used it earlier in the chapter?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-the-se-argument-to-geom_smooth-do"><i class="fa fa-check"></i>4. What does the se argument to geom_smooth() do?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#will-these-two-graphs-look-different-whywhy-not"><i class="fa fa-check"></i>5. Will these two graphs look different? Why/why not?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#recreate-the-r-code-necessary-to-generate-the-following-graphs."><i class="fa fa-check"></i>6. Recreate the R code necessary to generate the following graphs.</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---statistical-transformations"><strong>3.7</strong> Notes - Statistical Transformations</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-4"><strong>3.7.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-is-the-default-geom-associated-with-stat_summary-how-could-you-rewrite-the-previous-plot-to-use-that-geom-function-instead-of-the-stat-function"><i class="fa fa-check"></i>1. What is the default geom associated with stat_summary()? How could you rewrite the previous plot to use that geom function instead of the stat function?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-geom_col-do-how-is-it-different-to-geom_bar"><i class="fa fa-check"></i>2. What does geom_col() do? How is it different to geom_bar()?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#most-geoms-and-stats-come-in-pairs-that-are-almost-always-used-in-concert.-read-through-the-documentation-and-make-a-list-of-all-the-pairs.-what-do-they-have-in-common"><i class="fa fa-check"></i>3. Most geoms and stats come in pairs that are almost always used in concert. Read through the documentation and make a list of all the pairs. What do they have in common?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-variables-does-stat_smooth-compute-what-parameters-control-its-behaviour"><i class="fa fa-check"></i>4. What variables does stat_smooth() compute? What parameters control its behaviour?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#in-our-proportion-bar-chart-we-need-to-set-group-1.-why-in-other-words-what-is-the-problem-with-these-two-graphs"><i class="fa fa-check"></i>5. In our proportion bar chart, we need to set group = 1. Why? In other words what is the problem with these two graphs?</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---position-adjustments"><strong>3.8</strong> Notes - Position Adjustments</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-5"><strong>3.8.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-is-the-problem-with-this-plot-how-could-you-improve-it"><i class="fa fa-check"></i>1. What is the problem with this plot? How could you improve it?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-parameters-to-geom_jitter-control-the-amount-of-jittering"><i class="fa fa-check"></i>2. What parameters to geom_jitter() control the amount of jittering?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#compare-and-contrast-geom_jitter-with-geom_count."><i class="fa fa-check"></i>3. Compare and contrast geom_jitter() with geom_count().</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#whats-the-default-position-adjustment-for-geom_boxplot-create-a-visualisation-of-the-mpg-dataset-that-demonstrates-it."><i class="fa fa-check"></i>4. What’s the default position adjustment for geom_boxplot()? Create a visualisation of the mpg dataset that demonstrates it.</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---coordinate-systems"><strong>3.9</strong> Notes - Coordinate Systems</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-6"><strong>3.9.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#turn-a-stacked-bar-chart-into-a-pie-chart-using-coord_polar."><i class="fa fa-check"></i>1. Turn a stacked bar chart into a pie chart using coord_polar().</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-labs-do-read-the-documentation."><i class="fa fa-check"></i>2. What does labs() do? Read the documentation.</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#whats-the-difference-between-coord_quickmap-and-coord_map"><i class="fa fa-check"></i>3. What’s the difference between coord_quickmap() and coord_map()?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-the-plot-below-tell-you-about-the-relationship-between-city-and-highway-mpg-why-is-coord_fixed-important-what-does-geom_abline-do"><i class="fa fa-check"></i>4. What does the plot below tell you about the relationship between city and highway mpg? Why is coord_fixed() important? What does geom_abline() do?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-4-workflow-basics.html"><a href="chapter-4-workflow-basics.html"><i class="fa fa-check"></i>Chapter 4 - Workflow: basics</a><ul>
<li><a href="chapter-4-workflow-basics.html#practice"><strong>4.4</strong> Practice</a><ul>
<li class="chapter" data-level="" data-path="chapter-4-workflow-basics.html"><a href="chapter-4-workflow-basics.html#why-does-this-code-not-work"><i class="fa fa-check"></i>1. Why does this code not work?</a></li>
<li class="chapter" data-level="" data-path="chapter-4-workflow-basics.html"><a href="chapter-4-workflow-basics.html#tweak-each-of-the-following-r-commands-so-that-they-run-correctly"><i class="fa fa-check"></i>2. Tweak each of the following R commands so that they run correctly:</a></li>
<li class="chapter" data-level="" data-path="chapter-4-workflow-basics.html"><a href="chapter-4-workflow-basics.html#press-alt-shift-k.-what-happens-how-can-you-get-to-the-same-place-using-the-menus"><i class="fa fa-check"></i>3. Press Alt + Shift + K. What happens? How can you get to the same place using the menus?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html"><i class="fa fa-check"></i>Chapter 5 - Data transformation</a><ul>
<li><a href="chapter-5-data-transformation.html#notes---filter-rows-with-filter"><strong>5.2</strong> Notes - Filter rows with filter()</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#comparisons"><i class="fa fa-check"></i>5.2.1 Comparisons</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#logical-operators"><i class="fa fa-check"></i>5.2.2 Logical Operators</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#missing-values"><i class="fa fa-check"></i>5.2.3 Missing values</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#exercises-7"><strong>5.2.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#find-all-flights-that"><i class="fa fa-check"></i>1. Find all flights that</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#how-many-flights-have-a-missing-dep_time-what-other-variables-are-missing-what-might-these-rows-represent"><i class="fa fa-check"></i>2. How many flights have a missing dep_time? What other variables are missing? What might these rows represent?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#why-is-na-0-not-missing-why-is-na-true-not-missing-why-is-false-na-not-missing-can-you-figure-out-the-general-rule-na-0-is-a-tricky-counterexample"><i class="fa fa-check"></i>3. Why is NA ^ 0 not missing? Why is NA | TRUE not missing? Why is FALSE &amp; NA not missing? Can you figure out the general rule? (NA * 0 is a tricky counterexample!)</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#notes---arrange-rows-with-arrange"><strong>5.3</strong> Notes - Arrange rows with arrange()</a></li>
<li><a href="chapter-5-data-transformation.html#exercises-8"><strong>5.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#how-could-you-use-arrange-to-sort-all-missing-values-to-the-start-hint-use-is.na."><i class="fa fa-check"></i>1. How could you use arrange() to sort all missing values to the start? (Hint: use is.na()).</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#sort-flights-to-find-the-most-delayed-flights.-find-the-flights-that-left-earliest."><i class="fa fa-check"></i>2. Sort flights to find the most delayed flights. Find the flights that left earliest.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#sort-flights-to-find-the-fastest-flights."><i class="fa fa-check"></i>3. Sort flights to find the fastest flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#which-flights-travelled-the-longest-which-travelled-the-shortest"><i class="fa fa-check"></i>4. Which flights travelled the longest? Which travelled the shortest?</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#notes---select-columns-with-select"><strong>5.4</strong> Notes - Select columns with select()</a></li>
<li><a href="chapter-5-data-transformation.html#exercises-9"><strong>5.4.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#brainstorm-as-many-ways-as-possible-to-select-dep_time-dep_delay-arr_time-and-arr_delay-from-flights."><i class="fa fa-check"></i>1. Brainstorm as many ways as possible to select dep_time, dep_delay, arr_time, and arr_delay from flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-happens-if-you-include-the-name-of-a-variable-multiple-times-in-a-select-call"><i class="fa fa-check"></i>2. What happens if you include the name of a variable multiple times in a select() call?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-does-the-one_of-function-do-why-might-it-be-helpful-in-conjunction-with-this-vector"><i class="fa fa-check"></i>3. What does the one_of() function do? Why might it be helpful in conjunction with this vector?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#does-the-result-of-running-the-following-code-surprise-you-how-do-the-select-helpers-deal-with-case-by-default-how-can-you-change-that-default"><i class="fa fa-check"></i>4. Does the result of running the following code surprise you? How do the select helpers deal with case by default? How can you change that default?</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#notes---add-new-variables-with-mutate"><strong>5.5</strong> Notes - Add new variables with mutate()</a></li>
<li><a href="chapter-5-data-transformation.html#exercises-10"><strong>5.5.2</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#currently-dep_time-and-sched_dep_time-are-convenient-to-look-at-but-hard-to-compute-with-because-theyre-not-really-continuous-numbers.-convert-them-to-a-more-convenient-representation-of-number-of-minutes-since-midnight."><i class="fa fa-check"></i>1. Currently dep_time and sched_dep_time are convenient to look at, but hard to compute with because they’re not really continuous numbers. Convert them to a more convenient representation of number of minutes since midnight.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#compare-air_time-with-arr_time---dep_time.-what-do-you-expect-to-see-what-do-you-see-what-do-you-need-to-do-to-fix-it"><i class="fa fa-check"></i>2. Compare air_time with arr_time - dep_time. What do you expect to see? What do you see? What do you need to do to fix it?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#compare-dep_time-sched_dep_time-and-dep_delay.-how-would-you-expect-those-three-numbers-to-be-related"><i class="fa fa-check"></i>3. Compare dep_time, sched_dep_time, and dep_delay. How would you expect those three numbers to be related?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#find-the-10-most-delayed-flights-using-a-ranking-function.-how-do-you-want-to-handle-ties-carefully-read-the-documentation-for-min_rank."><i class="fa fa-check"></i>4. Find the 10 most delayed flights using a ranking function. How do you want to handle ties? Carefully read the documentation for min_rank().</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-does-13-110-return-why"><i class="fa fa-check"></i>5. What does 1:3 + 1:10 return? Why?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-trigonometric-functions-does-r-provide"><i class="fa fa-check"></i>6. What trigonometric functions does R provide?</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#notes---grouped-summaries-with-summarise"><strong>5.6</strong> Notes - Grouped summaries with summarise()</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#combining-multiple-operations-with-the-pipe"><i class="fa fa-check"></i>5.6.1 Combining multiple operations with the pipe</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#missing-values-1"><i class="fa fa-check"></i>5.6.2 Missing values</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#counts"><i class="fa fa-check"></i>5.6.3 Counts</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#useful-summary-functions"><i class="fa fa-check"></i>5.6.4 Useful summary functions</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#grouping-by-multiple-variables"><i class="fa fa-check"></i>5.6.5 Grouping by multiple variables</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#exercises-11"><strong>5.6.7</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#brainstorm-at-least-5-different-ways-to-assess-the-typical-delay-characteristics-of-a-group-of-flights.-consider-the-following-scenarios"><i class="fa fa-check"></i>1. Brainstorm at least 5 different ways to assess the typical delay characteristics of a group of flights. Consider the following scenarios:</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#come-up-with-another-approach-that-will-give-you-the-same-output-as-not_cancelled-countdest-and-not_cancelled-counttailnum-wt-distance-without-using-count."><i class="fa fa-check"></i>2. Come up with another approach that will give you the same output as not_cancelled %&gt;% count(dest) and not_cancelled %&gt;% count(tailnum, wt = distance) (without using count()).</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#our-definition-of-cancelled-flights-is.nadep_delay-is.naarr_delay-is-slightly-suboptimal.-why-which-is-the-most-important-column"><i class="fa fa-check"></i>3. Our definition of cancelled flights (is.na(dep_delay) | is.na(arr_delay) ) is slightly suboptimal. Why? Which is the most important column?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#look-at-the-number-of-cancelled-flights-per-day.-is-there-a-pattern-is-the-proportion-of-cancelled-flights-related-to-the-average-delay"><i class="fa fa-check"></i>4. Look at the number of cancelled flights per day. Is there a pattern? Is the proportion of cancelled flights related to the average delay?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#which-carrier-has-the-worst-delays-challenge-can-you-disentangle-the-effects-of-bad-airports-vs.bad-carriers-whywhy-not-hint-think-about-flights-group_bycarrier-dest-summarisen"><i class="fa fa-check"></i>5. Which carrier has the worst delays? Challenge: can you disentangle the effects of bad airports vs. bad carriers? Why/why not? (Hint: think about flights %&gt;% group_by(carrier, dest) %&gt;% summarise(n()))</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-does-the-sort-argument-to-count-do.-when-might-you-use-it"><i class="fa fa-check"></i>6. What does the sort argument to count() do. When might you use it?</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#notes---grouped-mutates-and-filters"><strong>5.7</strong> Notes - Grouped mutates (and filters)</a></li>
<li><a href="chapter-5-data-transformation.html#exercises-12"><strong>5.7.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#refer-back-to-the-lists-of-useful-mutate-and-filtering-functions.-describe-how-each-operation-changes-when-you-combine-it-with-grouping."><i class="fa fa-check"></i>1. Refer back to the lists of useful mutate and filtering functions. Describe how each operation changes when you combine it with grouping.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#which-plane-tailnum-has-the-worst-on-time-record"><i class="fa fa-check"></i>2. Which plane (tailnum) has the worst on-time record?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-time-of-day-should-you-fly-if-you-want-to-avoid-delays-as-much-as-possible"><i class="fa fa-check"></i>3. What time of day should you fly if you want to avoid delays as much as possible?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#for-each-destination-compute-the-total-minutes-of-delay.-for-each-flight-compute-the-proportion-of-the-total-delay-for-its-destination."><i class="fa fa-check"></i>4. For each destination, compute the total minutes of delay. For each, flight, compute the proportion of the total delay for its destination.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#delays-are-typically-temporally-correlated-even-once-the-problem-that-caused-the-initial-delay-has-been-resolved-later-flights-are-delayed-to-allow-earlier-flights-to-leave.-using-lag-explore-how-the-delay-of-a-flight-is-related-to-the-delay-of-the-immediately-preceding-flight."><i class="fa fa-check"></i>5. Delays are typically temporally correlated: even once the problem that caused the initial delay has been resolved, later flights are delayed to allow earlier flights to leave. Using lag() explore how the delay of a flight is related to the delay of the immediately preceding flight.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#look-at-each-destination.-can-you-find-flights-that-are-suspiciously-fast-i.e.flights-that-represent-a-potential-data-entry-error.-compute-the-air-time-a-flight-relative-to-the-shortest-flight-to-that-destination.-which-flights-were-most-delayed-in-the-air"><i class="fa fa-check"></i>6. Look at each destination. Can you find flights that are suspiciously fast? (i.e. flights that represent a potential data entry error). Compute the air time a flight relative to the shortest flight to that destination. Which flights were most delayed in the air?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#find-all-destinations-that-are-flown-by-at-least-two-carriers.-use-that-information-to-rank-the-carriers."><i class="fa fa-check"></i>7. Find all destinations that are flown by at least two carriers. Use that information to rank the carriers.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#for-each-plane-count-the-number-of-flights-before-the-first-delay-of-greater-than-1-hour."><i class="fa fa-check"></i>8. For each plane, count the number of flights before the first delay of greater than 1 hour.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-6-workflow-scripts.html"><a href="chapter-6-workflow-scripts.html"><i class="fa fa-check"></i>Chapter 6 - Workflow: scripts</a><ul>
<li><a href="chapter-6-workflow-scripts.html#exercises-13"><strong>6.3</strong> Exercises</a><ul>
<li><a href="chapter-6-workflow-scripts.html#go-to-the-rstudio-tips-twitter-account-httpstwitter.comrstudiotips-and-find-one-tip-that-looks-interesting.-practice-using-it">1. Go to the RStudio Tips twitter account, <code>https://twitter.com/rstudiotips</code> and find one tip that looks interesting. Practice using it!</a></li>
<li><a href="chapter-6-workflow-scripts.html#what-other-common-mistakes-will-rstudio-diagnostics-report-read-httpssupport.rstudio.comhcen-usarticles205753617-code-diagnostics-to-find-out.">2. What other common mistakes will RStudio diagnostics report? Read <code>https://support.rstudio.com/hc/en-us/articles/205753617-Code-Diagnostics</code> to find out.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html"><i class="fa fa-check"></i>Chapter 7 - Exploratory Data Analysis</a><ul>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---visualizing-distributions"><strong>7.3.1</strong> Notes - Visualizing distributions</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#exercises-14"><strong>7.3.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#explore-the-distribution-of-each-of-the-x-y-and-z-variables-in-diamonds.-what-do-you-learn-think-about-a-diamond-and-how-you-might-decide-which-dimension-is-the-length-width-and-depth."><i class="fa fa-check"></i>1. Explore the distribution of each of the x, y, and z variables in diamonds. What do you learn? Think about a diamond and how you might decide which dimension is the length, width, and depth.</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#explore-the-distribution-of-price.-do-you-discover-anything-unusual-or-surprising-hint-carefully-think-about-the-binwidth-and-make-sure-you-try-a-wide-range-of-values."><i class="fa fa-check"></i>2. Explore the distribution of price. Do you discover anything unusual or surprising? (Hint: Carefully think about the binwidth and make sure you try a wide range of values.)</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#how-many-diamonds-are-0.99-carat-how-many-are-1-carat-what-do-you-think-is-the-cause-of-the-difference"><i class="fa fa-check"></i>3. How many diamonds are 0.99 carat? How many are 1 carat? What do you think is the cause of the difference?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#compare-and-contrast-coord_cartesian-vs-xlim-or-ylim-when-zooming-in-on-a-histogram.-what-happens-if-you-leave-binwidth-unset-what-happens-if-you-try-and-zoom-so-only-half-a-bar-shows"><i class="fa fa-check"></i>4. Compare and contrast coord_cartesian() vs xlim() or ylim() when zooming in on a histogram. What happens if you leave binwidth unset? What happens if you try and zoom so only half a bar shows?</a></li>
</ul></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---missing-values"><strong>7.4</strong> Notes - Missing Values</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#exercises-15"><strong>7.4.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#what-happens-to-missing-values-in-a-histogram-what-happens-to-missing-values-in-a-bar-chart-why-is-there-a-difference"><i class="fa fa-check"></i>1. What happens to missing values in a histogram? What happens to missing values in a bar chart? Why is there a difference?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#what-does-na.rm-true-do-in-mean-and-sum"><i class="fa fa-check"></i>2. What does na.rm = TRUE do in mean() and sum()?</a></li>
</ul></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---covariation"><strong>7.5</strong> Notes - Covariation</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---a-categorical-and-continuous-variable"><strong>7.5.1</strong> Notes - A categorical and continuous variable</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#exercises-16"><strong>7.5.1.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#use-what-youve-learned-to-improve-the-visualisation-of-the-departure-times-of-cancelled-vs.non-cancelled-flights."><i class="fa fa-check"></i>1. Use what you’ve learned to improve the visualisation of the departure times of cancelled vs. non-cancelled flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#what-variable-in-the-diamonds-dataset-is-most-important-for-predicting-the-price-of-a-diamond-how-is-that-variable-correlated-with-cut-why-does-the-combination-of-those-two-relationships-lead-to-lower-quality-diamonds-being-more-expensive"><i class="fa fa-check"></i>2. What variable in the diamonds dataset is most important for predicting the price of a diamond? How is that variable correlated with cut? Why does the combination of those two relationships lead to lower quality diamonds being more expensive?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#install-the-ggstance-package-and-create-a-horizontal-boxplot.-how-does-this-compare-to-using-coord_flip"><i class="fa fa-check"></i>3. Install the ggstance package, and create a horizontal boxplot. How does this compare to using coord_flip()?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#one-problem-with-boxplots-is-that-they-were-developed-in-an-era-of-much-smaller-datasets-and-tend-to-display-a-prohibitively-large-number-of-outlying-values.-one-approach-to-remedy-this-problem-is-the-letter-value-plot.-install-the-lvplot-package-and-try-using-geom_lv-to-display-the-distribution-of-price-vs-cut.-what-do-you-learn-how-do-you-interpret-the-plots"><i class="fa fa-check"></i>4. One problem with boxplots is that they were developed in an era of much smaller datasets and tend to display a prohibitively large number of “outlying values”. One approach to remedy this problem is the letter value plot. Install the lvplot package, and try using geom_lv() to display the distribution of price vs cut. What do you learn? How do you interpret the plots?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#compare-and-contrast-geom_violin-with-a-facetted-geom_histogram-or-a-coloured-geom_freqpoly.-what-are-the-pros-and-cons-of-each-method"><i class="fa fa-check"></i>5. Compare and contrast geom_violin() with a facetted geom_histogram(), or a coloured geom_freqpoly(). What are the pros and cons of each method?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#if-you-have-a-small-dataset-its-sometimes-useful-to-use-geom_jitter-to-see-the-relationship-between-a-continuous-and-categorical-variable.-the-ggbeeswarm-package-provides-a-number-of-methods-similar-to-geom_jitter.-list-them-and-briefly-describe-what-each-one-does."><i class="fa fa-check"></i>6. If you have a small dataset, it’s sometimes useful to use geom_jitter() to see the relationship between a continuous and categorical variable. The ggbeeswarm package provides a number of methods similar to geom_jitter(). List them and briefly describe what each one does.</a></li>
</ul></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---two-categorical-variables"><strong>7.5.2</strong> Notes - Two categorical variables</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#exercises-17"><strong>7.5.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#how-could-you-rescale-the-count-dataset-above-to-more-clearly-show-the-distribution-of-cut-within-colour-or-colour-within-cut"><i class="fa fa-check"></i>1. How could you rescale the count dataset above to more clearly show the distribution of cut within colour, or colour within cut?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#use-geom_tile-together-with-dplyr-to-explore-how-average-flight-delays-vary-by-destination-and-month-of-year.-what-makes-the-plot-difficult-to-read-how-could-you-improve-it"><i class="fa fa-check"></i>2. Use geom_tile() together with dplyr to explore how average flight delays vary by destination and month of year. What makes the plot difficult to read? How could you improve it?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#why-is-it-slightly-better-to-use-aesx-color-y-cut-rather-than-aesx-cut-y-color-in-the-example-above"><i class="fa fa-check"></i>3. Why is it slightly better to use aes(x = color, y = cut) rather than aes(x = cut, y = color) in the example above?</a></li>
</ul></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---two-continuous-variables"><strong>7.5.3</strong> Notes - Two continuous variables</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#exercises-18"><strong>7.5.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#instead-of-summarising-the-conditional-distribution-with-a-boxplot-you-could-use-a-frequency-polygon.-what-do-you-need-to-consider-when-using-cut_width-vs-cut_number-how-does-that-impact-a-visualisation-of-the-2d-distribution-of-carat-and-price"><i class="fa fa-check"></i>1. Instead of summarising the conditional distribution with a boxplot, you could use a frequency polygon. What do you need to consider when using cut_width() vs cut_number()? How does that impact a visualisation of the 2d distribution of carat and price?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#visualise-the-distribution-of-carat-partitioned-by-price."><i class="fa fa-check"></i>2. Visualise the distribution of carat, partitioned by price.</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#how-does-the-price-distribution-of-very-large-diamonds-compare-to-small-diamonds.-is-it-as-you-expect-or-does-it-surprise-you"><i class="fa fa-check"></i>3. How does the price distribution of very large diamonds compare to small diamonds. Is it as you expect, or does it surprise you?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#combine-two-of-the-techniques-youve-learned-to-visualise-the-combined-distribution-of-cut-carat-and-price."><i class="fa fa-check"></i>4. Combine two of the techniques you’ve learned to visualise the combined distribution of cut, carat, and price.</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#two-dimensional-plots-reveal-outliers-that-are-not-visible-in-one-dimensional-plots.-for-example-some-points-in-the-plot-below-have-an-unusual-combination-of-x-and-y-values-which-makes-the-points-outliers-even-though-their-x-and-y-values-appear-normal-when-examined-separately.-why-is-a-scatterplot-a-better-display-than-a-binned-plot-for-this-case"><i class="fa fa-check"></i>5. Two dimensional plots reveal outliers that are not visible in one dimensional plots. For example, some points in the plot below have an unusual combination of x and y values, which makes the points outliers even though their x and y values appear normal when examined separately. Why is a scatterplot a better display than a binned plot for this case?</a></li>
</ul></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---patterns-and-models"><strong>7.6</strong> Notes - Patterns and models</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-8-workflow-projects.html"><a href="chapter-8-workflow-projects.html"><i class="fa fa-check"></i>Chapter 8 - Workflow: projects</a><ul>
<li class="chapter" data-level="" data-path="chapter-8-workflow-projects.html"><a href="chapter-8-workflow-projects.html#notes---project-workflows"><i class="fa fa-check"></i>Notes - Project Workflows</a></li>
</ul></li>
<li class="part"><span><b>II Data Wrangling</b></span></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html"><i class="fa fa-check"></i>Chapter 10 - Tibbles</a><ul>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#notes---creating-tibbles"><i class="fa fa-check"></i>Notes - Creating Tibbles</a></li>
<li><a href="chapter-10-tibbles.html#exercises-19"><strong>10.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#how-can-you-tell-if-an-object-is-a-tibble-hint-try-printing-mtcars-which-is-a-regular-data-frame."><i class="fa fa-check"></i>1. How can you tell if an object is a tibble? (Hint: try printing mtcars, which is a regular data frame).</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#compare-and-contrast-the-following-operations-on-a-data.frame-and-equivalent-tibble.-what-is-different-why-might-the-default-data-frame-behaviours-cause-you-frustration"><i class="fa fa-check"></i>2. Compare and contrast the following operations on a data.frame and equivalent tibble. What is different? Why might the default data frame behaviours cause you frustration?</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#if-you-have-the-name-of-a-variable-stored-in-an-object-e.g.var---mpg-how-can-you-extract-the-reference-variable-from-a-tibble"><i class="fa fa-check"></i>3. If you have the name of a variable stored in an object, e.g. var &lt;- “mpg”, how can you extract the reference variable from a tibble?</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#practice-referring-to-non-syntactic-names-in-the-following-data-frame-by"><i class="fa fa-check"></i>4. Practice referring to non-syntactic names in the following data frame by:</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#what-does-tibbleenframe-do-when-might-you-use-it"><i class="fa fa-check"></i>5. What does tibble::enframe() do? When might you use it?</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#what-option-controls-how-many-additional-column-names-are-printed-at-the-footer-of-a-tibble"><i class="fa fa-check"></i>6. What option controls how many additional column names are printed at the footer of a tibble?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html"><i class="fa fa-check"></i>Chapter 11 - Data import</a><ul>
<li><a href="chapter-11-data-import.html#notes---reading-in-files"><strong>11.2</strong> Notes - Reading in files</a></li>
<li><a href="chapter-11-data-import.html#exercises-20"><strong>11.2.2</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#what-function-would-you-use-to-read-a-file-where-fields-were-separated-with"><i class="fa fa-check"></i>1. What function would you use to read a file where fields were separated with “|”?</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#apart-from-file-skip-and-comment-what-other-arguments-do-read_csv-and-read_tsv-have-in-common"><i class="fa fa-check"></i>2. Apart from file, skip, and comment, what other arguments do read_csv() and read_tsv() have in common?</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#what-are-the-most-important-arguments-to-read_fwf"><i class="fa fa-check"></i>3. What are the most important arguments to read_fwf()?</a></li>
<li class="chapter" data-level="0.0.1" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#sometimes-strings-in-a-csv-file-contain-commas.-to-prevent-them-from-causing-problems-they-need-to-be-surrounded-by-a-quoting-character-like-or-.-by-convention-read_csv-assumes-that-the-quoting-character-will-be-and-if-you-want-to-change-it-youll-need-to-use-read_delim-instead.-what-arguments-do-you-need-to-specify-to-read-the-following-text-into-a-data-frame--"><i class="fa fa-check"></i><b>0.0.1</b> 4. Sometimes strings in a CSV file contain commas. To prevent them from causing problems they need to be surrounded by a quoting character, like &quot; or ’. By convention, read_csv() assumes that the quoting character will be “, and if you want to change it you’ll need to use read_delim() instead. What arguments do you need to specify to read the following text into a data frame? {-}</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#identify-what-is-wrong-with-each-of-the-following-inline-csv-files.-what-happens-when-you-run-the-code"><i class="fa fa-check"></i>5. Identify what is wrong with each of the following inline CSV files. What happens when you run the code?</a></li>
</ul></li>
<li><a href="chapter-11-data-import.html#notes---parsing-a-vector"><strong>11.3</strong> Notes - Parsing a vector</a><ul>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#parsing-numbers"><i class="fa fa-check"></i>11.3.1 Parsing Numbers</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#parsing-strings"><i class="fa fa-check"></i>11.3.2 Parsing Strings</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#parsing-factors"><i class="fa fa-check"></i>11.3.3 Parsing Factors</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#parsing-dates-date-times-and-times"><i class="fa fa-check"></i>11.3.4 Parsing Dates, Date-times, and Times</a></li>
</ul></li>
<li><a href="chapter-11-data-import.html#exercises-21"><strong>11.3.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#what-are-the-most-important-arguments-to-locale"><i class="fa fa-check"></i>1. What are the most important arguments to locale()?</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#what-happens-if-you-try-and-set-decimal_mark-and-grouping_mark-to-the-same-character-what-happens-to-the-default-value-of-grouping_mark-when-you-set-decimal_mark-to-what-happens-to-the-default-value-of-decimal_mark-when-you-set-the-grouping_mark-to-."><i class="fa fa-check"></i>2. What happens if you try and set decimal_mark and grouping_mark to the same character? What happens to the default value of grouping_mark when you set decimal_mark to “,”? What happens to the default value of decimal_mark when you set the grouping_mark to “.”?</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#i-didnt-discuss-the-date_format-and-time_format-options-to-locale.-what-do-they-do-construct-an-example-that-shows-when-they-might-be-useful."><i class="fa fa-check"></i>3. I didn’t discuss the date_format and time_format options to locale(). What do they do? Construct an example that shows when they might be useful.</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#if-you-live-outside-the-us-create-a-new-locale-object-that-encapsulates-the-settings-for-the-types-of-file-you-read-most-commonly."><i class="fa fa-check"></i>4. If you live outside the US, create a new locale object that encapsulates the settings for the types of file you read most commonly.</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#whats-the-difference-between-read_csv-and-read_csv2"><i class="fa fa-check"></i>5. What’s the difference between read_csv() and read_csv2()?</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#what-are-the-most-common-encodings-used-in-europe-what-are-the-most-common-encodings-used-in-asia-do-some-googling-to-find-out."><i class="fa fa-check"></i>6. What are the most common encodings used in Europe? What are the most common encodings used in Asia? Do some googling to find out.</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#generate-the-correct-format-string-to-parse-each-of-the-following-dates-and-times"><i class="fa fa-check"></i>7. Generate the correct format string to parse each of the following dates and times:</a></li>
</ul></li>
<li><a href="chapter-11-data-import.html#notes---parsing-a-file"><strong>11.4</strong> Notes - Parsing a file</a></li>
<li><a href="chapter-11-data-import.html#notes---writing-to-a-file"><strong>11.5</strong> Notes - Writing to a file</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html"><i class="fa fa-check"></i>Chapter 12 - Tidy data</a><ul>
<li><a href="chapter-12-tidy-data.html#exercises-22"><strong>12.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#using-prose-describe-how-the-variables-and-observations-are-organised-in-each-of-the-sample-tables."><i class="fa fa-check"></i>1. Using prose, describe how the variables and observations are organised in each of the sample tables.</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#compute-the-rate-for-table2-and-table4a-table4b.-you-will-need-to-perform-four-operations"><i class="fa fa-check"></i>2. Compute the rate for table2, and table4a + table4b. You will need to perform four operations:</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#recreate-the-plot-showing-change-in-cases-over-time-using-table2-instead-of-table1.-what-do-you-need-to-do-first"><i class="fa fa-check"></i>3. Recreate the plot showing change in cases over time using table2 instead of table1. What do you need to do first?</a></li>
</ul></li>
<li><a href="chapter-12-tidy-data.html#notes---spreading-and-gathering"><strong>12.3.1</strong> Notes - Spreading and Gathering</a></li>
<li><a href="chapter-12-tidy-data.html#exercises-23"><strong>12.3.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#why-are-gather-and-spread-not-perfectly-symmetrical-carefully-consider-the-following-example"><i class="fa fa-check"></i>1. Why are gather() and spread() not perfectly symmetrical? Carefully consider the following example:</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#why-does-this-code-fail"><i class="fa fa-check"></i>2. Why does this code fail?</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#why-does-spreading-this-tibble-fail-how-could-you-add-a-new-column-to-fix-the-problem"><i class="fa fa-check"></i>3. Why does spreading this tibble fail? How could you add a new column to fix the problem?</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#tidy-the-simple-tibble-below.-do-you-need-to-spread-or-gather-it-what-are-the-variables"><i class="fa fa-check"></i>4. Tidy the simple tibble below. Do you need to spread or gather it? What are the variables?</a></li>
</ul></li>
<li><a href="chapter-12-tidy-data.html#notes---separating-and-uniting"><strong>12.4</strong> Notes - Separating and uniting</a></li>
<li><a href="chapter-12-tidy-data.html#exercises-24"><strong>12.4.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#what-do-the-extra-and-fill-arguments-do-in-separate-experiment-with-the-various-options-for-the-following-two-toy-datasets."><i class="fa fa-check"></i>1. What do the extra and fill arguments do in separate()? Experiment with the various options for the following two toy datasets.</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#both-unite-and-separate-have-a-remove-argument.-what-does-it-do-why-would-you-set-it-to-false"><i class="fa fa-check"></i>2. Both unite() and separate() have a remove argument. What does it do? Why would you set it to FALSE?</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#compare-and-contrast-separate-and-extract.-why-are-there-three-variations-of-separation-by-position-by-separator-and-with-groups-but-only-one-unite"><i class="fa fa-check"></i>3. Compare and contrast separate() and extract(). Why are there three variations of separation (by position, by separator, and with groups), but only one unite?</a></li>
</ul></li>
<li><a href="chapter-12-tidy-data.html#notes---missing-values-1"><strong>12.5</strong> Notes - Missing Values</a></li>
<li><a href="chapter-12-tidy-data.html#exercises-25"><strong>12.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#compare-and-contrast-the-fill-arguments-to-spread-and-complete."><i class="fa fa-check"></i>1. Compare and contrast the fill arguments to spread() and complete().</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#what-does-the-direction-argument-to-fill-do"><i class="fa fa-check"></i>2. What does the direction argument to fill() do?</a></li>
</ul></li>
<li><a href="chapter-12-tidy-data.html#notes---case-study"><strong>12.6</strong> Notes - Case Study</a></li>
<li><a href="chapter-12-tidy-data.html#exercises-26"><strong>12.6.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#in-this-case-study-i-set-na.rm-true-just-to-make-it-easier-to-check-that-we-had-the-correct-values.-is-this-reasonable-think-about-how-missing-values-are-represented-in-this-dataset.-are-there-implicit-missing-values-whats-the-difference-between-an-na-and-zero"><i class="fa fa-check"></i>1. In this case study I set na.rm = TRUE just to make it easier to check that we had the correct values. Is this reasonable? Think about how missing values are represented in this dataset. Are there implicit missing values? What’s the difference between an NA and zero?</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#what-happens-if-you-neglect-the-mutate-step-mutatekey-stringrstr_replacekey-newrel-new_rel"><i class="fa fa-check"></i>2. What happens if you neglect the mutate() step? (mutate(key = stringr::str_replace(key, “newrel”, “new_rel”)))</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#i-claimed-that-iso2-and-iso3-were-redundant-with-country.-confirm-this-claim."><i class="fa fa-check"></i>3. I claimed that iso2 and iso3 were redundant with country. Confirm this claim.</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#for-each-country-year-and-sex-compute-the-total-number-of-cases-of-tb.-make-an-informative-visualisation-of-the-data."><i class="fa fa-check"></i>4. For each country, year, and sex compute the total number of cases of TB. Make an informative visualisation of the data.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html"><i class="fa fa-check"></i>Chapter 13 - Relational data</a><ul>
<li><a href="chapter-13-relational-data.html#exercises-27"><strong>13.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#imagine-you-wanted-to-draw-approximately-the-route-each-plane-flies-from-its-origin-to-its-destination.-what-variables-would-you-need-what-tables-would-you-need-to-combine"><i class="fa fa-check"></i>1. Imagine you wanted to draw (approximately) the route each plane flies from its origin to its destination. What variables would you need? What tables would you need to combine?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#i-forgot-to-draw-the-relationship-between-weather-and-airports.-what-is-the-relationship-and-how-should-it-appear-in-the-diagram"><i class="fa fa-check"></i>2. I forgot to draw the relationship between weather and airports. What is the relationship and how should it appear in the diagram?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#weather-only-contains-information-for-the-origin-nyc-airports.-if-it-contained-weather-records-for-all-airports-in-the-usa-what-additional-relation-would-it-define-with-flights"><i class="fa fa-check"></i>3. weather only contains information for the origin (NYC) airports. If it contained weather records for all airports in the USA, what additional relation would it define with flights?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#we-know-that-some-days-of-the-year-are-special-and-fewer-people-than-usual-fly-on-them.-how-might-you-represent-that-data-as-a-data-frame-what-would-be-the-primary-keys-of-that-table-how-would-it-connect-to-the-existing-tables"><i class="fa fa-check"></i>4. We know that some days of the year are “special”, and fewer people than usual fly on them. How might you represent that data as a data frame? What would be the primary keys of that table? How would it connect to the existing tables?</a></li>
</ul></li>
<li><a href="chapter-13-relational-data.html#notes---keys"><strong>13.3</strong> Notes - Keys</a></li>
<li><a href="chapter-13-relational-data.html#exercises-28"><strong>13.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#add-a-surrogate-key-to-flights."><i class="fa fa-check"></i>1. Add a surrogate key to flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#identify-the-keys-in-the-following-datasets"><i class="fa fa-check"></i>2. Identify the keys in the following datasets:</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#draw-a-diagram-illustrating-the-connections-between-the-batting-master-and-salaries-tables-in-the-lahman-package.-draw-another-diagram-that-shows-the-relationship-between-master-managers-awardsmanagers.-how-would-you-characterise-the-relationship-between-the-batting-pitching-and-fielding-tables"><i class="fa fa-check"></i>3. Draw a diagram illustrating the connections between the Batting, Master, and Salaries tables in the Lahman package. Draw another diagram that shows the relationship between Master, Managers, AwardsManagers. How would you characterise the relationship between the Batting, Pitching, and Fielding tables?</a></li>
</ul></li>
<li><a href="chapter-13-relational-data.html#notes---mutating-joins"><strong>13.4</strong> Notes - Mutating Joins</a></li>
<li><a href="chapter-13-relational-data.html#exercises-29"><strong>13.4.6</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#compute-the-average-delay-by-destination-then-join-on-the-airports-data-frame-so-you-can-show-the-spatial-distribution-of-delays.-heres-an-easy-way-to-draw-a-map-of-the-united-states"><i class="fa fa-check"></i>1. Compute the average delay by destination, then join on the airports data frame so you can show the spatial distribution of delays. Here’s an easy way to draw a map of the United States:</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#add-the-location-of-the-origin-and-destination-i.e.the-lat-and-lon-to-flights."><i class="fa fa-check"></i>2. Add the location of the origin and destination (i.e. the lat and lon) to flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#is-there-a-relationship-between-the-age-of-a-plane-and-its-delays"><i class="fa fa-check"></i>3. Is there a relationship between the age of a plane and its delays?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#what-weather-conditions-make-it-more-likely-to-see-a-delay"><i class="fa fa-check"></i>4. What weather conditions make it more likely to see a delay?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#what-happened-on-june-13-2013-display-the-spatial-pattern-of-delays-and-then-use-google-to-cross-reference-with-the-weather."><i class="fa fa-check"></i>5. What happened on June 13 2013? Display the spatial pattern of delays, and then use Google to cross-reference with the weather.</a></li>
</ul></li>
<li><a href="chapter-13-relational-data.html#notes---filtering-joins"><strong>13.5</strong> Notes - Filtering Joins</a></li>
<li><a href="chapter-13-relational-data.html#exercises-30"><strong>13.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#what-does-it-mean-for-a-flight-to-have-a-missing-tailnum-what-do-the-tail-numbers-that-dont-have-a-matching-record-in-planes-have-in-common-hint-one-variable-explains-90-of-the-problems."><i class="fa fa-check"></i>1. What does it mean for a flight to have a missing tailnum? What do the tail numbers that don’t have a matching record in planes have in common? (Hint: one variable explains ~90% of the problems.)</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#filter-flights-to-only-show-flights-with-planes-that-have-flown-at-least-100-flights."><i class="fa fa-check"></i>2. Filter flights to only show flights with planes that have flown at least 100 flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#combine-fueleconomyvehicles-and-fueleconomycommon-to-find-only-the-records-for-the-most-common-models."><i class="fa fa-check"></i>3. Combine fueleconomy::vehicles and fueleconomy::common to find only the records for the most common models.</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#find-the-48-hours-over-the-course-of-the-whole-year-that-have-the-worst-delays.-cross-reference-it-with-the-weather-data.-can-you-see-any-patterns"><i class="fa fa-check"></i>4. Find the 48 hours (over the course of the whole year) that have the worst delays. Cross-reference it with the weather data. Can you see any patterns?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#what-does-anti_joinflights-airports-by-cdest-faa-tell-you-what-does-anti_joinairports-flights-by-cfaa-dest-tell-you"><i class="fa fa-check"></i>5. What does anti_join(flights, airports, by = c(“dest” = “faa”)) tell you? What does anti_join(airports, flights, by = c(“faa” = “dest”)) tell you?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#you-might-expect-that-theres-an-implicit-relationship-between-plane-and-airline-because-each-plane-is-flown-by-a-single-airline.-confirm-or-reject-this-hypothesis-using-the-tools-youve-learned-above."><i class="fa fa-check"></i>6. You might expect that there’s an implicit relationship between plane and airline, because each plane is flown by a single airline. Confirm or reject this hypothesis using the tools you’ve learned above.</a></li>
</ul></li>
<li><a href="chapter-13-relational-data.html#notes---join-problems-and-set-operations"><strong>13.6 &amp; 13.7</strong> Notes - Join problems and set operations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html"><i class="fa fa-check"></i>Chapter 14 - Strings</a><ul>
<li><a href="chapter-14-strings.html#exercises-31"><strong>14.2.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#in-code-that-doesnt-use-stringr-youll-often-see-paste-and-paste0.-whats-the-difference-between-the-two-functions-what-stringr-function-are-they-equivalent-to-how-do-the-functions-differ-in-their-handling-of-na"><i class="fa fa-check"></i>1. In code that doesn’t use stringr, you’ll often see paste() and paste0(). What’s the difference between the two functions? What stringr function are they equivalent to? How do the functions differ in their handling of NA?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#in-your-own-words-describe-the-difference-between-the-sep-and-collapse-arguments-to-str_c."><i class="fa fa-check"></i>2. In your own words, describe the difference between the sep and collapse arguments to str_c().</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#use-str_length-and-str_sub-to-extract-the-middle-character-from-a-string.-what-will-you-do-if-the-string-has-an-even-number-of-characters"><i class="fa fa-check"></i>3. Use str_length() and str_sub() to extract the middle character from a string. What will you do if the string has an even number of characters?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#what-does-str_wrap-do-when-might-you-want-to-use-it"><i class="fa fa-check"></i>4. What does str_wrap() do? When might you want to use it?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#what-does-str_trim-do-whats-the-opposite-of-str_trim"><i class="fa fa-check"></i>5. What does str_trim() do? What’s the opposite of str_trim()?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#write-a-function-that-turns-e.g.-a-vector-ca-b-c-into-the-string-a-b-and-c.-think-carefully-about-what-it-should-do-if-given-a-vector-of-length-0-1-or-2."><i class="fa fa-check"></i>6. Write a function that turns (e.g.) a vector c(“a”, “b”, “c”) into the string a, b, and c. Think carefully about what it should do if given a vector of length 0, 1, or 2.</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-32"><strong>14.3.1.1</strong> Exercises</a><ul>
<li><a href="chapter-14-strings.html#explain-why-each-of-these-strings-dont-match-a-.">1. Explain why each of these strings don’t match a <code>\</code>: <code>&quot;\&quot;, &quot;\\&quot;, &quot;\\\&quot;</code>.</a></li>
<li><a href="chapter-14-strings.html#how-would-you-match-the-sequence">2. How would you match the sequence <code>&quot;'\</code>?</a></li>
<li><a href="chapter-14-strings.html#what-patterns-will-the-regular-expression-......-match-how-would-you-represent-it-as-a-string">3. What patterns will the regular expression <code>\..\..\..</code> match? How would you represent it as a string?</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-33"><strong>14.3.2.1</strong> Exercises</a><ul>
<li><a href="chapter-14-strings.html#how-would-you-match-the-literal-string">1. How would you match the literal string <code>&quot;$^$&quot;</code>?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#given-the-corpus-of-common-words-in-stringrwords-create-regular-expressions-that-find-all-words-that"><i class="fa fa-check"></i>2. Given the corpus of common words in stringr::words, create regular expressions that find all words that:</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-34"><strong>14.3.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#create-regular-expressions-to-find-all-words-that"><i class="fa fa-check"></i>1. Create regular expressions to find all words that:</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#empirically-verify-the-rule-i-before-e-except-after-c."><i class="fa fa-check"></i>2. Empirically verify the rule “i before e except after c”.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#is-q-always-followed-by-a-u"><i class="fa fa-check"></i>3. Is “q” always followed by a “u”?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#write-a-regular-expression-that-matches-a-word-if-its-probably-written-in-british-english-not-american-english."><i class="fa fa-check"></i>4. Write a regular expression that matches a word if it’s probably written in British English, not American English.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#create-a-regular-expression-that-will-match-telephone-numbers-as-commonly-written-in-your-country."><i class="fa fa-check"></i>5. Create a regular expression that will match telephone numbers as commonly written in your country.</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-35"><strong>14.3.4.1</strong> Exercises</a><ul>
<li><a href="chapter-14-strings.html#describe-the-equivalents-of-in-mn-form.">1. Describe the equivalents of <code>?, +, *</code> in <code>{m,n}</code> form.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#describe-in-words-what-these-regular-expressions-match-read-carefully-to-see-if-im-using-a-regular-expression-or-a-string-that-defines-a-regular-expression."><i class="fa fa-check"></i>2. Describe in words what these regular expressions match: (read carefully to see if I’m using a regular expression or a string that defines a regular expression.)</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#create-regular-expressions-to-find-all-words-that-1"><i class="fa fa-check"></i>3. Create regular expressions to find all words that:</a></li>
<li><a href="chapter-14-strings.html#solve-the-beginner-regexp-crosswords-at-httpsregexcrossword.comchallengesbeginner.">4. Solve the beginner regexp crosswords at <code>https://regexcrossword.com/challenges/beginner</code>.</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-36"><strong>14.3.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#describe-in-words-what-these-expressions-will-match"><i class="fa fa-check"></i>1. Describe, in words, what these expressions will match:</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#construct-regular-expressions-to-match-words-that"><i class="fa fa-check"></i>2. Construct regular expressions to match words that:</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-37"><strong>14.4.2</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#for-each-of-the-following-challenges-try-solving-it-by-using-both-a-single-regular-expression-and-a-combination-of-multiple-str_detect-calls."><i class="fa fa-check"></i>1. For each of the following challenges, try solving it by using both a single regular expression, and a combination of multiple str_detect() calls.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#what-word-has-the-highest-number-of-vowels-what-word-has-the-highest-proportion-of-vowels-hint-what-is-the-denominator"><i class="fa fa-check"></i>2. What word has the highest number of vowels? What word has the highest proportion of vowels? (Hint: what is the denominator?)</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-38"><strong>14.4.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#in-the-previous-example-you-might-have-noticed-that-the-regular-expression-matched-flickered-which-is-not-a-colour.-modify-the-regex-to-fix-the-problem."><i class="fa fa-check"></i>1. In the previous example, you might have noticed that the regular expression matched “flickered”, which is not a colour. Modify the regex to fix the problem.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#from-the-harvard-sentences-data-extract"><i class="fa fa-check"></i>2. From the Harvard sentences data, extract:</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-39"><strong>14.4.4.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#find-all-words-that-come-after-a-number-like-one-two-three-etc.-pull-out-both-the-number-and-the-word."><i class="fa fa-check"></i>1. Find all words that come after a “number” like “one”, “two”, “three” etc. Pull out both the number and the word.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#find-all-contractions.-separate-out-the-pieces-before-and-after-the-apostrophe."><i class="fa fa-check"></i>2. Find all contractions. Separate out the pieces before and after the apostrophe.</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-40"><strong>14.4.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#replace-all-forward-slashes-in-a-string-with-backslashes."><i class="fa fa-check"></i>1. Replace all forward slashes in a string with backslashes.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#implement-a-simple-version-of-str_to_lower-using-replace_all."><i class="fa fa-check"></i>2. Implement a simple version of str_to_lower() using replace_all().</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#switch-the-first-and-last-letters-in-words.-which-of-those-strings-are-still-words"><i class="fa fa-check"></i>3. Switch the first and last letters in words. Which of those strings are still words?</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-41"><strong>14.4.6.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#split-up-a-string-like-apples-pears-and-bananas-into-individual-components."><i class="fa fa-check"></i>1. Split up a string like “apples, pears, and bananas” into individual components.</a></li>
<li><a href="chapter-14-strings.html#why-is-it-better-to-split-up-by-boundaryword-than">2. Why is it better to split up by <code>boundary(&quot;word&quot;)</code> than <code>&quot; &quot;</code>?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#what-does-splitting-with-an-empty-string-do-experiment-and-then-read-the-documentation."><i class="fa fa-check"></i>3. What does splitting with an empty string (“”) do? Experiment, and then read the documentation.</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-42"><strong>14.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#how-would-you-find-all-strings-containing-with-regex-vs.with-fixed"><i class="fa fa-check"></i>1. How would you find all strings containing  with regex() vs. with fixed()?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#what-are-the-five-most-common-words-in-sentences"><i class="fa fa-check"></i>2. What are the five most common words in sentences?</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-43"><strong>14.7.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#find-the-stringi-functions-that"><i class="fa fa-check"></i>1. Find the stringi functions that:</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#how-do-you-control-the-language-that-stri_sort-uses-for-sorting"><i class="fa fa-check"></i>2. How do you control the language that stri_sort() uses for sorting?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html"><i class="fa fa-check"></i>Chapter 15 - Factors</a><ul>
<li><a href="chapter-15-factors.html#exercises-44"><strong>15.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#explore-the-distribution-of-rincome-reported-income.-what-makes-the-default-bar-chart-hard-to-understand-how-could-you-improve-the-plot"><i class="fa fa-check"></i>1. Explore the distribution of rincome (reported income). What makes the default bar chart hard to understand? How could you improve the plot?</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#what-is-the-most-common-relig-in-this-survey-whats-the-most-common-partyid"><i class="fa fa-check"></i>2. What is the most common relig in this survey? What’s the most common partyid?</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#which-relig-does-denom-denomination-apply-to-how-can-you-find-out-with-a-table-how-can-you-find-out-with-a-visualisation"><i class="fa fa-check"></i>3. Which relig does denom (denomination) apply to? How can you find out with a table? How can you find out with a visualisation?</a></li>
</ul></li>
<li><a href="chapter-15-factors.html#exercises-45"><strong>15.4.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#there-are-some-suspiciously-high-numbers-in-tvhours.-is-the-mean-a-good-summary"><i class="fa fa-check"></i>1. There are some suspiciously high numbers in tvhours. Is the mean a good summary?</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#for-each-factor-in-gss_cat-identify-whether-the-order-of-the-levels-is-arbitrary-or-principled."><i class="fa fa-check"></i>2. For each factor in gss_cat identify whether the order of the levels is arbitrary or principled.</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#why-did-moving-not-applicable-to-the-front-of-the-levels-move-it-to-the-bottom-of-the-plot"><i class="fa fa-check"></i>3. Why did moving “Not applicable” to the front of the levels move it to the bottom of the plot?</a></li>
</ul></li>
<li><a href="chapter-15-factors.html#exercises-46"><strong>15.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#how-have-the-proportions-of-people-identifying-as-democrat-republican-and-independent-changed-over-time"><i class="fa fa-check"></i>1. How have the proportions of people identifying as Democrat, Republican, and Independent changed over time?</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#how-could-you-collapse-rincome-into-a-small-set-of-categories"><i class="fa fa-check"></i>2. How could you collapse rincome into a small set of categories?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html"><i class="fa fa-check"></i>Chapter 16 - Dates and times</a><ul>
<li><a href="chapter-16-dates-and-times.html#exercises-47"><strong>16.2.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#what-happens-if-you-parse-a-string-that-contains-invalid-dates"><i class="fa fa-check"></i>1. What happens if you parse a string that contains invalid dates?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#what-does-the-tzone-argument-to-today-do-why-is-it-important"><i class="fa fa-check"></i>2. What does the tzone argument to today() do? Why is it important?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#use-the-appropriate-lubridate-function-to-parse-each-of-the-following-dates"><i class="fa fa-check"></i>3. Use the appropriate lubridate function to parse each of the following dates:</a></li>
</ul></li>
<li><a href="chapter-16-dates-and-times.html#exercises-48"><strong>16.3.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#how-does-the-distribution-of-flight-times-within-a-day-change-over-the-course-of-the-year"><i class="fa fa-check"></i>1. How does the distribution of flight times within a day change over the course of the year?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#compare-dep_time-sched_dep_time-and-dep_delay.-are-they-consistent-explain-your-findings."><i class="fa fa-check"></i>2. Compare dep_time, sched_dep_time and dep_delay. Are they consistent? Explain your findings.</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#compare-air_time-with-the-duration-between-the-departure-and-arrival.-explain-your-findings.-hint-consider-the-location-of-the-airport."><i class="fa fa-check"></i>3. Compare air_time with the duration between the departure and arrival. Explain your findings. (Hint: consider the location of the airport.)</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#how-does-the-average-delay-time-change-over-the-course-of-a-day-should-you-use-dep_time-or-sched_dep_time-why"><i class="fa fa-check"></i>4. How does the average delay time change over the course of a day? Should you use dep_time or sched_dep_time? Why?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#on-what-day-of-the-week-should-you-leave-if-you-want-to-minimise-the-chance-of-a-delay"><i class="fa fa-check"></i>5. On what day of the week should you leave if you want to minimise the chance of a delay?</a></li>
<li><a href="chapter-16-dates-and-times.html#what-makes-the-distribution-of-diamondscarat-and-flightssched_dep_time-similar">6. What makes the distribution of diamonds<span class="math inline">\(carat and flights\)</span>sched_dep_time similar?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#confirm-my-hypothesis-that-the-early-departures-of-flights-in-minutes-20-30-and-50-60-are-caused-by-scheduled-flights-that-leave-early.-hint-create-a-binary-variable-that-tells-you-whether-or-not-a-flight-was-delayed."><i class="fa fa-check"></i>7. Confirm my hypothesis that the early departures of flights in minutes 20-30 and 50-60 are caused by scheduled flights that leave early. Hint: create a binary variable that tells you whether or not a flight was delayed.</a></li>
</ul></li>
<li><a href="chapter-16-dates-and-times.html#exercises-49"><strong>16.4.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#why-is-there-months-but-no-dmonths"><i class="fa fa-check"></i>1. Why is there months() but no dmonths()?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#explain-daysovernight-1-to-someone-who-has-just-started-learning-r.-how-does-it-work"><i class="fa fa-check"></i>2. Explain days(overnight * 1) to someone who has just started learning R. How does it work?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#create-a-vector-of-dates-giving-the-first-day-of-every-month-in-2015.-create-a-vector-of-dates-giving-the-first-day-of-every-month-in-the-current-year."><i class="fa fa-check"></i>3. Create a vector of dates giving the first day of every month in 2015. Create a vector of dates giving the first day of every month in the current year.</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#write-a-function-that-given-your-birthday-as-a-date-returns-how-old-you-are-in-years."><i class="fa fa-check"></i>4. Write a function that given your birthday (as a date), returns how old you are in years.</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#why-cant-today-today-years1-months1-work"><i class="fa fa-check"></i>5. Why can’t (today() %–% (today() + years(1)) / months(1) work?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Programming</b></span></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html"><i class="fa fa-check"></i>Chapter 19 - Functions</a><ul>
<li><a href="chapter-19-functions.html#exercises-50"><strong>19.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#why-is-true-not-a-parameter-to-rescale01-what-would-happen-if-x-contained-a-single-missing-value-and-na.rm-was-false"><i class="fa fa-check"></i>1. Why is TRUE not a parameter to rescale01()? What would happen if x contained a single missing value, and na.rm was FALSE?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#in-the-second-variant-of-rescale01-infinite-values-are-left-unchanged.-rewrite-rescale01-so-that--inf-is-mapped-to-0-and-inf-is-mapped-to-1."><i class="fa fa-check"></i>2. In the second variant of rescale01(), infinite values are left unchanged. Rewrite rescale01() so that -Inf is mapped to 0, and Inf is mapped to 1.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#practice-turning-the-following-code-snippets-into-functions.-think-about-what-each-function-does.-what-would-you-call-it-how-many-arguments-does-it-need-can-you-rewrite-it-to-be-more-expressive-or-less-duplicative"><i class="fa fa-check"></i>3. Practice turning the following code snippets into functions. Think about what each function does. What would you call it? How many arguments does it need? Can you rewrite it to be more expressive or less duplicative?</a></li>
<li><a href="chapter-19-functions.html#follow-httpnicercode.github.iointrowriting-functions.html-to-write-your-own-functions-to-compute-the-variance-and-skew-of-a-numeric-vector.">4. Follow <code>http://nicercode.github.io/intro/writing-functions.html</code> to write your own functions to compute the variance and skew of a numeric vector.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#write-both_na-a-function-that-takes-two-vectors-of-the-same-length-and-returns-the-number-of-positions-that-have-an-na-in-both-vectors."><i class="fa fa-check"></i>5. Write both_na(), a function that takes two vectors of the same length and returns the number of positions that have an NA in both vectors.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#what-do-the-following-functions-do-why-are-they-useful-even-though-they-are-so-short"><i class="fa fa-check"></i>6. What do the following functions do? Why are they useful even though they are so short?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#read-the-complete-lyrics-to-little-bunny-foo-foo.-theres-a-lot-of-duplication-in-this-song.-extend-the-initial-piping-example-to-recreate-the-complete-song-and-use-functions-to-reduce-the-duplication."><i class="fa fa-check"></i>7. Read the complete lyrics to “Little Bunny Foo Foo”. There’s a lot of duplication in this song. Extend the initial piping example to recreate the complete song, and use functions to reduce the duplication.</a></li>
</ul></li>
<li><a href="chapter-19-functions.html#exercises-51"><strong>19.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#read-the-source-code-for-each-of-the-following-three-functions-puzzle-out-what-they-do-and-then-brainstorm-better-names."><i class="fa fa-check"></i>1. Read the source code for each of the following three functions, puzzle out what they do, and then brainstorm better names.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#take-a-function-that-youve-written-recently-and-spend-5-minutes-brainstorming-a-better-name-for-it-and-its-arguments."><i class="fa fa-check"></i>2. Take a function that you’ve written recently and spend 5 minutes brainstorming a better name for it and its arguments.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#compare-and-contrast-rnorm-and-massmvrnorm.-how-could-you-make-them-more-consistent"><i class="fa fa-check"></i>3. Compare and contrast rnorm() and MASS::mvrnorm(). How could you make them more consistent?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#make-a-case-for-why-norm_r-norm_d-etc-would-be-better-than-rnorm-dnorm.-make-a-case-for-the-opposite."><i class="fa fa-check"></i>4. Make a case for why norm_r(), norm_d() etc would be better than rnorm(), dnorm(). Make a case for the opposite.</a></li>
</ul></li>
<li><a href="chapter-19-functions.html#exercises-52"><strong>19.4.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#whats-the-difference-between-if-and-ifelse-carefully-read-the-help-and-construct-three-examples-that-illustrate-the-key-differences."><i class="fa fa-check"></i>1. What’s the difference between if and ifelse()? Carefully read the help and construct three examples that illustrate the key differences.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#write-a-greeting-function-that-says-good-morning-good-afternoon-or-good-evening-depending-on-the-time-of-day.-hint-use-a-time-argument-that-defaults-to-lubridatenow.-that-will-make-it-easier-to-test-your-function."><i class="fa fa-check"></i>2. Write a greeting function that says “good morning”, “good afternoon”, or “good evening”, depending on the time of day. (Hint: use a time argument that defaults to lubridate::now(). That will make it easier to test your function.)</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#implement-a-fizzbuzz-function.-it-takes-a-single-number-as-input.-if-the-number-is-divisible-by-three-it-returns-fizz.-if-its-divisible-by-five-it-returns-buzz.-if-its-divisible-by-three-and-five-it-returns-fizzbuzz.-otherwise-it-returns-the-number.-make-sure-you-first-write-working-code-before-you-create-the-function."><i class="fa fa-check"></i>3. Implement a fizzbuzz function. It takes a single number as input. If the number is divisible by three, it returns “fizz”. If it’s divisible by five it returns “buzz”. If it’s divisible by three and five, it returns “fizzbuzz”. Otherwise, it returns the number. Make sure you first write working code before you create the function.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#how-could-you-use-cut-to-simplify-this-set-of-nested-if-else-statements"><i class="fa fa-check"></i>4. How could you use cut() to simplify this set of nested if-else statements?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#what-happens-if-you-use-switch-with-numeric-values"><i class="fa fa-check"></i>5. What happens if you use switch() with numeric values?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#what-does-this-switch-call-do-what-happens-if-x-is-e"><i class="fa fa-check"></i>6. What does this switch() call do? What happens if x is “e”?</a></li>
</ul></li>
<li><a href="chapter-19-functions.html#exercises-53"><strong>19.5.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#what-does-commasletters-collapse---do-why"><i class="fa fa-check"></i>1. What does commas(letters, collapse = “-”) do? Why?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#itd-be-nice-if-you-could-supply-multiple-characters-to-the-pad-argument-e.g.ruletitle-pad--.-why-doesnt-this-currently-work-how-could-you-fix-it"><i class="fa fa-check"></i>2. It’d be nice if you could supply multiple characters to the pad argument, e.g. rule(“Title”, pad = “-+”). Why doesn’t this currently work? How could you fix it?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#what-does-the-trim-argument-to-mean-do-when-might-you-use-it"><i class="fa fa-check"></i>3. What does the trim argument to mean() do? When might you use it?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#the-default-value-for-the-method-argument-to-cor-is-cpearson-kendall-spearman.-what-does-that-mean-what-value-is-used-by-default"><i class="fa fa-check"></i>4. The default value for the method argument to cor() is c(“pearson”, “kendall”, “spearman”). What does that mean? What value is used by default?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html"><i class="fa fa-check"></i>Chapter 20 - Vectors</a><ul>
<li><a href="chapter-20-vectors.html#exercises-54"><strong>20.3.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#describe-the-difference-between-is.finitex-and-is.infinitex."><i class="fa fa-check"></i>1. Describe the difference between is.finite(x) and !is.infinite(x).</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#read-the-source-code-for-dplyrnear-hint-to-see-the-source-code-drop-the-.-how-does-it-work"><i class="fa fa-check"></i>2. Read the source code for dplyr::near() (Hint: to see the source code, drop the ()). How does it work?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#a-logical-vector-can-take-3-possible-values.-how-many-possible-values-can-an-integer-vector-take-how-many-possible-values-can-a-double-take-use-google-to-do-some-research."><i class="fa fa-check"></i>3. A logical vector can take 3 possible values. How many possible values can an integer vector take? How many possible values can a double take? Use google to do some research.</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#brainstorm-at-least-four-functions-that-allow-you-to-convert-a-double-to-an-integer.-how-do-they-differ-be-precise."><i class="fa fa-check"></i>4. Brainstorm at least four functions that allow you to convert a double to an integer. How do they differ? Be precise.</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#what-functions-from-the-readr-package-allow-you-to-turn-a-string-into-logical-integer-and-double-vector"><i class="fa fa-check"></i>5. What functions from the readr package allow you to turn a string into logical, integer, and double vector?</a></li>
</ul></li>
<li><a href="chapter-20-vectors.html#exercises-55"><strong>20.4.6</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#what-does-meanis.nax-tell-you-about-a-vector-x-what-about-sumis.finitex"><i class="fa fa-check"></i>1. What does mean(is.na(x)) tell you about a vector x? What about sum(!is.finite(x))?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#carefully-read-the-documentation-of-is.vector.-what-does-it-actually-test-for-why-does-is.atomic-not-agree-with-the-definition-of-atomic-vectors-above"><i class="fa fa-check"></i>2. Carefully read the documentation of is.vector(). What does it actually test for? Why does is.atomic() not agree with the definition of atomic vectors above?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#compare-and-contrast-setnames-with-purrrset_names."><i class="fa fa-check"></i>3. Compare and contrast setNames() with purrr::set_names().</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#create-functions-that-take-a-vector-as-input-and-returns"><i class="fa fa-check"></i>4. Create functions that take a vector as input and returns:</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#why-is-x-whichx-0-not-the-same-as-xx-0"><i class="fa fa-check"></i>5. Why is x[-which(x &gt; 0)] not the same as x[x &lt;= 0]?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#what-happens-when-you-subset-with-a-positive-integer-thats-bigger-than-the-length-of-the-vector-what-happens-when-you-subset-with-a-name-that-doesnt-exist"><i class="fa fa-check"></i>6. What happens when you subset with a positive integer that’s bigger than the length of the vector? What happens when you subset with a name that doesn’t exist?</a></li>
</ul></li>
<li><a href="chapter-20-vectors.html#exercises-56"><strong>20.5.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#draw-the-following-lists-as-nested-sets"><i class="fa fa-check"></i>1. Draw the following lists as nested sets:</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#what-happens-if-you-subset-a-tibble-as-if-youre-subsetting-a-list-what-are-the-key-differences-between-a-list-and-a-tibble"><i class="fa fa-check"></i>2. What happens if you subset a tibble as if you’re subsetting a list? What are the key differences between a list and a tibble?</a></li>
</ul></li>
<li><a href="chapter-20-vectors.html#exercises-57"><strong>20.7.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#what-does-hmshms3600-return-how-does-it-print-what-primitive-type-is-the-augmented-vector-built-on-top-of-what-attributes-does-it-use"><i class="fa fa-check"></i>1. What does hms::hms(3600) return? How does it print? What primitive type is the augmented vector built on top of? What attributes does it use?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#try-and-make-a-tibble-that-has-columns-with-different-lengths.-what-happens"><i class="fa fa-check"></i>2. Try and make a tibble that has columns with different lengths. What happens?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#based-on-the-definition-above-is-it-ok-to-have-a-list-as-a-column-of-a-tibble"><i class="fa fa-check"></i>3. Based on the definition above, is it ok to have a list as a column of a tibble?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html"><i class="fa fa-check"></i>Chapter 21 - Iteration</a><ul>
<li><a href="chapter-21-iteration.html#exercises-58"><strong>21.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#write-for-loops-to"><i class="fa fa-check"></i>1. Write for loops to:</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#eliminate-the-for-loop-in-each-of-the-following-examples-by-taking-advantage-of-an-existing-function-that-works-with-vectors"><i class="fa fa-check"></i>2. Eliminate the for loop in each of the following examples by taking advantage of an existing function that works with vectors:</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#combine-your-function-writing-and-for-loop-skills"><i class="fa fa-check"></i>3. Combine your function writing and for loop skills:</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#its-common-to-see-for-loops-that-dont-preallocate-the-output-and-instead-increase-the-length-of-a-vector-at-each-step"><i class="fa fa-check"></i>4. It’s common to see for loops that don’t preallocate the output and instead increase the length of a vector at each step:</a></li>
</ul></li>
<li><a href="chapter-21-iteration.html#exercises-59"><strong>21.3.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#imagine-you-have-a-directory-full-of-csv-files-that-you-want-to-read-in.-you-have-their-paths-in-a-vector-files---dirdata-pattern-.csv-full.names-true-and-now-want-to-read-each-one-with-read_csv.-write-the-for-loop-that-will-load-them-into-a-single-data-frame."><i class="fa fa-check"></i>1. Imagine you have a directory full of CSV files that you want to read in. You have their paths in a vector, files &lt;- dir(“data/”, pattern = “\.csv$”, full.names = TRUE), and now want to read each one with read_csv(). Write the for loop that will load them into a single data frame.</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#what-happens-if-you-use-for-nm-in-namesx-and-x-has-no-names-what-if-only-some-of-the-elements-are-named-what-if-the-names-are-not-unique"><i class="fa fa-check"></i>2. What happens if you use for (nm in names(x)) and x has no names? What if only some of the elements are named? What if the names are not unique?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#write-a-function-that-prints-the-mean-of-each-numeric-column-in-a-data-frame-along-with-its-name.-for-example-show_meaniris-would-print"><i class="fa fa-check"></i>3. Write a function that prints the mean of each numeric column in a data frame, along with its name. For example, show_mean(iris) would print:</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#what-does-this-code-do-how-does-it-work"><i class="fa fa-check"></i>4. What does this code do? How does it work?</a></li>
</ul></li>
<li><a href="chapter-21-iteration.html#exercises-60"><strong>21.4.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#read-the-documentation-for-apply.-in-the-2d-case-what-two-for-loops-does-it-generalise"><i class="fa fa-check"></i>1. Read the documentation for apply(). In the 2d case, what two for loops does it generalise?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#adapt-col_summary-so-that-it-only-applies-to-numeric-columns.-you-might-want-to-start-with-an-is_numeric-function-that-returns-a-logical-vector-that-has-a-true-corresponding-to-each-numeric-column."><i class="fa fa-check"></i>2. Adapt col_summary() so that it only applies to numeric columns. You might want to start with an is_numeric() function that returns a logical vector that has a TRUE corresponding to each numeric column.</a></li>
</ul></li>
<li><a href="chapter-21-iteration.html#exercises-61"><strong>21.5.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#write-code-that-uses-one-of-the-map-functions-to"><i class="fa fa-check"></i>1. Write code that uses one of the map functions to:</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#how-can-you-create-a-single-vector-that-for-each-column-in-a-data-frame-indicates-whether-or-not-its-a-factor"><i class="fa fa-check"></i>2. How can you create a single vector that for each column in a data frame indicates whether or not it’s a factor?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#what-happens-when-you-use-the-map-functions-on-vectors-that-arent-lists-what-does-map15-runif-do-why"><i class="fa fa-check"></i>3. What happens when you use the map functions on vectors that aren’t lists? What does map(1:5, runif) do? Why?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#what-does-map-22-rnorm-n-5-do-why-what-does-map_dbl-22-rnorm-n-5-do-why"><i class="fa fa-check"></i>4. What does map(-2:2, rnorm, n = 5) do? Why? What does map_dbl(-2:2, rnorm, n = 5) do? Why?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#rewrite-mapx-functiondf-lmmpg-wt-data-df-to-eliminate-the-anonymous-function."><i class="fa fa-check"></i>5. Rewrite map(x, function(df) lm(mpg ~ wt, data = df)) to eliminate the anonymous function.</a></li>
</ul></li>
<li><a href="chapter-21-iteration.html#exercises-62"><strong>21.9.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#implement-your-own-version-of-every-using-a-for-loop.-compare-it-with-purrrevery.-what-does-purrrs-version-do-that-your-version-doesnt"><i class="fa fa-check"></i>1. Implement your own version of every() using a for loop. Compare it with purrr::every(). What does purrr’s version do that your version doesn’t?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#create-an-enhanced-col_summary-that-applies-a-summary-function-to-every-numeric-column-in-a-data-frame."><i class="fa fa-check"></i>2. Create an enhanced col_summary() that applies a summary function to every numeric column in a data frame.</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#a-possible-base-r-equivalent-of-col_summary-is"><i class="fa fa-check"></i>3. A possible base R equivalent of col_summary() is:</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Modeling</b></span></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html"><i class="fa fa-check"></i>Chapter 23 - Model basics</a><ul>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#notes---making-simple-models"><i class="fa fa-check"></i>Notes - making simple models</a></li>
<li><a href="chapter-23-model-basics.html#exercises-63"><strong>23.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#one-downside-of-the-linear-model-is-that-it-is-sensitive-to-unusual-values-because-the-distance-incorporates-a-squared-term.-fit-a-linear-model-to-the-simulated-data-below-and-visualise-the-results.-rerun-a-few-times-to-generate-different-simulated-datasets.-what-do-you-notice-about-the-model"><i class="fa fa-check"></i>1. One downside of the linear model is that it is sensitive to unusual values because the distance incorporates a squared term. Fit a linear model to the simulated data below, and visualise the results. Rerun a few times to generate different simulated datasets. What do you notice about the model?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#one-way-to-make-linear-models-more-robust-is-to-use-a-different-distance-measure.-for-example-instead-of-root-mean-squared-distance-you-could-use-mean-absolute-distance"><i class="fa fa-check"></i>2. One way to make linear models more robust is to use a different distance measure. For example, instead of root-mean-squared distance, you could use mean-absolute distance:</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#one-challenge-with-performing-numerical-optimisation-is-that-its-only-guaranteed-to-find-one-local-optimum.-whats-the-problem-with-optimising-a-three-parameter-model-like-this"><i class="fa fa-check"></i>3. One challenge with performing numerical optimisation is that it’s only guaranteed to find one local optimum. What’s the problem with optimising a three parameter model like this?</a></li>
</ul></li>
<li><a href="chapter-23-model-basics.html#exercises-64"><strong>23.3.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#instead-of-using-lm-to-fit-a-straight-line-you-can-use-loess-to-fit-a-smooth-curve.-repeat-the-process-of-model-fitting-grid-generation-predictions-and-visualisation-on-sim1-using-loess-instead-of-lm.-how-does-the-result-compare-to-geom_smooth"><i class="fa fa-check"></i>1. Instead of using lm() to fit a straight line, you can use loess() to fit a smooth curve. Repeat the process of model fitting, grid generation, predictions, and visualisation on sim1 using loess() instead of lm(). How does the result compare to geom_smooth()?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#add_predictions-is-paired-with-gather_predictions-and-spread_predictions.-how-do-these-three-functions-differ"><i class="fa fa-check"></i>2. add_predictions() is paired with gather_predictions() and spread_predictions(). How do these three functions differ?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#what-does-geom_ref_line-do-what-package-does-it-come-from-why-is-displaying-a-reference-line-in-plots-showing-residuals-useful-and-important"><i class="fa fa-check"></i>3. What does geom_ref_line() do? What package does it come from? Why is displaying a reference line in plots showing residuals useful and important?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#why-might-you-want-to-look-at-a-frequency-polygon-of-absolute-residuals-what-are-the-pros-and-cons-compared-to-looking-at-the-raw-residuals"><i class="fa fa-check"></i>4. Why might you want to look at a frequency polygon of absolute residuals? What are the pros and cons compared to looking at the raw residuals?</a></li>
</ul></li>
<li><a href="chapter-23-model-basics.html#exercises-65"><strong>23.4.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#what-happens-if-you-repeat-the-analysis-of-sim2-using-a-model-without-an-intercept.-what-happens-to-the-model-equation-what-happens-to-the-predictions"><i class="fa fa-check"></i>1. What happens if you repeat the analysis of sim2 using a model without an intercept. What happens to the model equation? What happens to the predictions?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#use-model_matrix-to-explore-the-equations-generated-for-the-models-i-fit-to-sim3-and-sim4.-why-is-a-good-shorthand-for-interaction"><i class="fa fa-check"></i>2. Use model_matrix() to explore the equations generated for the models I fit to sim3 and sim4. Why is * a good shorthand for interaction?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#using-the-basic-principles-convert-the-formulas-in-the-following-two-models-into-functions.-hint-start-by-converting-the-categorical-variable-into-0-1-variables."><i class="fa fa-check"></i>3. Using the basic principles, convert the formulas in the following two models into functions. (Hint: start by converting the categorical variable into 0-1 variables.)</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#for-sim4-which-of-mod1-and-mod2-is-better-i-think-mod2-does-a-slightly-better-job-at-removing-patterns-but-its-pretty-subtle.-can-you-come-up-with-a-plot-to-support-my-claim"><i class="fa fa-check"></i>4. For sim4, which of mod1 and mod2 is better? I think mod2 does a slightly better job at removing patterns, but it’s pretty subtle. Can you come up with a plot to support my claim?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html"><i class="fa fa-check"></i>Chapter 24 - Model building</a><ul>
<li><a href="chapter-24-model-building.html#exercises-66"><strong>24.2.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#in-the-plot-of-lcarat-vs.lprice-there-are-some-bright-vertical-strips.-what-do-they-represent"><i class="fa fa-check"></i>1. In the plot of lcarat vs. lprice, there are some bright vertical strips. What do they represent?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#if-logprice-a_0-a_1-logcarat-what-does-that-say-about-the-relationship-between-price-and-carat"><i class="fa fa-check"></i>2. If log(price) = a_0 + a_1 * log(carat), what does that say about the relationship between price and carat?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#extract-the-diamonds-that-have-very-high-and-very-low-residuals.-is-there-anything-unusual-about-these-diamonds-are-they-particularly-bad-or-good-or-do-you-think-these-are-pricing-errors"><i class="fa fa-check"></i>3. Extract the diamonds that have very high and very low residuals. Is there anything unusual about these diamonds? Are they particularly bad or good, or do you think these are pricing errors?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#does-the-final-model-mod_diamond2-do-a-good-job-of-predicting-diamond-prices-would-you-trust-it-to-tell-you-how-much-to-spend-if-you-were-buying-a-diamond"><i class="fa fa-check"></i>4. Does the final model, mod_diamond2, do a good job of predicting diamond prices? Would you trust it to tell you how much to spend if you were buying a diamond?</a></li>
</ul></li>
<li><a href="chapter-24-model-building.html#exercises-67"><strong>24.3.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#use-your-google-sleuthing-skills-to-brainstorm-why-there-were-fewer-than-expected-flights-on-jan-20-may-26-and-sep-1.-hint-they-all-have-the-same-explanation.-how-would-these-days-generalise-to-another-year"><i class="fa fa-check"></i>1. Use your Google sleuthing skills to brainstorm why there were fewer than expected flights on Jan 20, May 26, and Sep 1. (Hint: they all have the same explanation.) How would these days generalise to another year?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#what-do-the-three-days-with-high-positive-residuals-represent-how-would-these-days-generalise-to-another-year"><i class="fa fa-check"></i>2. What do the three days with high positive residuals represent? How would these days generalise to another year?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#create-a-new-variable-that-splits-the-wday-variable-into-terms-but-only-for-saturdays-i.e.it-should-have-thurs-fri-but-sat-summer-sat-spring-sat-fall.-how-does-this-model-compare-with-the-model-with-every-combination-of-wday-and-term"><i class="fa fa-check"></i>3. Create a new variable that splits the wday variable into terms, but only for Saturdays, i.e. it should have Thurs, Fri, but Sat-summer, Sat-spring, Sat-fall. How does this model compare with the model with every combination of wday and term?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#create-a-new-wday-variable-that-combines-the-day-of-week-term-for-saturdays-and-public-holidays.-what-do-the-residuals-of-that-model-look-like"><i class="fa fa-check"></i>4. Create a new wday variable that combines the day of week, term (for Saturdays), and public holidays. What do the residuals of that model look like?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#what-happens-if-you-fit-a-day-of-week-effect-that-varies-by-month-i.e.n-wday-month-why-is-this-not-very-helpful"><i class="fa fa-check"></i>5. What happens if you fit a day of week effect that varies by month (i.e. n ~ wday * month)? Why is this not very helpful?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#what-would-you-expect-the-model-n-wday-nsdate-5-to-look-like-knowing-what-you-know-about-the-data-why-would-you-expect-it-to-be-not-particularly-effective"><i class="fa fa-check"></i>6. What would you expect the model n ~ wday + ns(date, 5) to look like? Knowing what you know about the data, why would you expect it to be not particularly effective?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#we-hypothesised-that-people-leaving-on-sundays-are-more-likely-to-be-business-travellers-who-need-to-be-somewhere-on-monday.-explore-that-hypothesis-by-seeing-how-it-breaks-down-based-on-distance-and-time-if-its-true-youd-expect-to-see-more-sunday-evening-flights-to-places-that-are-far-away."><i class="fa fa-check"></i>7. We hypothesised that people leaving on Sundays are more likely to be business travellers who need to be somewhere on Monday. Explore that hypothesis by seeing how it breaks down based on distance and time: if it’s true, you’d expect to see more Sunday evening flights to places that are far away.</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#its-a-little-frustrating-that-sunday-and-saturday-are-on-separate-ends-of-the-plot.-write-a-small-function-to-set-the-levels-of-the-factor-so-that-the-week-starts-on-monday."><i class="fa fa-check"></i>8. It’s a little frustrating that Sunday and Saturday are on separate ends of the plot. Write a small function to set the levels of the factor so that the week starts on Monday.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html"><i class="fa fa-check"></i>Chapter 25 - Many models</a><ul>
<li><a href="chapter-25-many-models.html#exercises-68"><strong>25.2.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#a-linear-trend-seems-to-be-slightly-too-simple-for-the-overall-trend.-can-you-do-better-with-a-quadratic-polynomial-how-can-you-interpret-the-coefficients-of-the-quadratic-hint-you-might-want-to-transform-year-so-that-it-has-mean-zero."><i class="fa fa-check"></i>1. A linear trend seems to be slightly too simple for the overall trend. Can you do better with a quadratic polynomial? How can you interpret the coefficients of the quadratic? (Hint you might want to transform year so that it has mean zero.)</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#explore-other-methods-for-visualising-the-distribution-of-r2-per-continent.-you-might-want-to-try-the-ggbeeswarm-package-which-provides-similar-methods-for-avoiding-overlaps-as-jitter-but-uses-deterministic-methods."><i class="fa fa-check"></i>2. Explore other methods for visualising the distribution of R2 per continent. You might want to try the ggbeeswarm package, which provides similar methods for avoiding overlaps as jitter, but uses deterministic methods.</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#to-create-the-last-plot-showing-the-data-for-the-countries-with-the-worst-model-fits-we-needed-two-steps-we-created-a-data-frame-with-one-row-per-country-and-then-semi-joined-it-to-the-original-dataset.-its-possible-to-avoid-this-join-if-we-use-unnest-instead-of-unnest.drop-true.-how"><i class="fa fa-check"></i>3. To create the last plot (showing the data for the countries with the worst model fits), we needed two steps: we created a data frame with one row per country and then semi-joined it to the original dataset. It’s possible to avoid this join if we use unnest() instead of unnest(.drop = TRUE). How?</a></li>
</ul></li>
<li><a href="chapter-25-many-models.html#exercises-69"><strong>25.4.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#list-all-the-functions-that-you-can-think-of-that-take-a-atomic-vector-and-return-a-list."><i class="fa fa-check"></i>1. List all the functions that you can think of that take a atomic vector and return a list.</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#brainstorm-useful-summary-functions-that-like-quantile-return-multiple-values."><i class="fa fa-check"></i>2. Brainstorm useful summary functions that, like quantile(), return multiple values.</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#whats-missing-in-the-following-data-frame-how-does-quantile-return-that-missing-piece-why-isnt-that-helpful-here"><i class="fa fa-check"></i>3. What’s missing in the following data frame? How does quantile() return that missing piece? Why isn’t that helpful here?</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#what-does-this-code-do-why-might-might-it-be-useful"><i class="fa fa-check"></i>4. What does this code do? Why might might it be useful?</a></li>
</ul></li>
<li><a href="chapter-25-many-models.html#exercises-70"><strong>25.5.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#why-might-the-lengths-function-be-useful-for-creating-atomic-vector-columns-from-list-columns"><i class="fa fa-check"></i>1. Why might the lengths() function be useful for creating atomic vector columns from list-columns?</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#list-the-most-common-types-of-vector-found-in-a-data-frame.-what-makes-lists-different"><i class="fa fa-check"></i>2. List the most common types of vector found in a data frame. What makes lists different?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Communicate</b></span></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html"><i class="fa fa-check"></i>Chapter 27 - R Markdown</a><ul>
<li><a href="chapter-27-r-markdown.html#exercises-71"><strong>27.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#create-a-new-notebook-using-file-new-file-r-notebook.-read-the-instructions.-practice-running-the-chunks.-verify-that-you-can-modify-the-code-re-run-it-and-see-modified-output."><i class="fa fa-check"></i>1. Create a new notebook using File &gt; New File &gt; R Notebook. Read the instructions. Practice running the chunks. Verify that you can modify the code, re-run it, and see modified output.</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#create-a-new-r-markdown-document-with-file-new-file-r-markdown-knit-it-by-clicking-the-appropriate-button.-knit-it-by-using-the-appropriate-keyboard-short-cut.-verify-that-you-can-modify-the-input-and-see-the-output-update."><i class="fa fa-check"></i>2. Create a new R Markdown document with File &gt; New File &gt; R Markdown… Knit it by clicking the appropriate button. Knit it by using the appropriate keyboard short cut. Verify that you can modify the input and see the output update.</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#compare-and-contrast-the-r-notebook-and-r-markdown-files-you-created-above.-how-are-the-outputs-similar-how-are-they-different-how-are-the-inputs-similar-how-are-they-different-what-happens-if-you-copy-the-yaml-header-from-one-to-the-other"><i class="fa fa-check"></i>3. Compare and contrast the R notebook and R markdown files you created above. How are the outputs similar? How are they different? How are the inputs similar? How are they different? What happens if you copy the YAML header from one to the other?</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#create-one-new-r-markdown-document-for-each-of-the-three-built-in-formats-html-pdf-and-word.-knit-each-of-the-three-documents.-how-does-the-output-differ-how-does-the-input-differ-you-may-need-to-install-latex-in-order-to-build-the-pdf-output-rstudio-will-prompt-you-if-this-is-necessary."><i class="fa fa-check"></i>4. Create one new R Markdown document for each of the three built-in formats: HTML, PDF and Word. Knit each of the three documents. How does the output differ? How does the input differ? (You may need to install LaTeX in order to build the PDF output — RStudio will prompt you if this is necessary.)</a></li>
</ul></li>
<li><a href="chapter-27-r-markdown.html#exercises-72"><strong>27.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#practice-what-youve-learned-by-creating-a-brief-cv.-the-title-should-be-your-name-and-you-should-include-headings-for-at-least-education-or-employment.-each-of-the-sections-should-include-a-bulleted-list-of-jobsdegrees.-highlight-the-year-in-bold."><i class="fa fa-check"></i>1. Practice what you’ve learned by creating a brief CV. The title should be your name, and you should include headings for (at least) education or employment. Each of the sections should include a bulleted list of jobs/degrees. Highlight the year in bold.</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#using-the-r-markdown-quick-reference-figure-out-how-to"><i class="fa fa-check"></i>2. Using the R Markdown quick reference, figure out how to:</a></li>
<li><a href="chapter-27-r-markdown.html#copy-and-paste-the-contents-of-diamond-sizes.rmd-from-httpsgithub.comhadleyr4dstreemasterrmarkdown-in-to-a-local-r-markdown-document.-check-that-you-can-run-it-then-add-text-after-the-frequency-polygon-that-describes-its-most-striking-features.">3. Copy and paste the contents of diamond-sizes.Rmd from <code>https://github.com/hadley/r4ds/tree/master/rmarkdown</code> in to a local R markdown document. Check that you can run it, then add text after the frequency polygon that describes its most striking features.</a></li>
</ul></li>
<li><a href="chapter-27-r-markdown.html#exercises-73"><strong>27.4.7</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#add-a-section-that-explores-how-diamond-sizes-vary-by-cut-colour-and-clarity.-assume-youre-writing-a-report-for-someone-who-doesnt-know-r-and-instead-of-setting-echo-false-on-each-chunk-set-a-global-option."><i class="fa fa-check"></i>1. Add a section that explores how diamond sizes vary by cut, colour, and clarity. Assume you’re writing a report for someone who doesn’t know R, and instead of setting echo = FALSE on each chunk, set a global option.</a></li>
<li><a href="chapter-27-r-markdown.html#download-diamond-sizes.rmd-from-httpsgithub.comhadleyr4dstreemasterrmarkdown.-add-a-section-that-describes-the-largest-20-diamonds-including-a-table-that-displays-their-most-important-attributes.">2. Download diamond-sizes.Rmd from <code>https://github.com/hadley/r4ds/tree/master/rmarkdown</code>. Add a section that describes the largest 20 diamonds, including a table that displays their most important attributes.</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#modify-diamonds-sizes.rmd-to-use-comma-to-produce-nicely-formatted-output.-also-include-the-percentage-of-diamonds-that-are-larger-than-2.5-carats."><i class="fa fa-check"></i>3. Modify diamonds-sizes.Rmd to use comma() to produce nicely formatted output. Also include the percentage of diamonds that are larger than 2.5 carats.</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#set-up-a-network-of-chunks-where-d-depends-on-c-and-b-and-both-b-and-c-depend-on-a.-have-each-chunk-print-lubridatenow-set-cache-true-then-verify-your-understanding-of-caching."><i class="fa fa-check"></i>4. Set up a network of chunks where d depends on c and b, and both b and c depend on a. Have each chunk print lubridate::now(), set cache = TRUE, then verify your understanding of caching.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html"><i class="fa fa-check"></i>Chapter 28 - Graphics for communication</a><ul>
<li><a href="chapter-28-graphics-for-communication.html#exercises-74"><strong>28.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#create-one-plot-on-the-fuel-economy-data-with-customised-title-subtitle-caption-x-y-and-colour-labels."><i class="fa fa-check"></i>1. Create one plot on the fuel economy data with customised title, subtitle, caption, x, y, and colour labels.</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#the-geom_smooth-is-somewhat-misleading-because-the-hwy-for-large-engines-is-skewed-upwards-due-to-the-inclusion-of-lightweight-sports-cars-with-big-engines.-use-your-modelling-tools-to-fit-and-display-a-better-model."><i class="fa fa-check"></i>2. The geom_smooth() is somewhat misleading because the hwy for large engines is skewed upwards due to the inclusion of lightweight sports cars with big engines. Use your modelling tools to fit and display a better model.</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#take-an-exploratory-graphic-that-youve-created-in-the-last-month-and-add-informative-titles-to-make-it-easier-for-others-to-understand."><i class="fa fa-check"></i>3. Take an exploratory graphic that you’ve created in the last month, and add informative titles to make it easier for others to understand.</a></li>
</ul></li>
<li><a href="chapter-28-graphics-for-communication.html#exercises-75"><strong>28.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#use-geom_text-with-infinite-positions-to-place-text-at-the-four-corners-of-the-plot."><i class="fa fa-check"></i>1. Use geom_text() with infinite positions to place text at the four corners of the plot.</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#read-the-documentation-for-annotate.-how-can-you-use-it-to-add-a-text-label-to-a-plot-without-having-to-create-a-tibble"><i class="fa fa-check"></i>2. Read the documentation for annotate(). How can you use it to add a text label to a plot without having to create a tibble?</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#how-do-labels-with-geom_text-interact-with-faceting-how-can-you-add-a-label-to-a-single-facet-how-can-you-put-a-different-label-in-each-facet-hint-think-about-the-underlying-data."><i class="fa fa-check"></i>3. How do labels with geom_text() interact with faceting? How can you add a label to a single facet? How can you put a different label in each facet? (Hint: think about the underlying data.)</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#what-arguments-to-geom_label-control-the-appearance-of-the-background-box"><i class="fa fa-check"></i>4. What arguments to geom_label() control the appearance of the background box?</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#what-are-the-four-arguments-to-arrow-how-do-they-work-create-a-series-of-plots-that-demonstrate-the-most-important-options."><i class="fa fa-check"></i>5. What are the four arguments to arrow()? How do they work? Create a series of plots that demonstrate the most important options.</a></li>
</ul></li>
<li><a href="chapter-28-graphics-for-communication.html#exercises-76"><strong>28.4.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#why-doesnt-the-following-code-override-the-default-scale"><i class="fa fa-check"></i>1. Why doesn’t the following code override the default scale?</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#what-is-the-first-argument-to-every-scale-how-does-it-compare-to-labs"><i class="fa fa-check"></i>2. What is the first argument to every scale? How does it compare to labs()?</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#change-the-display-of-the-presidential-terms-by"><i class="fa fa-check"></i>3. Change the display of the presidential terms by:</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#use-override.aes-to-make-the-legend-on-the-following-plot-easier-to-see."><i class="fa fa-check"></i>4. Use override.aes to make the legend on the following plot easier to see.</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Science Walkthrough</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-13---relational-data" class="section level1 unnumbered">
<h1>Chapter 13 - Relational data</h1>
<p>If you’ve ever worked with SQL before, this chapter should be relatively familiar to you. Here we learn about the different ways to work with relational data in R, using dplyr functions. Quoted from the book, the different types of thins you can perform are:</p>
<ul>
<li>“Mutating joins, which add new variables to one data frame from matching observations in another.”</li>
<li>“Filtering joins, which filter observations from one data frame based on whether or not they match an observation in the other table.”</li>
<li>“Set operations, which treat observations as if they were set elements.”</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;tidyverse&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;nycflights13&quot;</span>)</code></pre></div>
<p>The flights dataset in <code>nycflights13</code> has tibbles that can be used to practice relational data management:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># the complete flights table</span>
flights</code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># info on airlines</span>
airlines</code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    carrier name                       
##    &lt;chr&gt;   &lt;chr&gt;                      
##  1 9E      Endeavor Air Inc.          
##  2 AA      American Airlines Inc.     
##  3 AS      Alaska Airlines Inc.       
##  4 B6      JetBlue Airways            
##  5 DL      Delta Air Lines Inc.       
##  6 EV      ExpressJet Airlines Inc.   
##  7 F9      Frontier Airlines Inc.     
##  8 FL      AirTran Airways Corporation
##  9 HA      Hawaiian Airlines Inc.     
## 10 MQ      Envoy Air                  
## 11 OO      SkyWest Airlines Inc.      
## 12 UA      United Air Lines Inc.      
## 13 US      US Airways Inc.            
## 14 VX      Virgin America             
## 15 WN      Southwest Airlines Co.     
## 16 YV      Mesa Airlines Inc.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># info on airports</span>
airports</code></pre></div>
<pre><code>## # A tibble: 1,458 x 8
##    faa   name                    lat    lon   alt    tz dst   tzone        
##    &lt;chr&gt; &lt;chr&gt;                 &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;        
##  1 04G   Lansdowne Airport      41.1  -80.6  1044    -5 A     America/New_…
##  2 06A   Moton Field Municipa…  32.5  -85.7   264    -6 A     America/Chic…
##  3 06C   Schaumburg Regional    42.0  -88.1   801    -6 A     America/Chic…
##  4 06N   Randall Airport        41.4  -74.4   523    -5 A     America/New_…
##  5 09J   Jekyll Island Airport  31.1  -81.4    11    -5 A     America/New_…
##  6 0A9   Elizabethton Municip…  36.4  -82.2  1593    -5 A     America/New_…
##  7 0G6   Williams County Airp…  41.5  -84.5   730    -5 A     America/New_…
##  8 0G7   Finger Lakes Regiona…  42.9  -76.8   492    -5 A     America/New_…
##  9 0P2   Shoestring Aviation …  39.8  -76.6  1000    -5 U     America/New_…
## 10 0S9   Jefferson County Intl  48.1 -123.    108    -8 A     America/Los_…
## # … with 1,448 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># info on individual planes</span>
planes</code></pre></div>
<pre><code>## # A tibble: 3,322 x 9
##    tailnum  year type       manufacturer  model  engines seats speed engine
##    &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;         &lt;chr&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; 
##  1 N10156   2004 Fixed win… EMBRAER       EMB-1…       2    55    NA Turbo…
##  2 N102UW   1998 Fixed win… AIRBUS INDUS… A320-…       2   182    NA Turbo…
##  3 N103US   1999 Fixed win… AIRBUS INDUS… A320-…       2   182    NA Turbo…
##  4 N104UW   1999 Fixed win… AIRBUS INDUS… A320-…       2   182    NA Turbo…
##  5 N10575   2002 Fixed win… EMBRAER       EMB-1…       2    55    NA Turbo…
##  6 N105UW   1999 Fixed win… AIRBUS INDUS… A320-…       2   182    NA Turbo…
##  7 N107US   1999 Fixed win… AIRBUS INDUS… A320-…       2   182    NA Turbo…
##  8 N108UW   1999 Fixed win… AIRBUS INDUS… A320-…       2   182    NA Turbo…
##  9 N109UW   1999 Fixed win… AIRBUS INDUS… A320-…       2   182    NA Turbo…
## 10 N110UW   1999 Fixed win… AIRBUS INDUS… A320-…       2   182    NA Turbo…
## # … with 3,312 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># weater information</span>
weather</code></pre></div>
<pre><code>## # A tibble: 26,115 x 15
##    origin  year month   day  hour  temp  dewp humid wind_dir wind_speed
##    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
##  1 EWR     2013     1     1     1  39.0  26.1  59.4      270      10.4 
##  2 EWR     2013     1     1     2  39.0  27.0  61.6      250       8.06
##  3 EWR     2013     1     1     3  39.0  28.0  64.4      240      11.5 
##  4 EWR     2013     1     1     4  39.9  28.0  62.2      250      12.7 
##  5 EWR     2013     1     1     5  39.0  28.0  64.4      260      12.7 
##  6 EWR     2013     1     1     6  37.9  28.0  67.2      240      11.5 
##  7 EWR     2013     1     1     7  39.0  28.0  64.4      240      15.0 
##  8 EWR     2013     1     1     8  39.9  28.0  62.2      250      10.4 
##  9 EWR     2013     1     1     9  39.9  28.0  62.2      260      15.0 
## 10 EWR     2013     1     1    10  41    28.0  59.6      260      13.8 
## # … with 26,105 more rows, and 5 more variables: wind_gust &lt;dbl&gt;,
## #   precip &lt;dbl&gt;, pressure &lt;dbl&gt;, visib &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ul>
<li>flights connects to planes via a single variable, tailnum.</li>
<li>flights connects to airlines through the carrier variable.</li>
<li>flights connects to airports in two ways: via the origin and dest variables.</li>
<li>flights connects to weather via origin (the location), and year, month, day and hour (the time).</li>
</ul>
<div id="exercises-27" class="section level2 unnumbered">
<h2><strong>13.2.1</strong> Exercises</h2>
<div id="imagine-you-wanted-to-draw-approximately-the-route-each-plane-flies-from-its-origin-to-its-destination.-what-variables-would-you-need-what-tables-would-you-need-to-combine" class="section level3 unnumbered">
<h3>1. Imagine you wanted to draw (approximately) the route each plane flies from its origin to its destination. What variables would you need? What tables would you need to combine?</h3>
<p>You would need the variables tailnum, which defines individual planes, and the latitude and longitude values of the origin and destination variables. To do this, you can combine the <code>flights</code> table, which connects tailnum to origin and destination, with the <code>airports</code> table, which contains the latitude and longitude of each airport. Here is the join that can be performed:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">left_join</span>(flights, airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;dest&quot;</span> =<span class="st"> &quot;faa&quot;</span>))
flights_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">left_join</span>(flights_<span class="dv">1</span>, airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;origin&quot;</span> =<span class="st"> &quot;faa&quot;</span>))
flights_<span class="dv">2</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 33
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 336,766 more rows, and 26 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, name.x &lt;chr&gt;, lat.x &lt;dbl&gt;,
## #   lon.x &lt;dbl&gt;, alt.x &lt;int&gt;, tz.x &lt;dbl&gt;, dst.x &lt;chr&gt;, tzone.x &lt;chr&gt;,
## #   name.y &lt;chr&gt;, lat.y &lt;dbl&gt;, lon.y &lt;dbl&gt;, alt.y &lt;int&gt;, tz.y &lt;dbl&gt;,
## #   dst.y &lt;chr&gt;, tzone.y &lt;chr&gt;</code></pre>
</div>
<div id="i-forgot-to-draw-the-relationship-between-weather-and-airports.-what-is-the-relationship-and-how-should-it-appear-in-the-diagram" class="section level3 unnumbered">
<h3>2. I forgot to draw the relationship between weather and airports. What is the relationship and how should it appear in the diagram?</h3>
<p>The <code>airports</code> table can be joined to the <code>weather</code> table, in which the primary key is <code>origin</code> in the weather table and the foreign key is the <code>faa</code> column in the airports table. For each observation in weather, information about the airport can be appended as a new column. For example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weather_airports &lt;-<span class="st"> </span><span class="kw">left_join</span>(weather, airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;origin&quot;</span> =<span class="st"> &quot;faa&quot;</span>))
weather_airports</code></pre></div>
<pre><code>## # A tibble: 26,115 x 22
##    origin  year month   day  hour  temp  dewp humid wind_dir wind_speed
##    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
##  1 EWR     2013     1     1     1  39.0  26.1  59.4      270      10.4 
##  2 EWR     2013     1     1     2  39.0  27.0  61.6      250       8.06
##  3 EWR     2013     1     1     3  39.0  28.0  64.4      240      11.5 
##  4 EWR     2013     1     1     4  39.9  28.0  62.2      250      12.7 
##  5 EWR     2013     1     1     5  39.0  28.0  64.4      260      12.7 
##  6 EWR     2013     1     1     6  37.9  28.0  67.2      240      11.5 
##  7 EWR     2013     1     1     7  39.0  28.0  64.4      240      15.0 
##  8 EWR     2013     1     1     8  39.9  28.0  62.2      250      10.4 
##  9 EWR     2013     1     1     9  39.9  28.0  62.2      260      15.0 
## 10 EWR     2013     1     1    10  41    28.0  59.6      260      13.8 
## # … with 26,105 more rows, and 12 more variables: wind_gust &lt;dbl&gt;,
## #   precip &lt;dbl&gt;, pressure &lt;dbl&gt;, visib &lt;dbl&gt;, time_hour &lt;dttm&gt;,
## #   name &lt;chr&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;, alt &lt;int&gt;, tz &lt;dbl&gt;, dst &lt;chr&gt;,
## #   tzone &lt;chr&gt;</code></pre>
</div>
<div id="weather-only-contains-information-for-the-origin-nyc-airports.-if-it-contained-weather-records-for-all-airports-in-the-usa-what-additional-relation-would-it-define-with-flights" class="section level3 unnumbered">
<h3>3. weather only contains information for the origin (NYC) airports. If it contained weather records for all airports in the USA, what additional relation would it define with flights?</h3>
<p>If it contained weather records for all airports, it could be joined with flights using the primary key consisting of the columns year, month, day, hour and origin in <code>weather</code>, which could be connected with the foreign key year, month, day, hour, and either origin or dest in <code>flights</code>.</p>
</div>
<div id="we-know-that-some-days-of-the-year-are-special-and-fewer-people-than-usual-fly-on-them.-how-might-you-represent-that-data-as-a-data-frame-what-would-be-the-primary-keys-of-that-table-how-would-it-connect-to-the-existing-tables" class="section level3 unnumbered">
<h3>4. We know that some days of the year are “special”, and fewer people than usual fly on them. How might you represent that data as a data frame? What would be the primary keys of that table? How would it connect to the existing tables?</h3>
<p>You could have a separate data frame containing the variables month, day, and “special”, in which the “special” days would be designated TRUE. This could be connected to the existing tables using the primary key consisting of month, and day (should probably include the year as well, depending on the holiday). The value for the “special” column would be appended to the corresponding foriegn key values as TRUE or FALSE. For example, below is a table containing some special days of the year (Christmas, New Years), that is joined to the flights table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">special &lt;-<span class="st"> </span><span class="kw">tribble</span> (
  <span class="op">~</span>month, <span class="op">~</span>day, <span class="op">~</span>event,
  <span class="dv">12</span>, <span class="dv">25</span>, <span class="ot">TRUE</span>,
  <span class="dv">1</span>, <span class="dv">1</span>, <span class="ot">TRUE</span>
)
<span class="kw">left_join</span>(flights, special) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span> (year, month, day, flight, event) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span> ( <span class="dt">event =</span> (<span class="op">!</span><span class="kw">is.na</span>(event)))</code></pre></div>
<pre><code>## Joining, by = c(&quot;month&quot;, &quot;day&quot;)</code></pre>
<pre><code>## # A tibble: 336,776 x 5
##     year month   day flight event
##    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt; &lt;lgl&gt;
##  1  2013     1     1   1545 TRUE 
##  2  2013     1     1   1714 TRUE 
##  3  2013     1     1   1141 TRUE 
##  4  2013     1     1    725 TRUE 
##  5  2013     1     1    461 TRUE 
##  6  2013     1     1   1696 TRUE 
##  7  2013     1     1    507 TRUE 
##  8  2013     1     1   5708 TRUE 
##  9  2013     1     1     79 TRUE 
## 10  2013     1     1    301 TRUE 
## # … with 336,766 more rows</code></pre>
</div>
</div>
<div id="notes---keys" class="section level2 unnumbered">
<h2><strong>13.3</strong> Notes - Keys</h2>
<p>A key is a value or combination of values that uniquely identifies an observation. From the book,</p>
<ul>
<li>“A primary key uniquely identifies an observation in its own table. For example, planes$tailnum is a primary key because it uniquely identifies each plane in the planes table.”</li>
<li>“A foreign key uniquely identifies an observation in another table. For example, the flights$tailnum is a foreign key because it appears in the flights table where it matches each flight to a unique plane.”</li>
</ul>
<p>You can verify that a variable can serve as a primary key by verifying that they do uniquely identify each observation. The book uses a combination of count() and filter(). If there are any values with count &gt; 1, the variable is not a primary key.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">planes <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 0 x 2
## # … with 2 variables: tailnum &lt;chr&gt;, n &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weather <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(year, month, day, hour, origin) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 3 x 6
##    year month   day  hour origin     n
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;int&gt;
## 1  2013    11     3     1 EWR        2
## 2  2013    11     3     1 JFK        2
## 3  2013    11     3     1 LGA        2</code></pre>
<p>If there are no variables in the dataset that can serve as primary keys, we can create a primary key with mutate() and row_number(). This is called a surrogate key.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># combination of year, month, day, flight is not adequate as a primary key.</span>
<span class="co"># A surrogate key must be added. See 13.3.1 exercises for an example of adding a surrogate key.</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(year, month, day, flight) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 29,768 x 5
##     year month   day flight     n
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;int&gt;
##  1  2013     1     1      1     2
##  2  2013     1     1      3     2
##  3  2013     1     1      4     2
##  4  2013     1     1     11     3
##  5  2013     1     1     15     2
##  6  2013     1     1     21     2
##  7  2013     1     1     27     4
##  8  2013     1     1     31     2
##  9  2013     1     1     32     2
## 10  2013     1     1     35     2
## # … with 29,758 more rows</code></pre>
<p>How a primary key from one table matches a foreign key in another table is what is called the relation. Depending on how they match, we can perform joins or other set operations, based on the values present in both keys.</p>
</div>
<div id="exercises-28" class="section level2 unnumbered">
<h2><strong>13.3.1</strong> Exercises</h2>
<div id="add-a-surrogate-key-to-flights." class="section level3 unnumbered">
<h3>1. Add a surrogate key to flights.</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># add a surrogate key to flights, display vs flight</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">transmute</span> (flight, <span class="dt">surrogate_key =</span> <span class="kw">row_number</span>() )</code></pre></div>
<pre><code>## # A tibble: 336,776 x 2
##    flight surrogate_key
##     &lt;int&gt;         &lt;int&gt;
##  1   1545             1
##  2   1714             2
##  3   1141             3
##  4    725             4
##  5    461             5
##  6   1696             6
##  7    507             7
##  8   5708             8
##  9     79             9
## 10    301            10
## # … with 336,766 more rows</code></pre>
</div>
<div id="identify-the-keys-in-the-following-datasets" class="section level3 unnumbered">
<h3>2. Identify the keys in the following datasets:</h3>
<p>We can determine the primary keys by looking for unique groupings of variables that match the total number of observations in each table using group_by() and count(), and piping the ouput either to nrow() or filtering for groups that have n&gt;1. If nrow() is equal to the total observations, or if filter(n&gt;1) yields zero observations, then we have found the primary key.</p>
<p>The primary key for Lahman::Batting is the combination of playerID, yearID, and stint. The primary key for babynames::babynames is year, sex, and name. The primary key for nasaweather::atmos is lat, long, year, and month. The primary key for fueleconomy::vehicles is id. For ggplot2::diamonds, there is no primary key. We can generate a surrogate key using mutate() and row_number().</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(Lahman<span class="op">::</span>Batting)</code></pre></div>
<pre><code>##    playerID yearID stint teamID lgID  G  AB  R  H X2B X3B HR RBI SB CS BB
## 1 abercda01   1871     1    TRO   NA  1   4  0  0   0   0  0   0  0  0  0
## 2  addybo01   1871     1    RC1   NA 25 118 30 32   6   0  0  13  8  1  4
## 3 allisar01   1871     1    CL1   NA 29 137 28 40   4   5  0  19  3  1  2
## 4 allisdo01   1871     1    WS3   NA 27 133 28 44  10   2  2  27  1  1  0
## 5 ansonca01   1871     1    RC1   NA 25 120 29 39  11   3  0  16  6  2  2
## 6 armstbo01   1871     1    FW1   NA 12  49  9 11   2   1  0   5  0  1  0
##   SO IBB HBP SH SF GIDP
## 1  0  NA  NA NA NA   NA
## 2  0  NA  NA NA NA   NA
## 3  5  NA  NA NA NA   NA
## 4  2  NA  NA NA NA   NA
## 5  1  NA  NA NA NA   NA
## 6  1  NA  NA NA NA   NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># method 1</span>
<span class="kw">dim</span>(Lahman<span class="op">::</span>Batting)</code></pre></div>
<pre><code>## [1] 102816     22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(Lahman<span class="op">::</span>Batting, playerID, yearID,stint) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">nrow</span>()</code></pre></div>
<pre><code>## [1] 102816</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># method 2</span>
<span class="kw">group_by</span>(Lahman<span class="op">::</span>Batting, playerID, yearID,stint) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">nrow</span>()</code></pre></div>
<pre><code>## [1] 102816</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">babynames<span class="op">::</span>babynames</code></pre></div>
<pre><code>## # A tibble: 1,924,665 x 5
##     year sex   name          n   prop
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;
##  1  1880 F     Mary       7065 0.0724
##  2  1880 F     Anna       2604 0.0267
##  3  1880 F     Emma       2003 0.0205
##  4  1880 F     Elizabeth  1939 0.0199
##  5  1880 F     Minnie     1746 0.0179
##  6  1880 F     Margaret   1578 0.0162
##  7  1880 F     Ida        1472 0.0151
##  8  1880 F     Alice      1414 0.0145
##  9  1880 F     Bertha     1320 0.0135
## 10  1880 F     Sarah      1288 0.0132
## # … with 1,924,655 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(babynames<span class="op">::</span>babynames)</code></pre></div>
<pre><code>## [1] 1924665       5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(babynames<span class="op">::</span>babynames, year, sex,name) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">nrow</span>()</code></pre></div>
<pre><code>## [1] 1924665</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nasaweather<span class="op">::</span>atmos</code></pre></div>
<pre><code>## # A tibble: 41,472 x 11
##      lat  long  year month surftemp  temp pressure ozone cloudlow cloudmid
##    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1  36.2 -114.  1995     1     273.  272.      835   304      7.5     34.5
##  2  33.7 -114.  1995     1     280.  282.      940   304     11.5     32.5
##  3  31.2 -114.  1995     1     285.  285.      960   298     16.5     26  
##  4  28.7 -114.  1995     1     289.  291.      990   276     20.5     14.5
##  5  26.2 -114.  1995     1     292.  293.     1000   274     26       10.5
##  6  23.7 -114.  1995     1     294.  294.     1000   264     30        9.5
##  7  21.2 -114.  1995     1     295   295.     1000   258     29.5     11  
##  8  18.7 -114.  1995     1     298.  297.     1000   252     26.5     17.5
##  9  16.2 -114.  1995     1     300.  298.     1000   250     27.5     18.5
## 10  13.7 -114.  1995     1     300.  299.     1000   250     26       16.5
## # … with 41,462 more rows, and 1 more variable: cloudhigh &lt;dbl&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(nasaweather<span class="op">::</span>atmos)</code></pre></div>
<pre><code>## [1] 41472    11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(nasaweather<span class="op">::</span>atmos, lat, long, year, month) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">nrow</span>()</code></pre></div>
<pre><code>## [1] 41472</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fueleconomy<span class="op">::</span>vehicles</code></pre></div>
<pre><code>## # A tibble: 33,442 x 12
##       id make   model  year class trans drive   cyl displ fuel    hwy   cty
##    &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt;
##  1 27550 AM Ge… DJ P…  1984 Spec… Auto… 2-Wh…     4   2.5 Regu…    17    18
##  2 28426 AM Ge… DJ P…  1984 Spec… Auto… 2-Wh…     4   2.5 Regu…    17    18
##  3 27549 AM Ge… FJ8c…  1984 Spec… Auto… 2-Wh…     6   4.2 Regu…    13    13
##  4 28425 AM Ge… FJ8c…  1984 Spec… Auto… 2-Wh…     6   4.2 Regu…    13    13
##  5  1032 AM Ge… Post…  1985 Spec… Auto… Rear…     4   2.5 Regu…    17    16
##  6  1033 AM Ge… Post…  1985 Spec… Auto… Rear…     6   4.2 Regu…    13    13
##  7  3347 ASC I… GNX    1987 Mids… Auto… Rear…     6   3.8 Prem…    21    14
##  8 13309 Acura  2.2C…  1997 Subc… Auto… Fron…     4   2.2 Regu…    26    20
##  9 13310 Acura  2.2C…  1997 Subc… Manu… Fron…     4   2.2 Regu…    28    22
## 10 13311 Acura  2.2C…  1997 Subc… Auto… Fron…     6   3   Regu…    26    18
## # … with 33,432 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(fueleconomy<span class="op">::</span>vehicles)</code></pre></div>
<pre><code>## [1] 33442    12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(fueleconomy<span class="op">::</span>vehicles, id) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">nrow</span>()</code></pre></div>
<pre><code>## [1] 33442</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ggplot2<span class="op">::</span>diamonds</code></pre></div>
<pre><code>## # A tibble: 53,940 x 10
##    carat cut       color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 0.23  Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
##  2 0.21  Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
##  3 0.23  Good      E     VS1      56.9    65   327  4.05  4.07  2.31
##  4 0.290 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
##  5 0.31  Good      J     SI2      63.3    58   335  4.34  4.35  2.75
##  6 0.24  Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
##  7 0.24  Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
##  8 0.26  Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
##  9 0.22  Fair      E     VS2      65.1    61   337  3.87  3.78  2.49
## 10 0.23  Very Good H     VS1      59.4    61   338  4     4.05  2.39
## # … with 53,930 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">diamonds_withkey &lt;-<span class="st"> </span>ggplot2<span class="op">::</span>diamonds <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span> (<span class="dt">surrogate_key =</span> <span class="kw">row_number</span>())
diamonds_withkey</code></pre></div>
<pre><code>## # A tibble: 53,940 x 11
##    carat cut   color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt; &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 0.23  Ideal E     SI2      61.5    55   326  3.95  3.98  2.43
##  2 0.21  Prem… E     SI1      59.8    61   326  3.89  3.84  2.31
##  3 0.23  Good  E     VS1      56.9    65   327  4.05  4.07  2.31
##  4 0.290 Prem… I     VS2      62.4    58   334  4.2   4.23  2.63
##  5 0.31  Good  J     SI2      63.3    58   335  4.34  4.35  2.75
##  6 0.24  Very… J     VVS2     62.8    57   336  3.94  3.96  2.48
##  7 0.24  Very… I     VVS1     62.3    57   336  3.95  3.98  2.47
##  8 0.26  Very… H     SI1      61.9    55   337  4.07  4.11  2.53
##  9 0.22  Fair  E     VS2      65.1    61   337  3.87  3.78  2.49
## 10 0.23  Very… H     VS1      59.4    61   338  4     4.05  2.39
## # … with 53,930 more rows, and 1 more variable: surrogate_key &lt;int&gt;</code></pre>
</div>
<div id="draw-a-diagram-illustrating-the-connections-between-the-batting-master-and-salaries-tables-in-the-lahman-package.-draw-another-diagram-that-shows-the-relationship-between-master-managers-awardsmanagers.-how-would-you-characterise-the-relationship-between-the-batting-pitching-and-fielding-tables" class="section level3 unnumbered">
<h3>3. Draw a diagram illustrating the connections between the Batting, Master, and Salaries tables in the Lahman package. Draw another diagram that shows the relationship between Master, Managers, AwardsManagers. How would you characterise the relationship between the Batting, Pitching, and Fielding tables?</h3>
<ul>
<li>Batting connects to Master using playerID, and with Salaries through playerID, yearID, teamID, and lgID. Master connects with Salaries through playerID.</li>
<li>Master connects with Managers and with AwardsManagers through playerID. Managers connects with AwardsManagers using playerID, year, and lgID.</li>
<li>Batting, Pitching, and Fielding all connect with each other through playerID, yearID, stint, teamID, and lgID. They are just variables for this key categorized into different tables based on the type of play. You could also just use playerID, yearID, and stint to get a unique key for these tables.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(Lahman)

<span class="kw">as_tibble</span>(Batting)</code></pre></div>
<pre><code>## # A tibble: 102,816 x 22
##    playerID yearID stint teamID lgID      G    AB     R     H   X2B   X3B
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 abercda…   1871     1 TRO    NA        1     4     0     0     0     0
##  2 addybo01   1871     1 RC1    NA       25   118    30    32     6     0
##  3 allisar…   1871     1 CL1    NA       29   137    28    40     4     5
##  4 allisdo…   1871     1 WS3    NA       27   133    28    44    10     2
##  5 ansonca…   1871     1 RC1    NA       25   120    29    39    11     3
##  6 armstbo…   1871     1 FW1    NA       12    49     9    11     2     1
##  7 barkeal…   1871     1 RC1    NA        1     4     0     1     0     0
##  8 barnero…   1871     1 BS1    NA       31   157    66    63    10     9
##  9 barrebi…   1871     1 FW1    NA        1     5     1     1     1     0
## 10 barrofr…   1871     1 BS1    NA       18    86    13    13     2     1
## # … with 102,806 more rows, and 11 more variables: HR &lt;int&gt;, RBI &lt;int&gt;,
## #   SB &lt;int&gt;, CS &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, IBB &lt;int&gt;, HBP &lt;int&gt;,
## #   SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_tibble</span>(Master)</code></pre></div>
<pre><code>## # A tibble: 19,105 x 26
##    playerID birthYear birthMonth birthDay birthCountry birthState birthCity
##    &lt;chr&gt;        &lt;int&gt;      &lt;int&gt;    &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;    
##  1 aardsda…      1981         12       27 USA          CO         Denver   
##  2 aaronha…      1934          2        5 USA          AL         Mobile   
##  3 aaronto…      1939          8        5 USA          AL         Mobile   
##  4 aasedo01      1954          9        8 USA          CA         Orange   
##  5 abadan01      1972          8       25 USA          FL         Palm Bea…
##  6 abadfe01      1985         12       17 D.R.         La Romana  La Romana
##  7 abadijo…      1850         11        4 USA          PA         Philadel…
##  8 abbated…      1877          4       15 USA          PA         Latrobe  
##  9 abbeybe…      1869         11       11 USA          VT         Essex    
## 10 abbeych…      1866         10       14 USA          NE         Falls Ci…
## # … with 19,095 more rows, and 19 more variables: deathYear &lt;int&gt;,
## #   deathMonth &lt;int&gt;, deathDay &lt;int&gt;, deathCountry &lt;chr&gt;,
## #   deathState &lt;chr&gt;, deathCity &lt;chr&gt;, nameFirst &lt;chr&gt;, nameLast &lt;chr&gt;,
## #   nameGiven &lt;chr&gt;, weight &lt;int&gt;, height &lt;int&gt;, bats &lt;fct&gt;, throws &lt;fct&gt;,
## #   debut &lt;chr&gt;, finalGame &lt;chr&gt;, retroID &lt;chr&gt;, bbrefID &lt;chr&gt;,
## #   deathDate &lt;date&gt;, birthDate &lt;date&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_tibble</span>(Salaries)</code></pre></div>
<pre><code>## # A tibble: 26,428 x 5
##    yearID teamID lgID  playerID  salary
##     &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;chr&gt;      &lt;int&gt;
##  1   1985 ATL    NL    barkele01 870000
##  2   1985 ATL    NL    bedrost01 550000
##  3   1985 ATL    NL    benedbr01 545000
##  4   1985 ATL    NL    campri01  633333
##  5   1985 ATL    NL    ceronri01 625000
##  6   1985 ATL    NL    chambch01 800000
##  7   1985 ATL    NL    dedmoje01 150000
##  8   1985 ATL    NL    forstte01 483333
##  9   1985 ATL    NL    garbege01 772000
## 10   1985 ATL    NL    harpete01 250000
## # … with 26,418 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_tibble</span>(Managers)</code></pre></div>
<pre><code>## # A tibble: 3,436 x 10
##    playerID  yearID teamID lgID  inseason     G     W     L  rank plyrMgr
##    &lt;chr&gt;      &lt;int&gt; &lt;fct&gt;  &lt;fct&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;  
##  1 wrighha01   1871 BS1    NA           1    31    20    10     3 Y      
##  2 woodji01    1871 CH1    NA           1    28    19     9     2 Y      
##  3 paborch01   1871 CL1    NA           1    29    10    19     8 Y      
##  4 lennobi01   1871 FW1    NA           1    14     5     9     8 Y      
##  5 deaneha01   1871 FW1    NA           2     5     2     3     8 Y      
##  6 fergubo01   1871 NY2    NA           1    33    16    17     5 Y      
##  7 mcbridi01   1871 PH1    NA           1    28    21     7     1 Y      
##  8 hastisc01   1871 RC1    NA           1    25     4    21     9 Y      
##  9 pikeli01    1871 TRO    NA           1     4     1     3     6 Y      
## 10 cravebi01   1871 TRO    NA           2    25    12    12     6 Y      
## # … with 3,426 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_tibble</span>(AwardsManagers)</code></pre></div>
<pre><code>## # A tibble: 179 x 6
##    playerID  awardID                   yearID lgID  tie   notes
##    &lt;chr&gt;     &lt;chr&gt;                      &lt;int&gt; &lt;fct&gt; &lt;chr&gt; &lt;lgl&gt;
##  1 larusto01 BBWAA Manager of the Year   1983 AL    &lt;NA&gt;  NA   
##  2 lasorto01 BBWAA Manager of the Year   1983 NL    &lt;NA&gt;  NA   
##  3 andersp01 BBWAA Manager of the Year   1984 AL    &lt;NA&gt;  NA   
##  4 freyji99  BBWAA Manager of the Year   1984 NL    &lt;NA&gt;  NA   
##  5 coxbo01   BBWAA Manager of the Year   1985 AL    &lt;NA&gt;  NA   
##  6 herzowh01 BBWAA Manager of the Year   1985 NL    &lt;NA&gt;  NA   
##  7 mcnamjo99 BBWAA Manager of the Year   1986 AL    &lt;NA&gt;  NA   
##  8 lanieha01 BBWAA Manager of the Year   1986 NL    &lt;NA&gt;  NA   
##  9 andersp01 BBWAA Manager of the Year   1987 AL    &lt;NA&gt;  NA   
## 10 rodgebu01 BBWAA Manager of the Year   1987 NL    &lt;NA&gt;  NA   
## # … with 169 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_tibble</span>(Pitching)</code></pre></div>
<pre><code>## # A tibble: 44,963 x 30
##    playerID yearID stint teamID lgID      W     L     G    GS    CG   SHO
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 bechtge…   1871     1 PH1    NA        1     2     3     3     2     0
##  2 brainas…   1871     1 WS3    NA       12    15    30    30    30     0
##  3 fergubo…   1871     1 NY2    NA        0     0     1     0     0     0
##  4 fishech…   1871     1 RC1    NA        4    16    24    24    22     1
##  5 fleetfr…   1871     1 NY2    NA        0     1     1     1     1     0
##  6 flowedi…   1871     1 TRO    NA        0     0     1     0     0     0
##  7 mackde01   1871     1 RC1    NA        0     1     3     1     1     0
##  8 mathebo…   1871     1 FW1    NA        6    11    19    19    19     1
##  9 mcbridi…   1871     1 PH1    NA       18     5    25    25    25     0
## 10 mcmuljo…   1871     1 TRO    NA       12    15    29    29    28     0
## # … with 44,953 more rows, and 19 more variables: SV &lt;int&gt;, IPouts &lt;int&gt;,
## #   H &lt;int&gt;, ER &lt;int&gt;, HR &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, BAOpp &lt;dbl&gt;,
## #   ERA &lt;dbl&gt;, IBB &lt;int&gt;, WP &lt;int&gt;, HBP &lt;int&gt;, BK &lt;int&gt;, BFP &lt;int&gt;,
## #   GF &lt;int&gt;, R &lt;int&gt;, SH &lt;int&gt;, SF &lt;int&gt;, GIDP &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_tibble</span>(Fielding)</code></pre></div>
<pre><code>## # A tibble: 136,815 x 18
##    playerID yearID stint teamID lgID  POS       G    GS InnOuts    PO     A
##    &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 abercda…   1871     1 TRO    NA    SS        1    NA      NA     1     3
##  2 addybo01   1871     1 RC1    NA    2B       22    NA      NA    67    72
##  3 addybo01   1871     1 RC1    NA    SS        3    NA      NA     8    14
##  4 allisar…   1871     1 CL1    NA    2B        2    NA      NA     1     4
##  5 allisar…   1871     1 CL1    NA    OF       29    NA      NA    51     3
##  6 allisdo…   1871     1 WS3    NA    C        27    NA      NA    68    15
##  7 ansonca…   1871     1 RC1    NA    1B        1    NA      NA     7     0
##  8 ansonca…   1871     1 RC1    NA    2B        2    NA      NA     3     4
##  9 ansonca…   1871     1 RC1    NA    3B       20    NA      NA    38    52
## 10 ansonca…   1871     1 RC1    NA    C         5    NA      NA    10     0
## # … with 136,805 more rows, and 7 more variables: E &lt;int&gt;, DP &lt;int&gt;,
## #   PB &lt;int&gt;, WP &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;, ZR &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Batting <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(playerID, yearID, stint) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(n<span class="op">&gt;</span><span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 0 x 4
## # Groups:   playerID, yearID, stint [0]
## # … with 4 variables: playerID &lt;chr&gt;, yearID &lt;int&gt;, stint &lt;int&gt;, n &lt;int&gt;</code></pre>
</div>
</div>
<div id="notes---mutating-joins" class="section level2 unnumbered">
<h2><strong>13.4</strong> Notes - Mutating Joins</h2>
<p>This section on mutating joins introduces the usage of the join functions and provides examples of how they could be used. Below are the provided examples.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># make a truncated dataset to work with</span>
flights2 &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(year<span class="op">:</span>day, hour, origin, dest, tailnum, carrier)
flights2</code></pre></div>
<pre><code>## # A tibble: 336,776 x 8
##     year month   day  hour origin dest  tailnum carrier
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  
##  1  2013     1     1     5 EWR    IAH   N14228  UA     
##  2  2013     1     1     5 LGA    IAH   N24211  UA     
##  3  2013     1     1     5 JFK    MIA   N619AA  AA     
##  4  2013     1     1     5 JFK    BQN   N804JB  B6     
##  5  2013     1     1     6 LGA    ATL   N668DN  DL     
##  6  2013     1     1     5 EWR    ORD   N39463  UA     
##  7  2013     1     1     6 EWR    FLL   N516JB  B6     
##  8  2013     1     1     6 LGA    IAD   N829AS  EV     
##  9  2013     1     1     6 JFK    MCO   N593JB  B6     
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA     
## # … with 336,766 more rows</code></pre>
<p>Comparing how to perform joins using dplyr or baseR:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># left join using left_join() from dplyr</span>
flights2 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>origin, <span class="op">-</span>dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(airlines, <span class="dt">by =</span> <span class="st">&quot;carrier&quot;</span>)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 7
##     year month   day  hour tailnum carrier name                    
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;                   
##  1  2013     1     1     5 N14228  UA      United Air Lines Inc.   
##  2  2013     1     1     5 N24211  UA      United Air Lines Inc.   
##  3  2013     1     1     5 N619AA  AA      American Airlines Inc.  
##  4  2013     1     1     5 N804JB  B6      JetBlue Airways         
##  5  2013     1     1     6 N668DN  DL      Delta Air Lines Inc.    
##  6  2013     1     1     5 N39463  UA      United Air Lines Inc.   
##  7  2013     1     1     6 N516JB  B6      JetBlue Airways         
##  8  2013     1     1     6 N829AS  EV      ExpressJet Airlines Inc.
##  9  2013     1     1     6 N593JB  B6      JetBlue Airways         
## 10  2013     1     1     6 N3ALAA  AA      American Airlines Inc.  
## # … with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># left join using base R commands and mutate()</span>
flights2 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>origin, <span class="op">-</span>dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">name =</span> airlines<span class="op">$</span>name[<span class="kw">match</span>(carrier, airlines<span class="op">$</span>carrier)])</code></pre></div>
<pre><code>## # A tibble: 336,776 x 7
##     year month   day  hour tailnum carrier name                    
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;                   
##  1  2013     1     1     5 N14228  UA      United Air Lines Inc.   
##  2  2013     1     1     5 N24211  UA      United Air Lines Inc.   
##  3  2013     1     1     5 N619AA  AA      American Airlines Inc.  
##  4  2013     1     1     5 N804JB  B6      JetBlue Airways         
##  5  2013     1     1     6 N668DN  DL      Delta Air Lines Inc.    
##  6  2013     1     1     5 N39463  UA      United Air Lines Inc.   
##  7  2013     1     1     6 N516JB  B6      JetBlue Airways         
##  8  2013     1     1     6 N829AS  EV      ExpressJet Airlines Inc.
##  9  2013     1     1     6 N593JB  B6      JetBlue Airways         
## 10  2013     1     1     6 N3ALAA  AA      American Airlines Inc.  
## # … with 336,766 more rows</code></pre>
<p>There are two classes of joins: inner joins, in which only observations with common key values are provided in the joined output, or outer joins, in which all observations from one or more of the tables are kept, in the joined output, and the rest of the missing values are filled in with NA.</p>
<p>From the text, the types of outer joins are defined as:</p>
<ul>
<li>“A left join keeps all observations in x.”</li>
<li>“A right join keeps all observations in y.”</li>
<li>“A full join keeps all observations in x and y.”</li>
</ul>
<p>These joins can be performed using dplyr commands (left_join(), right_join(), full_join(), inner_join(), semi_join(), anti_join()) or using the base R command merge(). The “by” argument is important to modify depending on the type of join you want to perform and the keys you want to use between the two tables. The book provides the examples below on the different ways the “by” argument can be used.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># left join, if &quot;by&quot; argument is unspecified, will perform natural join</span>
flights2 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(weather)</code></pre></div>
<pre><code>## Joining, by = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;, &quot;hour&quot;, &quot;origin&quot;)</code></pre>
<pre><code>## # A tibble: 336,776 x 18
##     year month   day  hour origin dest  tailnum carrier  temp  dewp humid
##    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  2013     1     1     5 EWR    IAH   N14228  UA       39.0  28.0  64.4
##  2  2013     1     1     5 LGA    IAH   N24211  UA       39.9  25.0  54.8
##  3  2013     1     1     5 JFK    MIA   N619AA  AA       39.0  27.0  61.6
##  4  2013     1     1     5 JFK    BQN   N804JB  B6       39.0  27.0  61.6
##  5  2013     1     1     6 LGA    ATL   N668DN  DL       39.9  25.0  54.8
##  6  2013     1     1     5 EWR    ORD   N39463  UA       39.0  28.0  64.4
##  7  2013     1     1     6 EWR    FLL   N516JB  B6       37.9  28.0  67.2
##  8  2013     1     1     6 LGA    IAD   N829AS  EV       39.9  25.0  54.8
##  9  2013     1     1     6 JFK    MCO   N593JB  B6       37.9  27.0  64.3
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA       39.9  25.0  54.8
## # … with 336,766 more rows, and 7 more variables: wind_dir &lt;dbl&gt;,
## #   wind_speed &lt;dbl&gt;, wind_gust &lt;dbl&gt;, precip &lt;dbl&gt;, pressure &lt;dbl&gt;,
## #   visib &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># left join specifying which column to use as key</span>
flights2 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 16
##    year.x month   day  hour origin dest  tailnum carrier year.y type 
##     &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;
##  1   2013     1     1     5 EWR    IAH   N14228  UA        1999 Fixe…
##  2   2013     1     1     5 LGA    IAH   N24211  UA        1998 Fixe…
##  3   2013     1     1     5 JFK    MIA   N619AA  AA        1990 Fixe…
##  4   2013     1     1     5 JFK    BQN   N804JB  B6        2012 Fixe…
##  5   2013     1     1     6 LGA    ATL   N668DN  DL        1991 Fixe…
##  6   2013     1     1     5 EWR    ORD   N39463  UA        2012 Fixe…
##  7   2013     1     1     6 EWR    FLL   N516JB  B6        2000 Fixe…
##  8   2013     1     1     6 LGA    IAD   N829AS  EV        1998 Fixe…
##  9   2013     1     1     6 JFK    MCO   N593JB  B6        2004 Fixe…
## 10   2013     1     1     6 LGA    ORD   N3ALAA  AA          NA &lt;NA&gt; 
## # … with 336,766 more rows, and 6 more variables: manufacturer &lt;chr&gt;,
## #   model &lt;chr&gt;, engines &lt;int&gt;, seats &lt;int&gt;, speed &lt;int&gt;, engine &lt;chr&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># left join specifying column to use as key, if named differently in the two tables</span>
flights2 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(airports, <span class="kw">c</span>(<span class="st">&quot;dest&quot;</span> =<span class="st"> &quot;faa&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 15
##     year month   day  hour origin dest  tailnum carrier name    lat   lon
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  2013     1     1     5 EWR    IAH   N14228  UA      Geor…  30.0 -95.3
##  2  2013     1     1     5 LGA    IAH   N24211  UA      Geor…  30.0 -95.3
##  3  2013     1     1     5 JFK    MIA   N619AA  AA      Miam…  25.8 -80.3
##  4  2013     1     1     5 JFK    BQN   N804JB  B6      &lt;NA&gt;   NA    NA  
##  5  2013     1     1     6 LGA    ATL   N668DN  DL      Hart…  33.6 -84.4
##  6  2013     1     1     5 EWR    ORD   N39463  UA      Chic…  42.0 -87.9
##  7  2013     1     1     6 EWR    FLL   N516JB  B6      Fort…  26.1 -80.2
##  8  2013     1     1     6 LGA    IAD   N829AS  EV      Wash…  38.9 -77.5
##  9  2013     1     1     6 JFK    MCO   N593JB  B6      Orla…  28.4 -81.3
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA      Chic…  42.0 -87.9
## # … with 336,766 more rows, and 4 more variables: alt &lt;int&gt;, tz &lt;dbl&gt;,
## #   dst &lt;chr&gt;, tzone &lt;chr&gt;</code></pre>
</div>
<div id="exercises-29" class="section level2 unnumbered">
<h2><strong>13.4.6</strong> Exercises</h2>
<div id="compute-the-average-delay-by-destination-then-join-on-the-airports-data-frame-so-you-can-show-the-spatial-distribution-of-delays.-heres-an-easy-way-to-draw-a-map-of-the-united-states" class="section level3 unnumbered">
<h3>1. Compute the average delay by destination, then join on the airports data frame so you can show the spatial distribution of delays. Here’s an easy way to draw a map of the United States:</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(nycflights13)
airports <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">semi_join</span>(flights, <span class="kw">c</span>(<span class="st">&quot;faa&quot;</span> =<span class="st"> &quot;dest&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span>
<span class="st">    </span><span class="kw">borders</span>(<span class="st">&quot;state&quot;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">coord_quickmap</span>()</code></pre></div>
<pre><code>## 
## Attaching package: &#39;maps&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     map</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/map_of_US-1.png" width="672" /></p>
<p>(Don’t worry if you don’t understand what semi_join() does — you’ll learn about it next.) You might want to use the size or colour of the points to display the average delay for each airport.</p>
<p>I first grouped by destination and computed the average delay per destination, and then joined the airports data to this metric using left_join(). Then, we can use this table to create a plot displaying the relative average delays at airports across the US by modifying the code provided by the book above.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># caluclate average delay by destination and join airports data</span>
avg_delay_byDest &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span> ( <span class="dt">avg_delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm=</span>T) ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;dest&quot;</span> =<span class="st"> &quot;faa&quot;</span>))
avg_delay_byDest</code></pre></div>
<pre><code>## # A tibble: 105 x 9
##    dest  avg_delay name              lat    lon   alt    tz dst   tzone    
##    &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
##  1 ABQ        4.38 Albuquerque In…  35.0 -107.   5355    -7 A     America/…
##  2 ACK        4.85 Nantucket Mem    41.3  -70.1    48    -5 A     America/…
##  3 ALB       14.4  Albany Intl      42.7  -73.8   285    -5 A     America/…
##  4 ANC       -2.5  Ted Stevens An…  61.2 -150.    152    -9 A     America/…
##  5 ATL       11.3  Hartsfield Jac…  33.6  -84.4  1026    -5 A     America/…
##  6 AUS        6.02 Austin Bergstr…  30.2  -97.7   542    -6 A     America/…
##  7 AVL        8.00 Asheville Regi…  35.4  -82.5  2165    -5 A     America/…
##  8 BDL        7.05 Bradley Intl     41.9  -72.7   173    -5 A     America/…
##  9 BGR        8.03 Bangor Intl      44.8  -68.8   192    -5 A     America/…
## 10 BHM       16.9  Birmingham Intl  33.6  -86.8   644    -6 A     America/…
## # … with 95 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the results on top of the map of the US</span>
avg_delay_byDest <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span>
<span class="st">    </span><span class="kw">borders</span>(<span class="st">&quot;state&quot;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> avg_delay, <span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">5</span>, <span class="dt">color =</span> avg_delay)) <span class="op">+</span>
<span class="st">    </span><span class="kw">coord_quickmap</span>()</code></pre></div>
<pre><code>## Warning: Removed 5 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/avg_delay_map_US-1.png" width="672" /></p>
</div>
<div id="add-the-location-of-the-origin-and-destination-i.e.the-lat-and-lon-to-flights." class="section level3 unnumbered">
<h3>2. Add the location of the origin and destination (i.e. the lat and lon) to flights.</h3>
<p>To do this, I first make a smaller table from airports containing just the variables that we need: faa, lat, and lon. Then, I join this table to flights using origin to add the lat + lon values for origin. I join again using dest this time, to add the lat + lon values for dest. In order to label the lat and lon values according to origin or dest airport, I specify <code>suffix =  c(&quot;.origin&quot;, &quot;.dest&quot;)</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lat_lon_airports &lt;-<span class="st"> </span>airports <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(faa, lat, lon)
with_origin &lt;-<span class="st"> </span><span class="kw">left_join</span>(flights, lat_lon_airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;origin&quot;</span> =<span class="st"> &quot;faa&quot;</span>))
with_origin</code></pre></div>
<pre><code>## # A tibble: 336,776 x 21
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 336,766 more rows, and 14 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">with_origin_and_dest &lt;-<span class="st"> </span><span class="kw">left_join</span>(with_origin, lat_lon_airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;dest&quot;</span> =<span class="st"> &quot;faa&quot;</span>), <span class="dt">suffix =</span> <span class="kw">c</span>(<span class="st">&quot;.origin&quot;</span>, <span class="st">&quot;.dest&quot;</span>))
with_origin_and_dest</code></pre></div>
<pre><code>## # A tibble: 336,776 x 23
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 336,766 more rows, and 16 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, lat.origin &lt;dbl&gt;, lon.origin &lt;dbl&gt;,
## #   lat.dest &lt;dbl&gt;, lon.dest &lt;dbl&gt;</code></pre>
</div>
<div id="is-there-a-relationship-between-the-age-of-a-plane-and-its-delays" class="section level3 unnumbered">
<h3>3. Is there a relationship between the age of a plane and its delays?</h3>
<p>First group by tailnum, then calculate avg delays for arr_delay and dep_delay, then join the info from planes. Then we can visualize any relationships between the year variable (age) of the plane and the delays associated with it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># first group by tailnum, calculate avg delays, then join with planes data</span>
avg_delay_plane &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">avg_delay_dep =</span> <span class="kw">mean</span> (dep_delay, <span class="dt">na.rm =</span> T),
    <span class="dt">avg_delay_arr =</span> <span class="kw">mean</span> (arr_delay, <span class="dt">na.rm =</span> T)
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>)
avg_delay_plane</code></pre></div>
<pre><code>## # A tibble: 4,044 x 11
##    tailnum avg_delay_dep avg_delay_arr  year type  manufacturer model
##    &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;
##  1 D942DN         31.5          31.5      NA &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt; 
##  2 N0EGMQ          8.49          9.98     NA &lt;NA&gt;  &lt;NA&gt;         &lt;NA&gt; 
##  3 N10156         17.8          12.7    2004 Fixe… EMBRAER      EMB-…
##  4 N102UW          8             2.94   1998 Fixe… AIRBUS INDU… A320…
##  5 N103US         -3.20         -6.93   1999 Fixe… AIRBUS INDU… A320…
##  6 N104UW          9.94          1.80   1999 Fixe… AIRBUS INDU… A320…
##  7 N10575         22.7          20.7    2002 Fixe… EMBRAER      EMB-…
##  8 N105UW          2.58         -0.267  1999 Fixe… AIRBUS INDU… A320…
##  9 N107US         -0.463        -5.73   1999 Fixe… AIRBUS INDU… A320…
## 10 N108UW          4.22         -1.25   1999 Fixe… AIRBUS INDU… A320…
## # … with 4,034 more rows, and 4 more variables: engines &lt;int&gt;,
## #   seats &lt;int&gt;, speed &lt;int&gt;, engine &lt;chr&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># vizualize dep_delay vs year of plane</span>
avg_delay_plane <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>( <span class="kw">aes</span> ( year, avg_delay_dep )) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_smooth</span>()</code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 798 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 798 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/age_plane_delay_corr-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># vizualize arr_delay vs year of plane</span>
avg_delay_plane <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>( <span class="kw">aes</span> ( year, avg_delay_arr )) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_smooth</span>()</code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 798 rows containing non-finite values (stat_smooth).

## Warning: Removed 798 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/age_plane_delay_corr-2.png" width="672" /></p>
</div>
<div id="what-weather-conditions-make-it-more-likely-to-see-a-delay" class="section level3 unnumbered">
<h3>4. What weather conditions make it more likely to see a delay?</h3>
<p>Join the weather table with flights, and then we can visualize the relationship with delay and weather conditions. One way to do so is with a correlogram, which shows the correlation between each of the variables in a matrix. After joining weather with flights, we can remove the time variables (year, month, day, hour, etc) and use as.matrix() to turn the tibble into a matrix. Then, we can use the ggcorrplot package to plot a nice looking correllogram. From this plot, we can observe that variable in weather with the highest positive correlation with dep_delay is precip, at roughly 0.05. While this is a very small number (between 0-1), over a large number of observations it is still meaningful. This also makes sense since high precipitation values often make visibility an issue, which may lead to delayed flights.</p>
<p>It might make more sense to group dep_delay by day, and then look at the correlations in the manner I have done so below. I will revisit this in the 13.5.1 exercise 4, in which I find that lower visibility, higher humidity, and lower pressure on average correlate with higher cumulative delays.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages(&quot;ggcorrplot&quot;)</span>
<span class="kw">library</span>(ggcorrplot)
<span class="co"># join weather table with flights, using natural join (no &quot;by&quot; argument specified)</span>
weatherdelays &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(year, month, day, hour, time_hour, origin, dep_delay) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(weather)<span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>year,<span class="op">-</span>month,<span class="op">-</span>day,<span class="op">-</span>hour,<span class="op">-</span>time_hour,<span class="op">-</span>origin)</code></pre></div>
<pre><code>## Joining, by = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;, &quot;hour&quot;, &quot;time_hour&quot;, &quot;origin&quot;)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weatherdelays</code></pre></div>
<pre><code>## # A tibble: 336,776 x 10
##    dep_delay  temp  dewp humid wind_dir wind_speed wind_gust precip
##        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
##  1         2  39.0  28.0  64.4      260       12.7      NA        0
##  2         4  39.9  25.0  54.8      250       15.0      21.9      0
##  3         2  39.0  27.0  61.6      260       15.0      NA        0
##  4        -1  39.0  27.0  61.6      260       15.0      NA        0
##  5        -6  39.9  25.0  54.8      260       16.1      23.0      0
##  6        -4  39.0  28.0  64.4      260       12.7      NA        0
##  7        -5  37.9  28.0  67.2      240       11.5      NA        0
##  8        -3  39.9  25.0  54.8      260       16.1      23.0      0
##  9        -3  37.9  27.0  64.3      260       13.8      NA        0
## 10        -2  39.9  25.0  54.8      260       16.1      23.0      0
## # … with 336,766 more rows, and 2 more variables: pressure &lt;dbl&gt;,
## #   visib &lt;dbl&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rm_na_weatherdelays &lt;-<span class="st"> </span><span class="kw">as.matrix</span> (<span class="kw">na.omit</span>(weatherdelays))
<span class="kw">head</span>(rm_na_weatherdelays)</code></pre></div>
<pre><code>##      dep_delay  temp  dewp humid wind_dir wind_speed wind_gust precip
## [1,]         4 39.92 24.98 54.81      250   14.96014  21.86482      0
## [2,]        -6 39.92 24.98 54.81      260   16.11092  23.01560      0
## [3,]        -3 39.92 24.98 54.81      260   16.11092  23.01560      0
## [4,]        -2 39.92 24.98 54.81      260   16.11092  23.01560      0
## [5,]        -1 39.92 24.98 54.81      260   16.11092  23.01560      0
## [6,]         0 39.92 24.98 54.81      260   16.11092  23.01560      0
##      pressure visib
## [1,]   1011.4    10
## [2,]   1011.7    10
## [3,]   1011.7    10
## [4,]   1011.7    10
## [5,]   1011.7    10
## [6,]   1011.7    10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">corr_weather &lt;-<span class="st"> </span><span class="kw">cor</span>(rm_na_weatherdelays)

<span class="kw">ggcorrplot</span>(corr_weather, <span class="dt">hc.order =</span> <span class="ot">TRUE</span>,
           <span class="dt">type =</span> <span class="st">&quot;lower&quot;</span>,
           <span class="dt">lab =</span> <span class="ot">TRUE</span>,
           <span class="dt">lab_size =</span> <span class="dv">3</span>,
           <span class="dt">method=</span><span class="st">&quot;circle&quot;</span>,
           <span class="dt">colors =</span> <span class="kw">c</span>(<span class="st">&quot;steelblue&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;orangered3&quot;</span>),
           <span class="dt">title=</span><span class="st">&quot;Correlogram&quot;</span>,
           <span class="dt">ggtheme=</span>theme_bw)</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/weather_delay_corr-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weatherdelays <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>( <span class="kw">aes</span> (<span class="dt">x =</span> precip, <span class="dt">y =</span> dep_delay))<span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>()<span class="op">+</span>
<span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> F)</code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 9783 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 9783 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/weather_delay_corr-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weatherdelays <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>( <span class="kw">aes</span> (<span class="dt">x =</span> humid, <span class="dt">y =</span> dep_delay))<span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>()<span class="op">+</span>
<span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> F)</code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 9800 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 9800 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/weather_delay_corr-3.png" width="672" /></p>
</div>
<div id="what-happened-on-june-13-2013-display-the-spatial-pattern-of-delays-and-then-use-google-to-cross-reference-with-the-weather." class="section level3 unnumbered">
<h3>5. What happened on June 13 2013? Display the spatial pattern of delays, and then use Google to cross-reference with the weather.</h3>
<p>First filter flights for observations from June 13, 2013 using filter(). We can see that there were only flights comming out of EWR, JFK, and LGA on this day! Furthermore, all the flights were considerably delayed (high dep_delay value). I initially found this by overlaying the average dep_delay for the filtered data table onto the map of the US, and was surprised that there were so few origin airports on the map. Looking at the opposite, grouping by destination and looking at arr_delay values, we can see that there are many, many more airports in the destination variable. Most flights flew out of only a few airports (EWR, JFK, and LGA) but arrived at many different destinations, and these arrivals were delayed as well.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span> (year <span class="op">==</span><span class="st"> </span><span class="dv">2013</span>, month <span class="op">==</span><span class="st"> </span><span class="dv">6</span>, day <span class="op">==</span><span class="st"> </span><span class="dv">13</span>) <span class="op">%&gt;%</span>
<span class="st">   </span><span class="kw">group_by</span>(origin) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span> ( <span class="dt">avg_delay =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm=</span>T) )</code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   origin avg_delay
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 EWR         45.6
## 2 JFK         43.7
## 3 LGA         48.4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">avg_delay_byorigin &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span> (year <span class="op">==</span><span class="st"> </span><span class="dv">2013</span>, month <span class="op">==</span><span class="st"> </span><span class="dv">6</span>, day <span class="op">==</span><span class="st"> </span><span class="dv">13</span>) <span class="op">%&gt;%</span>
<span class="st">   </span><span class="kw">group_by</span>(origin) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span> ( <span class="dt">avg_delay =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm=</span>T) ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;origin&quot;</span> =<span class="st"> &quot;faa&quot;</span>))
avg_delay_byorigin</code></pre></div>
<pre><code>## # A tibble: 3 x 9
##   origin avg_delay name             lat   lon   alt    tz dst   tzone      
##   &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;      
## 1 EWR         45.6 Newark Libert…  40.7 -74.2    18    -5 A     America/Ne…
## 2 JFK         43.7 John F Kenned…  40.6 -73.8    13    -5 A     America/Ne…
## 3 LGA         48.4 La Guardia      40.8 -73.9    22    -5 A     America/Ne…</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the results on top of the map of the US</span>
avg_delay_byorigin <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span>
<span class="st">    </span><span class="kw">borders</span>(<span class="st">&quot;state&quot;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> avg_delay, <span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">5</span>, <span class="dt">color =</span> avg_delay)) <span class="op">+</span>
<span class="st">    </span><span class="kw">coord_quickmap</span>()</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/june_13_2013_map-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">avg_delay_byDest &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span> (year <span class="op">==</span><span class="st"> </span><span class="dv">2013</span>, month <span class="op">==</span><span class="st"> </span><span class="dv">6</span>, day <span class="op">==</span><span class="st"> </span><span class="dv">13</span>) <span class="op">%&gt;%</span>
<span class="st">   </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span> ( <span class="dt">avg_delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm=</span>T) ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;dest&quot;</span> =<span class="st"> &quot;faa&quot;</span>))
avg_delay_byDest</code></pre></div>
<pre><code>## # A tibble: 89 x 9
##    dest  avg_delay name               lat    lon   alt    tz dst   tzone   
##    &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
##  1 ABQ        64   Albuquerque Int…  35.0 -107.   5355    -7 A     America…
##  2 ACK         8   Nantucket Mem     41.3  -70.1    48    -5 A     America…
##  3 ALB       -19   Albany Intl       42.7  -73.8   285    -5 A     America…
##  4 ATL       109.  Hartsfield Jack…  33.6  -84.4  1026    -5 A     America…
##  5 AUS        64.3 Austin Bergstro…  30.2  -97.7   542    -6 A     America…
##  6 AVL        90   Asheville Regio…  35.4  -82.5  2165    -5 A     America…
##  7 BDL        18.5 Bradley Intl      41.9  -72.7   173    -5 A     America…
##  8 BGR       102   Bangor Intl       44.8  -68.8   192    -5 A     America…
##  9 BHM       158   Birmingham Intl   33.6  -86.8   644    -6 A     America…
## 10 BNA        95.9 Nashville Intl    36.1  -86.7   599    -6 A     America…
## # … with 79 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the results on top of the map of the US</span>
avg_delay_byDest <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span>
<span class="st">    </span><span class="kw">borders</span>(<span class="st">&quot;state&quot;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> avg_delay, <span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">5</span>, <span class="dt">color =</span> avg_delay)) <span class="op">+</span>
<span class="st">    </span><span class="kw">coord_quickmap</span>()</code></pre></div>
<pre><code>## Warning: Removed 7 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/june_13_2013_map-2.png" width="672" /></p>
</div>
</div>
<div id="notes---filtering-joins" class="section level2 unnumbered">
<h2><strong>13.5</strong> Notes - Filtering Joins</h2>
<p>There are two types of filtering joins that can be performed, listed by the book:</p>
<ul>
<li>“semi_join(x, y) keeps all observations in x that have a match in y.”</li>
<li>“anti_join(x, y) drops all observations in x that have a match in y.”</li>
</ul>
<p>The semi_join() function is useful when you want to filter a table for observations that match a certain criteria set by a second table. The provided example in the book is finding top destinations, then looking for the observations in the orginal data table that corresponded to the top destinations. You could use filter() but this might become difficult when analzying multiple variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find top destinations</span>
top_dest &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(dest, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>)
top_dest</code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    dest      n
##    &lt;chr&gt; &lt;int&gt;
##  1 ORD   17283
##  2 ATL   17215
##  3 LAX   16174
##  4 BOS   15508
##  5 MCO   14082
##  6 CLT   14064
##  7 SFO   13331
##  8 FLL   12055
##  9 MIA   11728
## 10 DCA    9705</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use filter() to find observations in flights that have matched key in top destinations table</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(dest <span class="op">%in%</span><span class="st"> </span>top_dest<span class="op">$</span>dest)</code></pre></div>
<pre><code>## # A tibble: 141,145 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      542            540         2      923
##  2  2013     1     1      554            600        -6      812
##  3  2013     1     1      554            558        -4      740
##  4  2013     1     1      555            600        -5      913
##  5  2013     1     1      557            600        -3      838
##  6  2013     1     1      558            600        -2      753
##  7  2013     1     1      558            600        -2      924
##  8  2013     1     1      558            600        -2      923
##  9  2013     1     1      559            559         0      702
## 10  2013     1     1      600            600         0      851
## # … with 141,135 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use semi_join() to find obseravtions in flights that have matched key in top destinations table</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">semi_join</span>(top_dest)</code></pre></div>
<pre><code>## Joining, by = &quot;dest&quot;</code></pre>
<pre><code>## # A tibble: 141,145 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      542            540         2      923
##  2  2013     1     1      554            600        -6      812
##  3  2013     1     1      554            558        -4      740
##  4  2013     1     1      555            600        -5      913
##  5  2013     1     1      557            600        -3      838
##  6  2013     1     1      558            600        -2      753
##  7  2013     1     1      558            600        -2      924
##  8  2013     1     1      558            600        -2      923
##  9  2013     1     1      559            559         0      702
## 10  2013     1     1      600            600         0      851
## # … with 141,135 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>The opposite of the semi_join() function is the anti_join() function, which will return mismatches between the two tables (which values in x do not have a matched key in y?). The book uses anti_join() to find which flights do not have a match in the planes data table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># anti join to find which observations in flights do not have a match in the planes table</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">anti_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(tailnum, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## # A tibble: 722 x 2
##    tailnum     n
##    &lt;chr&gt;   &lt;int&gt;
##  1 &lt;NA&gt;     2512
##  2 N725MQ    575
##  3 N722MQ    513
##  4 N723MQ    507
##  5 N713MQ    483
##  6 N735MQ    396
##  7 N0EGMQ    371
##  8 N534MQ    364
##  9 N542MQ    363
## 10 N531MQ    349
## # … with 712 more rows</code></pre>
</div>
<div id="exercises-30" class="section level2 unnumbered">
<h2><strong>13.5.1</strong> Exercises</h2>
<div id="what-does-it-mean-for-a-flight-to-have-a-missing-tailnum-what-do-the-tail-numbers-that-dont-have-a-matching-record-in-planes-have-in-common-hint-one-variable-explains-90-of-the-problems." class="section level3 unnumbered">
<h3>1. What does it mean for a flight to have a missing tailnum? What do the tail numbers that don’t have a matching record in planes have in common? (Hint: one variable explains ~90% of the problems.)</h3>
<p>The flights that have a missing tailnum can be found by filtering the <code>flights</code> table using filter(is.na(tailnum)). We can observe that these entries also have missing values for dep_time, suggesting that these flights were cancelled. If we remove all flights that have a missing dep_time, we observe that the flights with missing tailnum are also removed as well.</p>
<p>To find the tail numbers that don’t have a matching record in planes, we can use the anti_join() function. Then, we can examine the columns of the resulting table to see if any particular variables are enriched. We observe that some carriers are particularly enriched in the flights that have tailnums that are not recorded in the <code>planes</code> table, including MQ and AA.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find flights that have a missing tailnum</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(tailnum))</code></pre></div>
<pre><code>## # A tibble: 2,512 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     2       NA           1545        NA       NA
##  2  2013     1     2       NA           1601        NA       NA
##  3  2013     1     3       NA            857        NA       NA
##  4  2013     1     3       NA            645        NA       NA
##  5  2013     1     4       NA            845        NA       NA
##  6  2013     1     4       NA           1830        NA       NA
##  7  2013     1     5       NA            840        NA       NA
##  8  2013     1     7       NA            820        NA       NA
##  9  2013     1     8       NA           1645        NA       NA
## 10  2013     1     9       NA            755        NA       NA
## # … with 2,502 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># remove flights with missing dep_time and look at whether missing tailnums still exist</span>
not_cancelled &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(dep_time))
not_cancelled <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">filter</span>(<span class="kw">is.na</span>(tailnum))</code></pre></div>
<pre><code>## # A tibble: 0 x 19
## # … with 19 variables: year &lt;int&gt;, month &lt;int&gt;, day &lt;int&gt;, dep_time &lt;int&gt;,
## #   sched_dep_time &lt;int&gt;, dep_delay &lt;dbl&gt;, arr_time &lt;int&gt;,
## #   sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;,
## #   distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># anti join to find which observations in flights do not have a match in the planes table</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">anti_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(tailnum, <span class="dt">sort =</span> T)</code></pre></div>
<pre><code>## # A tibble: 722 x 2
##    tailnum     n
##    &lt;chr&gt;   &lt;int&gt;
##  1 &lt;NA&gt;     2512
##  2 N725MQ    575
##  3 N722MQ    513
##  4 N723MQ    507
##  5 N713MQ    483
##  6 N735MQ    396
##  7 N0EGMQ    371
##  8 N534MQ    364
##  9 N542MQ    363
## 10 N531MQ    349
## # … with 712 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># observe that some carriers are enriched</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">anti_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(carrier, <span class="dt">sort =</span> T) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span> (<span class="kw">aes</span> (<span class="dt">x =</span> carrier, <span class="dt">y =</span> n))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>( <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="kw">aes</span>(<span class="dt">fill =</span> carrier))</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/missing_tailnum_planes-1.png" width="672" /></p>
</div>
<div id="filter-flights-to-only-show-flights-with-planes-that-have-flown-at-least-100-flights." class="section level3 unnumbered">
<h3>2. Filter flights to only show flights with planes that have flown at least 100 flights.</h3>
<p>We can do this by using the semi_join() function. First, we have to identify which tailnums (planes) have flown at least 100 flights, using count() and filter(). We can store this output in a separate table which I call <code>flights_100</code>, then use semi_join() to keep only the observations in flights that also have an entry in <code>flights_100</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># make a separate table containing tailnums that have over 100 flights</span>
flights_<span class="dv">100</span> &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(n<span class="op">&gt;</span><span class="dv">100</span>)

<span class="co"># use semi join to keep only tailnums in flights that exist in our flights_100 table</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">semi_join</span> (flights_<span class="dv">100</span>)</code></pre></div>
<pre><code>## Joining, by = &quot;tailnum&quot;</code></pre>
<pre><code>## # A tibble: 229,202 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      544            545        -1     1004
##  4  2013     1     1      554            558        -4      740
##  5  2013     1     1      555            600        -5      913
##  6  2013     1     1      557            600        -3      709
##  7  2013     1     1      557            600        -3      838
##  8  2013     1     1      558            600        -2      849
##  9  2013     1     1      558            600        -2      853
## 10  2013     1     1      558            600        -2      923
## # … with 229,192 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="combine-fueleconomyvehicles-and-fueleconomycommon-to-find-only-the-records-for-the-most-common-models." class="section level3 unnumbered">
<h3>3. Combine fueleconomy::vehicles and fueleconomy::common to find only the records for the most common models.</h3>
<p>We can use the semi_join() function to combine vehicles and common, which will keep only the records in vehicles that also have a match in the common table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(fueleconomy)
<span class="kw">semi_join</span>(vehicles,common)</code></pre></div>
<pre><code>## Joining, by = c(&quot;make&quot;, &quot;model&quot;)</code></pre>
<pre><code>## # A tibble: 14,531 x 12
##       id make  model   year class trans drive   cyl displ fuel    hwy   cty
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt;
##  1  1833 Acura Integ…  1986 Subc… Auto… Fron…     4   1.6 Regu…    28    22
##  2  1834 Acura Integ…  1986 Subc… Manu… Fron…     4   1.6 Regu…    28    23
##  3  3037 Acura Integ…  1987 Subc… Auto… Fron…     4   1.6 Regu…    28    22
##  4  3038 Acura Integ…  1987 Subc… Manu… Fron…     4   1.6 Regu…    28    23
##  5  4183 Acura Integ…  1988 Subc… Auto… Fron…     4   1.6 Regu…    27    22
##  6  4184 Acura Integ…  1988 Subc… Manu… Fron…     4   1.6 Regu…    28    23
##  7  5303 Acura Integ…  1989 Subc… Auto… Fron…     4   1.6 Regu…    27    22
##  8  5304 Acura Integ…  1989 Subc… Manu… Fron…     4   1.6 Regu…    28    23
##  9  6442 Acura Integ…  1990 Subc… Auto… Fron…     4   1.8 Regu…    24    20
## 10  6443 Acura Integ…  1990 Subc… Manu… Fron…     4   1.8 Regu…    26    21
## # … with 14,521 more rows</code></pre>
</div>
<div id="find-the-48-hours-over-the-course-of-the-whole-year-that-have-the-worst-delays.-cross-reference-it-with-the-weather-data.-can-you-see-any-patterns" class="section level3 unnumbered">
<h3>4. Find the 48 hours (over the course of the whole year) that have the worst delays. Cross-reference it with the weather data. Can you see any patterns?</h3>
<p>To find the 48 hours that have the worst delays, we can use group_by() and summarize() to find the total delay per day, then combine the total delay per day with lag() to get the total delay per 48 hours. There will be a missing value for the first day of the year, since the method that I use will sum the total delay for the current day with the previous day. Sorting this table will identify the days with the worst dep_delay over 48 hours, which turns out to be March 7-8th, 2013, with a total delay of 84713 min. We can left_join() the weather conditions to this table, and then analyze the weather patterns for this day in particular. We can see that on average, higher 48hr delays are associated with higher humidity values, higher temp/dewpoint, lower pressure, and lower visibility, based on both the correlogram and scatterplots.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># identify the 48 hrs with highest combined dep_delay, then join weather conditions</span>
most_delayed_<span class="dv">48</span> &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span> ( <span class="dt">delay_per_day =</span> <span class="kw">sum</span>( dep_delay, <span class="dt">na.rm=</span>T))<span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span> ( <span class="dt">delay_48hr =</span> delay_per_day <span class="op">+</span><span class="st"> </span><span class="kw">lag</span>(delay_per_day)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(delay_48hr)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(weather, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>))
most_delayed_<span class="dv">48</span></code></pre></div>
<pre><code>## # A tibble: 26,116 x 17
## # Groups:   year, month [?]
##     year month   day delay_per_day delay_48hr origin  hour  temp  dewp
##    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;         &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  2013     3     8         66746      84713 EWR        0  33.8  32  
##  2  2013     3     8         66746      84713 EWR        1  33.1  32  
##  3  2013     3     8         66746      84713 EWR        2  33.1  30.9
##  4  2013     3     8         66746      84713 EWR        3  33.1  30.9
##  5  2013     3     8         66746      84713 EWR        4  33.8  30.9
##  6  2013     3     8         66746      84713 EWR        5  32    30.9
##  7  2013     3     8         66746      84713 EWR        6  32    30.0
##  8  2013     3     8         66746      84713 EWR        7  32    30.0
##  9  2013     3     8         66746      84713 EWR        8  32    30.2
## 10  2013     3     8         66746      84713 EWR        9  32    30.2
## # … with 26,106 more rows, and 8 more variables: humid &lt;dbl&gt;,
## #   wind_dir &lt;dbl&gt;, wind_speed &lt;dbl&gt;, wind_gust &lt;dbl&gt;, precip &lt;dbl&gt;,
## #   pressure &lt;dbl&gt;, visib &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># visualize correlations of variables with delay_48hr</span>
most_delayed_<span class="dv">48</span> <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>( <span class="kw">aes</span> (<span class="dt">x =</span> delay_48hr, <span class="dt">y =</span> humid))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span> (<span class="dt">size =</span> precip))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> F)</code></pre></div>
<pre><code>## Warning: Removed 857 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 857 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/worst_48hr_delays-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">most_delayed_<span class="dv">48</span> <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>( <span class="kw">aes</span> (<span class="dt">x =</span> delay_48hr, <span class="dt">y =</span> visib))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> F)</code></pre></div>
<pre><code>## Warning: Removed 856 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 856 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/worst_48hr_delays-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">most_delayed_<span class="dv">48</span> <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>( <span class="kw">aes</span> (<span class="dt">x =</span> delay_48hr, <span class="dt">y =</span> pressure))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> F)</code></pre></div>
<pre><code>## Warning: Removed 3477 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 3477 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/worst_48hr_delays-3.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot a correlogram to observe how delay_48hr is associated with other weather variables</span>
<span class="kw">library</span>(ggcorrplot)
weatherdelays &lt;-<span class="st"> </span>most_delayed_<span class="dv">48</span> <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>day,<span class="op">-</span>hour,<span class="op">-</span>delay_per_day,<span class="op">-</span>origin, <span class="op">-</span>time_hour)
rm_na_weatherdelays &lt;-<span class="st"> </span><span class="kw">as.matrix</span> (<span class="kw">na.omit</span>(weatherdelays)[,<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)])
corr_weather &lt;-<span class="st"> </span><span class="kw">cor</span>(rm_na_weatherdelays)

<span class="kw">ggcorrplot</span>(corr_weather, <span class="dt">hc.order =</span> <span class="ot">TRUE</span>,
           <span class="dt">type =</span> <span class="st">&quot;lower&quot;</span>,
           <span class="dt">lab =</span> <span class="ot">TRUE</span>,
           <span class="dt">lab_size =</span> <span class="dv">3</span>,
           <span class="dt">method=</span><span class="st">&quot;circle&quot;</span>,
           <span class="dt">colors =</span> <span class="kw">c</span>(<span class="st">&quot;steelblue&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;orangered3&quot;</span>),
           <span class="dt">title=</span><span class="st">&quot;Correlogram&quot;</span>,
           <span class="dt">ggtheme=</span>theme_bw)</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/worst_48hr_delays-4.png" width="672" /></p>
</div>
<div id="what-does-anti_joinflights-airports-by-cdest-faa-tell-you-what-does-anti_joinairports-flights-by-cfaa-dest-tell-you" class="section level3 unnumbered">
<h3>5. What does anti_join(flights, airports, by = c(“dest” = “faa”)) tell you? What does anti_join(airports, flights, by = c(“faa” = “dest”)) tell you?</h3>
<p><code>anti_join(flights, airports, by = c(&quot;dest&quot; = &quot;faa&quot;))</code> tells you which observations in flights do not have a destination that is listed in the ‘faa’ variable of the <code>airports</code> table.</p>
<p><code>anti_join(airports, flights, by = c(&quot;faa&quot; = &quot;dest&quot;))</code> tells you which observations in airports do not have a ‘faa’ value that is present in the ‘dest’ variable of the <code>flights</code> table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">anti_join</span>(flights, airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;dest&quot;</span> =<span class="st"> &quot;faa&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 7,602 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      544            545        -1     1004
##  2  2013     1     1      615            615         0     1039
##  3  2013     1     1      628            630        -2     1137
##  4  2013     1     1      701            700         1     1123
##  5  2013     1     1      711            715        -4     1151
##  6  2013     1     1      820            820         0     1254
##  7  2013     1     1      820            820         0     1249
##  8  2013     1     1      840            845        -5     1311
##  9  2013     1     1      909            810        59     1331
## 10  2013     1     1      913            918        -5     1346
## # … with 7,592 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">anti_join</span>(airports, flights, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;faa&quot;</span> =<span class="st"> &quot;dest&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 1,357 x 8
##    faa   name                    lat    lon   alt    tz dst   tzone        
##    &lt;chr&gt; &lt;chr&gt;                 &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;        
##  1 04G   Lansdowne Airport      41.1  -80.6  1044    -5 A     America/New_…
##  2 06A   Moton Field Municipa…  32.5  -85.7   264    -6 A     America/Chic…
##  3 06C   Schaumburg Regional    42.0  -88.1   801    -6 A     America/Chic…
##  4 06N   Randall Airport        41.4  -74.4   523    -5 A     America/New_…
##  5 09J   Jekyll Island Airport  31.1  -81.4    11    -5 A     America/New_…
##  6 0A9   Elizabethton Municip…  36.4  -82.2  1593    -5 A     America/New_…
##  7 0G6   Williams County Airp…  41.5  -84.5   730    -5 A     America/New_…
##  8 0G7   Finger Lakes Regiona…  42.9  -76.8   492    -5 A     America/New_…
##  9 0P2   Shoestring Aviation …  39.8  -76.6  1000    -5 U     America/New_…
## 10 0S9   Jefferson County Intl  48.1 -123.    108    -8 A     America/Los_…
## # … with 1,347 more rows</code></pre>
</div>
<div id="you-might-expect-that-theres-an-implicit-relationship-between-plane-and-airline-because-each-plane-is-flown-by-a-single-airline.-confirm-or-reject-this-hypothesis-using-the-tools-youve-learned-above." class="section level3 unnumbered">
<h3>6. You might expect that there’s an implicit relationship between plane and airline, because each plane is flown by a single airline. Confirm or reject this hypothesis using the tools you’ve learned above.</h3>
<p>To explore whether each plane exclusively flies with a single airline, we can group the flights table by tailnum, then by carrier. Counting this grouped table will yield the number of flights each plane made with its carrier or carriers. We can group this table again by tailnum, then count how many carriers it flew with. If the hypothesis is true, then we would expect that there would be no entries with more than one carrier per plane. However, when we filter this table for planes with carriers &gt; 1, we observe that 17 planes have flown with 2 carriers. Out of the roughly 4000 planes, this is only a very small fraction. This evidence supports our hypothesis that, in general, there is an association between plane and airline. Most of the time, planes only fly with a single carrier. However, a small amount of planes have flown with multiple airlines. This may have occured if an airline sold their planes to another airline.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find the number of carriers that each plane has flown with</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span> (tailnum, carrier) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum)<span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(nn)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(nn<span class="op">&gt;</span><span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 18 x 2
## # Groups:   tailnum [18]
##    tailnum    nn
##    &lt;chr&gt;   &lt;int&gt;
##  1 &lt;NA&gt;        7
##  2 N146PQ      2
##  3 N153PQ      2
##  4 N176PQ      2
##  5 N181PQ      2
##  6 N197PQ      2
##  7 N200PQ      2
##  8 N228PQ      2
##  9 N232PQ      2
## 10 N933AT      2
## 11 N935AT      2
## 12 N977AT      2
## 13 N978AT      2
## 14 N979AT      2
## 15 N981AT      2
## 16 N989AT      2
## 17 N990AT      2
## 18 N994AT      2</code></pre>
</div>
</div>
<div id="notes---join-problems-and-set-operations" class="section level2 unnumbered">
<h2><strong>13.6 &amp; 13.7</strong> Notes - Join problems and set operations</h2>
<p>The book recommends the following process for setting up your data to perform join operations.</p>
<ol style="list-style-type: decimal">
<li>First, identify the variables that form the primary key in each table, usually thinking about the types of variables that would make sense to be keys (id, or a date/time, etc.).</li>
<li>See if there are any missing values in the variable(s) for your primary key. Since values cannot be joined to missing values, this might result in issues.</li>
<li>Make sure that all the values of the keys match between the tables you are joining. If a value for a key in one of the tables was missing due to a data entry error or other reason, the value will be lost in the subsequent join. Values that are not consistent between keys can be assessed using anti_join().</li>
</ol>
<p>The last segment of the chapter focuses on set operations. Below are the functions listed by the book for performing set operations. They treat the observations (rows) of two tables that have the same variables as sets.</p>
<ul>
<li>intersect(x, y): return only observations in both x and y.</li>
<li>union(x, y): return unique observations in x and y.</li>
<li>setdiff(x, y): return observations in x, but not in y.</li>
</ul>
<p>Here are the examples provided by the book for the set operations described above:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>x, <span class="op">~</span>y,
   <span class="dv">1</span>,  <span class="dv">1</span>,
   <span class="dv">2</span>,  <span class="dv">1</span>
)
df2 &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>x, <span class="op">~</span>y,
   <span class="dv">1</span>,  <span class="dv">1</span>,
   <span class="dv">1</span>,  <span class="dv">2</span>
)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">intersect</span>(df1, df2)</code></pre></div>
<pre><code>## # A tibble: 1 x 2
##       x     y
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     1     1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">union</span>(df1, df2)</code></pre></div>
<pre><code>## # A tibble: 3 x 2
##       x     y
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2
## 2     2     1
## 3     1     1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setdiff</span>(df1, df2)</code></pre></div>
<pre><code>## # A tibble: 1 x 2
##       x     y
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     2     1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setdiff</span>(df2, df1)</code></pre></div>
<pre><code>## # A tibble: 1 x 2
##       x     y
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-12-tidy-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-14-strings.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"download": false
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
