<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 - Data transformation | R for Data Science Walkthrough</title>
  <meta name="description" content="This is a walkthrough of the book R for Data Science (r4ds) with notes and solutions for the exercises." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 - Data transformation | R for Data Science Walkthrough" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a walkthrough of the book R for Data Science (r4ds) with notes and solutions for the exercises." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 - Data transformation | R for Data Science Walkthrough" />
  
  <meta name="twitter:description" content="This is a walkthrough of the book R for Data Science (r4ds) with notes and solutions for the exercises." />
  

<meta name="author" content="Erick Lu" />


<meta name="date" content="2020-01-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-4-workflow-basics.html"/>
<link rel="next" href="chapter-6-workflow-scripts.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Data Science Walkthrough</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-me"><i class="fa fa-check"></i>About me</a></li>
</ul></li>
<li class="part"><span><b>I Data Exploration</b></span></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html"><i class="fa fa-check"></i>Chapter 3 - Data visualization</a><ul>
<li><a href="chapter-3-data-visualization.html#notes---creating-a-ggplot"><strong>3.2</strong> Notes - Creating a ggplot</a></li>
<li><a href="chapter-3-data-visualization.html#exercises"><strong>3.2.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#run-ggplotdata-mpg.-what-do-you-see"><i class="fa fa-check"></i>1. Run ggplot(data = mpg). What do you see?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#how-many-rows-are-in-mpg-how-many-columns"><i class="fa fa-check"></i>2. How many rows are in mpg? How many columns?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-the-drv-variable-describe-read-the-help-for-mpg-to-find-out."><i class="fa fa-check"></i>3. What does the drv variable describe? Read the help for ?mpg to find out.</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#make-a-scatterplot-of-hwy-vs-cyl."><i class="fa fa-check"></i>4. Make a scatterplot of hwy vs cyl.</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-happens-if-you-make-a-scatterplot-of-class-vs-drv-why-is-the-plot-not-useful"><i class="fa fa-check"></i>5. What happens if you make a scatterplot of class vs drv? Why is the plot not useful?</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---aesthetic-mappings"><strong>3.3</strong> Notes - Aesthetic Mappings</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-1"><strong>3.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#whats-gone-wrong-with-this-code-why-are-the-points-not-blue"><i class="fa fa-check"></i>1. What’s gone wrong with this code? Why are the points not blue?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#which-variables-in-mpg-are-categorical-which-variables-are-continuous-hint-type-mpg-to-read-the-documentation-for-the-dataset.-how-can-you-see-this-information-when-you-run-mpg"><i class="fa fa-check"></i>2. Which variables in mpg are categorical? Which variables are continuous? (Hint: type ?mpg to read the documentation for the dataset). How can you see this information when you run mpg?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#map-a-continuous-variable-to-color-size-and-shape.-how-do-these-aesthetics-behave-differently-for-categorical-vs.continuous-variables"><i class="fa fa-check"></i>3. Map a continuous variable to color, size, and shape. How do these aesthetics behave differently for categorical vs. continuous variables?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-happens-if-you-map-the-same-variable-to-multiple-aesthetics"><i class="fa fa-check"></i>4. What happens if you map the same variable to multiple aesthetics?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-the-stroke-aesthetic-do-what-shapes-does-it-work-with-hint-use-geom_point"><i class="fa fa-check"></i>5. What does the stroke aesthetic do? What shapes does it work with? (Hint: use ?geom_point)</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-happens-if-you-map-an-aesthetic-to-something-other-than-a-variable-name-like-aescolour-displ-5"><i class="fa fa-check"></i>6. What happens if you map an aesthetic to something other than a variable name, like aes(colour = displ &lt; 5)?</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---facets"><strong>3.5</strong> Notes - Facets</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-2"><strong>3.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-happens-if-you-facet-on-a-continuous-variable"><i class="fa fa-check"></i>1. What happens if you facet on a continuous variable?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-do-the-empty-cells-in-plot-with-facet_griddrv-cyl-mean-how-do-they-relate-to-this-plot"><i class="fa fa-check"></i>2. What do the empty cells in plot with facet_grid(drv ~ cyl) mean? How do they relate to this plot?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-plots-does-the-following-code-make-what-does-.-do"><i class="fa fa-check"></i>3. What plots does the following code make? What does . do?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#take-the-first-faceted-plot-in-this-section"><i class="fa fa-check"></i>4. Take the first faceted plot in this section:</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#read-facet_wrap.-what-does-nrow-do-what-does-ncol-do-what-other-options-control-the-layout-of-the-individual-panels-why-doesnt-facet_grid-have-nrow-and-ncol-argument"><i class="fa fa-check"></i>5. Read ?facet_wrap. What does nrow do? What does ncol do? What other options control the layout of the individual panels? Why doesn’t facet_grid() have nrow and ncol argument?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#when-using-facet_grid-you-should-usually-put-the-variable-with-more-unique-levels-in-the-columns.-why"><i class="fa fa-check"></i>6. When using facet_grid() you should usually put the variable with more unique levels in the columns. Why?</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---geometric-objects"><strong>3.6</strong> Notes - Geometric objects</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-3"><strong>3.6.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-geom-would-you-use-to-draw-a-line-chart-a-boxplot-a-histogram-an-area-chart"><i class="fa fa-check"></i>1. What geom would you use to draw a line chart? A boxplot? A histogram? An area chart?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#run-this-code-in-your-head-and-predict-what-the-output-will-look-like.-then-run-the-code-in-r-and-check-your-predictions."><i class="fa fa-check"></i>2. Run this code in your head and predict what the output will look like. Then, run the code in R and check your predictions.</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-show.legend-false-do-what-happens-if-you-remove-it-why-do-you-think-i-used-it-earlier-in-the-chapter"><i class="fa fa-check"></i>3. What does show.legend = FALSE do? What happens if you remove it? Why do you think I used it earlier in the chapter?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-the-se-argument-to-geom_smooth-do"><i class="fa fa-check"></i>4. What does the se argument to geom_smooth() do?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#will-these-two-graphs-look-different-whywhy-not"><i class="fa fa-check"></i>5. Will these two graphs look different? Why/why not?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#recreate-the-r-code-necessary-to-generate-the-following-graphs."><i class="fa fa-check"></i>6. Recreate the R code necessary to generate the following graphs.</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---statistical-transformations"><strong>3.7</strong> Notes - Statistical Transformations</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-4"><strong>3.7.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-is-the-default-geom-associated-with-stat_summary-how-could-you-rewrite-the-previous-plot-to-use-that-geom-function-instead-of-the-stat-function"><i class="fa fa-check"></i>1. What is the default geom associated with stat_summary()? How could you rewrite the previous plot to use that geom function instead of the stat function?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-geom_col-do-how-is-it-different-to-geom_bar"><i class="fa fa-check"></i>2. What does geom_col() do? How is it different to geom_bar()?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#most-geoms-and-stats-come-in-pairs-that-are-almost-always-used-in-concert.-read-through-the-documentation-and-make-a-list-of-all-the-pairs.-what-do-they-have-in-common"><i class="fa fa-check"></i>3. Most geoms and stats come in pairs that are almost always used in concert. Read through the documentation and make a list of all the pairs. What do they have in common?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-variables-does-stat_smooth-compute-what-parameters-control-its-behaviour"><i class="fa fa-check"></i>4. What variables does stat_smooth() compute? What parameters control its behaviour?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#in-our-proportion-bar-chart-we-need-to-set-group-1.-why-in-other-words-what-is-the-problem-with-these-two-graphs"><i class="fa fa-check"></i>5. In our proportion bar chart, we need to set group = 1. Why? In other words what is the problem with these two graphs?</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---position-adjustments"><strong>3.8</strong> Notes - Position Adjustments</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-5"><strong>3.8.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-is-the-problem-with-this-plot-how-could-you-improve-it"><i class="fa fa-check"></i>1. What is the problem with this plot? How could you improve it?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-parameters-to-geom_jitter-control-the-amount-of-jittering"><i class="fa fa-check"></i>2. What parameters to geom_jitter() control the amount of jittering?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#compare-and-contrast-geom_jitter-with-geom_count."><i class="fa fa-check"></i>3. Compare and contrast geom_jitter() with geom_count().</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#whats-the-default-position-adjustment-for-geom_boxplot-create-a-visualisation-of-the-mpg-dataset-that-demonstrates-it."><i class="fa fa-check"></i>4. What’s the default position adjustment for geom_boxplot()? Create a visualisation of the mpg dataset that demonstrates it.</a></li>
</ul></li>
<li><a href="chapter-3-data-visualization.html#notes---coordinate-systems"><strong>3.9</strong> Notes - Coordinate Systems</a></li>
<li><a href="chapter-3-data-visualization.html#exercises-6"><strong>3.9.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#turn-a-stacked-bar-chart-into-a-pie-chart-using-coord_polar."><i class="fa fa-check"></i>1. Turn a stacked bar chart into a pie chart using coord_polar().</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-labs-do-read-the-documentation."><i class="fa fa-check"></i>2. What does labs() do? Read the documentation.</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#whats-the-difference-between-coord_quickmap-and-coord_map"><i class="fa fa-check"></i>3. What’s the difference between coord_quickmap() and coord_map()?</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualization.html"><a href="chapter-3-data-visualization.html#what-does-the-plot-below-tell-you-about-the-relationship-between-city-and-highway-mpg-why-is-coord_fixed-important-what-does-geom_abline-do"><i class="fa fa-check"></i>4. What does the plot below tell you about the relationship between city and highway mpg? Why is coord_fixed() important? What does geom_abline() do?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-4-workflow-basics.html"><a href="chapter-4-workflow-basics.html"><i class="fa fa-check"></i>Chapter 4 - Workflow: basics</a><ul>
<li><a href="chapter-4-workflow-basics.html#practice"><strong>4.4</strong> Practice</a><ul>
<li class="chapter" data-level="" data-path="chapter-4-workflow-basics.html"><a href="chapter-4-workflow-basics.html#why-does-this-code-not-work"><i class="fa fa-check"></i>1. Why does this code not work?</a></li>
<li class="chapter" data-level="" data-path="chapter-4-workflow-basics.html"><a href="chapter-4-workflow-basics.html#tweak-each-of-the-following-r-commands-so-that-they-run-correctly"><i class="fa fa-check"></i>2. Tweak each of the following R commands so that they run correctly:</a></li>
<li class="chapter" data-level="" data-path="chapter-4-workflow-basics.html"><a href="chapter-4-workflow-basics.html#press-alt-shift-k.-what-happens-how-can-you-get-to-the-same-place-using-the-menus"><i class="fa fa-check"></i>3. Press Alt + Shift + K. What happens? How can you get to the same place using the menus?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html"><i class="fa fa-check"></i>Chapter 5 - Data transformation</a><ul>
<li><a href="chapter-5-data-transformation.html#notes---filter-rows-with-filter"><strong>5.2</strong> Notes - Filter rows with filter()</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#comparisons"><i class="fa fa-check"></i>5.2.1 Comparisons</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#logical-operators"><i class="fa fa-check"></i>5.2.2 Logical Operators</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#missing-values"><i class="fa fa-check"></i>5.2.3 Missing values</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#exercises-7"><strong>5.2.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#find-all-flights-that"><i class="fa fa-check"></i>1. Find all flights that</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#how-many-flights-have-a-missing-dep_time-what-other-variables-are-missing-what-might-these-rows-represent"><i class="fa fa-check"></i>2. How many flights have a missing dep_time? What other variables are missing? What might these rows represent?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#why-is-na-0-not-missing-why-is-na-true-not-missing-why-is-false-na-not-missing-can-you-figure-out-the-general-rule-na-0-is-a-tricky-counterexample"><i class="fa fa-check"></i>3. Why is NA ^ 0 not missing? Why is NA | TRUE not missing? Why is FALSE &amp; NA not missing? Can you figure out the general rule? (NA * 0 is a tricky counterexample!)</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#notes---arrange-rows-with-arrange"><strong>5.3</strong> Notes - Arrange rows with arrange()</a></li>
<li><a href="chapter-5-data-transformation.html#exercises-8"><strong>5.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#how-could-you-use-arrange-to-sort-all-missing-values-to-the-start-hint-use-is.na."><i class="fa fa-check"></i>1. How could you use arrange() to sort all missing values to the start? (Hint: use is.na()).</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#sort-flights-to-find-the-most-delayed-flights.-find-the-flights-that-left-earliest."><i class="fa fa-check"></i>2. Sort flights to find the most delayed flights. Find the flights that left earliest.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#sort-flights-to-find-the-fastest-flights."><i class="fa fa-check"></i>3. Sort flights to find the fastest flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#which-flights-travelled-the-longest-which-travelled-the-shortest"><i class="fa fa-check"></i>4. Which flights travelled the longest? Which travelled the shortest?</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#notes---select-columns-with-select"><strong>5.4</strong> Notes - Select columns with select()</a></li>
<li><a href="chapter-5-data-transformation.html#exercises-9"><strong>5.4.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#brainstorm-as-many-ways-as-possible-to-select-dep_time-dep_delay-arr_time-and-arr_delay-from-flights."><i class="fa fa-check"></i>1. Brainstorm as many ways as possible to select dep_time, dep_delay, arr_time, and arr_delay from flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-happens-if-you-include-the-name-of-a-variable-multiple-times-in-a-select-call"><i class="fa fa-check"></i>2. What happens if you include the name of a variable multiple times in a select() call?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-does-the-one_of-function-do-why-might-it-be-helpful-in-conjunction-with-this-vector"><i class="fa fa-check"></i>3. What does the one_of() function do? Why might it be helpful in conjunction with this vector?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#does-the-result-of-running-the-following-code-surprise-you-how-do-the-select-helpers-deal-with-case-by-default-how-can-you-change-that-default"><i class="fa fa-check"></i>4. Does the result of running the following code surprise you? How do the select helpers deal with case by default? How can you change that default?</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#notes---add-new-variables-with-mutate"><strong>5.5</strong> Notes - Add new variables with mutate()</a></li>
<li><a href="chapter-5-data-transformation.html#exercises-10"><strong>5.5.2</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#currently-dep_time-and-sched_dep_time-are-convenient-to-look-at-but-hard-to-compute-with-because-theyre-not-really-continuous-numbers.-convert-them-to-a-more-convenient-representation-of-number-of-minutes-since-midnight."><i class="fa fa-check"></i>1. Currently dep_time and sched_dep_time are convenient to look at, but hard to compute with because they’re not really continuous numbers. Convert them to a more convenient representation of number of minutes since midnight.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#compare-air_time-with-arr_time---dep_time.-what-do-you-expect-to-see-what-do-you-see-what-do-you-need-to-do-to-fix-it"><i class="fa fa-check"></i>2. Compare air_time with arr_time - dep_time. What do you expect to see? What do you see? What do you need to do to fix it?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#compare-dep_time-sched_dep_time-and-dep_delay.-how-would-you-expect-those-three-numbers-to-be-related"><i class="fa fa-check"></i>3. Compare dep_time, sched_dep_time, and dep_delay. How would you expect those three numbers to be related?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#find-the-10-most-delayed-flights-using-a-ranking-function.-how-do-you-want-to-handle-ties-carefully-read-the-documentation-for-min_rank."><i class="fa fa-check"></i>4. Find the 10 most delayed flights using a ranking function. How do you want to handle ties? Carefully read the documentation for min_rank().</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-does-13-110-return-why"><i class="fa fa-check"></i>5. What does 1:3 + 1:10 return? Why?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-trigonometric-functions-does-r-provide"><i class="fa fa-check"></i>6. What trigonometric functions does R provide?</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#notes---grouped-summaries-with-summarise"><strong>5.6</strong> Notes - Grouped summaries with summarise()</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#combining-multiple-operations-with-the-pipe"><i class="fa fa-check"></i>5.6.1 Combining multiple operations with the pipe</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#missing-values-1"><i class="fa fa-check"></i>5.6.2 Missing values</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#counts"><i class="fa fa-check"></i>5.6.3 Counts</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#useful-summary-functions"><i class="fa fa-check"></i>5.6.4 Useful summary functions</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#grouping-by-multiple-variables"><i class="fa fa-check"></i>5.6.5 Grouping by multiple variables</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#exercises-11"><strong>5.6.7</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#brainstorm-at-least-5-different-ways-to-assess-the-typical-delay-characteristics-of-a-group-of-flights.-consider-the-following-scenarios"><i class="fa fa-check"></i>1. Brainstorm at least 5 different ways to assess the typical delay characteristics of a group of flights. Consider the following scenarios:</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#come-up-with-another-approach-that-will-give-you-the-same-output-as-not_cancelled-countdest-and-not_cancelled-counttailnum-wt-distance-without-using-count."><i class="fa fa-check"></i>2. Come up with another approach that will give you the same output as not_cancelled %&gt;% count(dest) and not_cancelled %&gt;% count(tailnum, wt = distance) (without using count()).</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#our-definition-of-cancelled-flights-is.nadep_delay-is.naarr_delay-is-slightly-suboptimal.-why-which-is-the-most-important-column"><i class="fa fa-check"></i>3. Our definition of cancelled flights (is.na(dep_delay) | is.na(arr_delay) ) is slightly suboptimal. Why? Which is the most important column?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#look-at-the-number-of-cancelled-flights-per-day.-is-there-a-pattern-is-the-proportion-of-cancelled-flights-related-to-the-average-delay"><i class="fa fa-check"></i>4. Look at the number of cancelled flights per day. Is there a pattern? Is the proportion of cancelled flights related to the average delay?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#which-carrier-has-the-worst-delays-challenge-can-you-disentangle-the-effects-of-bad-airports-vs.bad-carriers-whywhy-not-hint-think-about-flights-group_bycarrier-dest-summarisen"><i class="fa fa-check"></i>5. Which carrier has the worst delays? Challenge: can you disentangle the effects of bad airports vs. bad carriers? Why/why not? (Hint: think about flights %&gt;% group_by(carrier, dest) %&gt;% summarise(n()))</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-does-the-sort-argument-to-count-do.-when-might-you-use-it"><i class="fa fa-check"></i>6. What does the sort argument to count() do. When might you use it?</a></li>
</ul></li>
<li><a href="chapter-5-data-transformation.html#notes---grouped-mutates-and-filters"><strong>5.7</strong> Notes - Grouped mutates (and filters)</a></li>
<li><a href="chapter-5-data-transformation.html#exercises-12"><strong>5.7.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#refer-back-to-the-lists-of-useful-mutate-and-filtering-functions.-describe-how-each-operation-changes-when-you-combine-it-with-grouping."><i class="fa fa-check"></i>1. Refer back to the lists of useful mutate and filtering functions. Describe how each operation changes when you combine it with grouping.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#which-plane-tailnum-has-the-worst-on-time-record"><i class="fa fa-check"></i>2. Which plane (tailnum) has the worst on-time record?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#what-time-of-day-should-you-fly-if-you-want-to-avoid-delays-as-much-as-possible"><i class="fa fa-check"></i>3. What time of day should you fly if you want to avoid delays as much as possible?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#for-each-destination-compute-the-total-minutes-of-delay.-for-each-flight-compute-the-proportion-of-the-total-delay-for-its-destination."><i class="fa fa-check"></i>4. For each destination, compute the total minutes of delay. For each, flight, compute the proportion of the total delay for its destination.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#delays-are-typically-temporally-correlated-even-once-the-problem-that-caused-the-initial-delay-has-been-resolved-later-flights-are-delayed-to-allow-earlier-flights-to-leave.-using-lag-explore-how-the-delay-of-a-flight-is-related-to-the-delay-of-the-immediately-preceding-flight."><i class="fa fa-check"></i>5. Delays are typically temporally correlated: even once the problem that caused the initial delay has been resolved, later flights are delayed to allow earlier flights to leave. Using lag() explore how the delay of a flight is related to the delay of the immediately preceding flight.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#look-at-each-destination.-can-you-find-flights-that-are-suspiciously-fast-i.e.flights-that-represent-a-potential-data-entry-error.-compute-the-air-time-a-flight-relative-to-the-shortest-flight-to-that-destination.-which-flights-were-most-delayed-in-the-air"><i class="fa fa-check"></i>6. Look at each destination. Can you find flights that are suspiciously fast? (i.e. flights that represent a potential data entry error). Compute the air time a flight relative to the shortest flight to that destination. Which flights were most delayed in the air?</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#find-all-destinations-that-are-flown-by-at-least-two-carriers.-use-that-information-to-rank-the-carriers."><i class="fa fa-check"></i>7. Find all destinations that are flown by at least two carriers. Use that information to rank the carriers.</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#for-each-plane-count-the-number-of-flights-before-the-first-delay-of-greater-than-1-hour."><i class="fa fa-check"></i>8. For each plane, count the number of flights before the first delay of greater than 1 hour.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-6-workflow-scripts.html"><a href="chapter-6-workflow-scripts.html"><i class="fa fa-check"></i>Chapter 6 - Workflow: scripts</a><ul>
<li><a href="chapter-6-workflow-scripts.html#exercises-13"><strong>6.3</strong> Exercises</a><ul>
<li><a href="chapter-6-workflow-scripts.html#go-to-the-rstudio-tips-twitter-account-httpstwitter.comrstudiotips-and-find-one-tip-that-looks-interesting.-practice-using-it">1. Go to the RStudio Tips twitter account, <code>https://twitter.com/rstudiotips</code> and find one tip that looks interesting. Practice using it!</a></li>
<li><a href="chapter-6-workflow-scripts.html#what-other-common-mistakes-will-rstudio-diagnostics-report-read-httpssupport.rstudio.comhcen-usarticles205753617-code-diagnostics-to-find-out.">2. What other common mistakes will RStudio diagnostics report? Read <code>https://support.rstudio.com/hc/en-us/articles/205753617-Code-Diagnostics</code> to find out.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html"><i class="fa fa-check"></i>Chapter 7 - Exploratory Data Analysis</a><ul>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---visualizing-distributions"><strong>7.3.1</strong> Notes - Visualizing distributions</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#exercises-14"><strong>7.3.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#explore-the-distribution-of-each-of-the-x-y-and-z-variables-in-diamonds.-what-do-you-learn-think-about-a-diamond-and-how-you-might-decide-which-dimension-is-the-length-width-and-depth."><i class="fa fa-check"></i>1. Explore the distribution of each of the x, y, and z variables in diamonds. What do you learn? Think about a diamond and how you might decide which dimension is the length, width, and depth.</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#explore-the-distribution-of-price.-do-you-discover-anything-unusual-or-surprising-hint-carefully-think-about-the-binwidth-and-make-sure-you-try-a-wide-range-of-values."><i class="fa fa-check"></i>2. Explore the distribution of price. Do you discover anything unusual or surprising? (Hint: Carefully think about the binwidth and make sure you try a wide range of values.)</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#how-many-diamonds-are-0.99-carat-how-many-are-1-carat-what-do-you-think-is-the-cause-of-the-difference"><i class="fa fa-check"></i>3. How many diamonds are 0.99 carat? How many are 1 carat? What do you think is the cause of the difference?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#compare-and-contrast-coord_cartesian-vs-xlim-or-ylim-when-zooming-in-on-a-histogram.-what-happens-if-you-leave-binwidth-unset-what-happens-if-you-try-and-zoom-so-only-half-a-bar-shows"><i class="fa fa-check"></i>4. Compare and contrast coord_cartesian() vs xlim() or ylim() when zooming in on a histogram. What happens if you leave binwidth unset? What happens if you try and zoom so only half a bar shows?</a></li>
</ul></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---missing-values"><strong>7.4</strong> Notes - Missing Values</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#exercises-15"><strong>7.4.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#what-happens-to-missing-values-in-a-histogram-what-happens-to-missing-values-in-a-bar-chart-why-is-there-a-difference"><i class="fa fa-check"></i>1. What happens to missing values in a histogram? What happens to missing values in a bar chart? Why is there a difference?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#what-does-na.rm-true-do-in-mean-and-sum"><i class="fa fa-check"></i>2. What does na.rm = TRUE do in mean() and sum()?</a></li>
</ul></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---covariation"><strong>7.5</strong> Notes - Covariation</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---a-categorical-and-continuous-variable"><strong>7.5.1</strong> Notes - A categorical and continuous variable</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#exercises-16"><strong>7.5.1.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#use-what-youve-learned-to-improve-the-visualisation-of-the-departure-times-of-cancelled-vs.non-cancelled-flights."><i class="fa fa-check"></i>1. Use what you’ve learned to improve the visualisation of the departure times of cancelled vs. non-cancelled flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#what-variable-in-the-diamonds-dataset-is-most-important-for-predicting-the-price-of-a-diamond-how-is-that-variable-correlated-with-cut-why-does-the-combination-of-those-two-relationships-lead-to-lower-quality-diamonds-being-more-expensive"><i class="fa fa-check"></i>2. What variable in the diamonds dataset is most important for predicting the price of a diamond? How is that variable correlated with cut? Why does the combination of those two relationships lead to lower quality diamonds being more expensive?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#install-the-ggstance-package-and-create-a-horizontal-boxplot.-how-does-this-compare-to-using-coord_flip"><i class="fa fa-check"></i>3. Install the ggstance package, and create a horizontal boxplot. How does this compare to using coord_flip()?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#one-problem-with-boxplots-is-that-they-were-developed-in-an-era-of-much-smaller-datasets-and-tend-to-display-a-prohibitively-large-number-of-outlying-values.-one-approach-to-remedy-this-problem-is-the-letter-value-plot.-install-the-lvplot-package-and-try-using-geom_lv-to-display-the-distribution-of-price-vs-cut.-what-do-you-learn-how-do-you-interpret-the-plots"><i class="fa fa-check"></i>4. One problem with boxplots is that they were developed in an era of much smaller datasets and tend to display a prohibitively large number of “outlying values”. One approach to remedy this problem is the letter value plot. Install the lvplot package, and try using geom_lv() to display the distribution of price vs cut. What do you learn? How do you interpret the plots?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#compare-and-contrast-geom_violin-with-a-facetted-geom_histogram-or-a-coloured-geom_freqpoly.-what-are-the-pros-and-cons-of-each-method"><i class="fa fa-check"></i>5. Compare and contrast geom_violin() with a facetted geom_histogram(), or a coloured geom_freqpoly(). What are the pros and cons of each method?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#if-you-have-a-small-dataset-its-sometimes-useful-to-use-geom_jitter-to-see-the-relationship-between-a-continuous-and-categorical-variable.-the-ggbeeswarm-package-provides-a-number-of-methods-similar-to-geom_jitter.-list-them-and-briefly-describe-what-each-one-does."><i class="fa fa-check"></i>6. If you have a small dataset, it’s sometimes useful to use geom_jitter() to see the relationship between a continuous and categorical variable. The ggbeeswarm package provides a number of methods similar to geom_jitter(). List them and briefly describe what each one does.</a></li>
</ul></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---two-categorical-variables"><strong>7.5.2</strong> Notes - Two categorical variables</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#exercises-17"><strong>7.5.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#how-could-you-rescale-the-count-dataset-above-to-more-clearly-show-the-distribution-of-cut-within-colour-or-colour-within-cut"><i class="fa fa-check"></i>1. How could you rescale the count dataset above to more clearly show the distribution of cut within colour, or colour within cut?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#use-geom_tile-together-with-dplyr-to-explore-how-average-flight-delays-vary-by-destination-and-month-of-year.-what-makes-the-plot-difficult-to-read-how-could-you-improve-it"><i class="fa fa-check"></i>2. Use geom_tile() together with dplyr to explore how average flight delays vary by destination and month of year. What makes the plot difficult to read? How could you improve it?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#why-is-it-slightly-better-to-use-aesx-color-y-cut-rather-than-aesx-cut-y-color-in-the-example-above"><i class="fa fa-check"></i>3. Why is it slightly better to use aes(x = color, y = cut) rather than aes(x = cut, y = color) in the example above?</a></li>
</ul></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---two-continuous-variables"><strong>7.5.3</strong> Notes - Two continuous variables</a></li>
<li><a href="chapter-7-exploratory-data-analysis.html#exercises-18"><strong>7.5.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#instead-of-summarising-the-conditional-distribution-with-a-boxplot-you-could-use-a-frequency-polygon.-what-do-you-need-to-consider-when-using-cut_width-vs-cut_number-how-does-that-impact-a-visualisation-of-the-2d-distribution-of-carat-and-price"><i class="fa fa-check"></i>1. Instead of summarising the conditional distribution with a boxplot, you could use a frequency polygon. What do you need to consider when using cut_width() vs cut_number()? How does that impact a visualisation of the 2d distribution of carat and price?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#visualise-the-distribution-of-carat-partitioned-by-price."><i class="fa fa-check"></i>2. Visualise the distribution of carat, partitioned by price.</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#how-does-the-price-distribution-of-very-large-diamonds-compare-to-small-diamonds.-is-it-as-you-expect-or-does-it-surprise-you"><i class="fa fa-check"></i>3. How does the price distribution of very large diamonds compare to small diamonds. Is it as you expect, or does it surprise you?</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#combine-two-of-the-techniques-youve-learned-to-visualise-the-combined-distribution-of-cut-carat-and-price."><i class="fa fa-check"></i>4. Combine two of the techniques you’ve learned to visualise the combined distribution of cut, carat, and price.</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#two-dimensional-plots-reveal-outliers-that-are-not-visible-in-one-dimensional-plots.-for-example-some-points-in-the-plot-below-have-an-unusual-combination-of-x-and-y-values-which-makes-the-points-outliers-even-though-their-x-and-y-values-appear-normal-when-examined-separately.-why-is-a-scatterplot-a-better-display-than-a-binned-plot-for-this-case"><i class="fa fa-check"></i>5. Two dimensional plots reveal outliers that are not visible in one dimensional plots. For example, some points in the plot below have an unusual combination of x and y values, which makes the points outliers even though their x and y values appear normal when examined separately. Why is a scatterplot a better display than a binned plot for this case?</a></li>
</ul></li>
<li><a href="chapter-7-exploratory-data-analysis.html#notes---patterns-and-models"><strong>7.6</strong> Notes - Patterns and models</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-8-workflow-projects.html"><a href="chapter-8-workflow-projects.html"><i class="fa fa-check"></i>Chapter 8 - Workflow: projects</a><ul>
<li class="chapter" data-level="" data-path="chapter-8-workflow-projects.html"><a href="chapter-8-workflow-projects.html#notes---project-workflows"><i class="fa fa-check"></i>Notes - Project Workflows</a></li>
</ul></li>
<li class="part"><span><b>II Data Wrangling</b></span></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html"><i class="fa fa-check"></i>Chapter 10 - Tibbles</a><ul>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#notes---creating-tibbles"><i class="fa fa-check"></i>Notes - Creating Tibbles</a></li>
<li><a href="chapter-10-tibbles.html#exercises-19"><strong>10.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#how-can-you-tell-if-an-object-is-a-tibble-hint-try-printing-mtcars-which-is-a-regular-data-frame."><i class="fa fa-check"></i>1. How can you tell if an object is a tibble? (Hint: try printing mtcars, which is a regular data frame).</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#compare-and-contrast-the-following-operations-on-a-data.frame-and-equivalent-tibble.-what-is-different-why-might-the-default-data-frame-behaviours-cause-you-frustration"><i class="fa fa-check"></i>2. Compare and contrast the following operations on a data.frame and equivalent tibble. What is different? Why might the default data frame behaviours cause you frustration?</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#if-you-have-the-name-of-a-variable-stored-in-an-object-e.g.var---mpg-how-can-you-extract-the-reference-variable-from-a-tibble"><i class="fa fa-check"></i>3. If you have the name of a variable stored in an object, e.g. var &lt;- “mpg”, how can you extract the reference variable from a tibble?</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#practice-referring-to-non-syntactic-names-in-the-following-data-frame-by"><i class="fa fa-check"></i>4. Practice referring to non-syntactic names in the following data frame by:</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#what-does-tibbleenframe-do-when-might-you-use-it"><i class="fa fa-check"></i>5. What does tibble::enframe() do? When might you use it?</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#what-option-controls-how-many-additional-column-names-are-printed-at-the-footer-of-a-tibble"><i class="fa fa-check"></i>6. What option controls how many additional column names are printed at the footer of a tibble?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html"><i class="fa fa-check"></i>Chapter 11 - Data import</a><ul>
<li><a href="chapter-11-data-import.html#notes---reading-in-files"><strong>11.2</strong> Notes - Reading in files</a></li>
<li><a href="chapter-11-data-import.html#exercises-20"><strong>11.2.2</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#what-function-would-you-use-to-read-a-file-where-fields-were-separated-with"><i class="fa fa-check"></i>1. What function would you use to read a file where fields were separated with “|”?</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#apart-from-file-skip-and-comment-what-other-arguments-do-read_csv-and-read_tsv-have-in-common"><i class="fa fa-check"></i>2. Apart from file, skip, and comment, what other arguments do read_csv() and read_tsv() have in common?</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#what-are-the-most-important-arguments-to-read_fwf"><i class="fa fa-check"></i>3. What are the most important arguments to read_fwf()?</a></li>
<li class="chapter" data-level="0.0.1" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#sometimes-strings-in-a-csv-file-contain-commas.-to-prevent-them-from-causing-problems-they-need-to-be-surrounded-by-a-quoting-character-like-or-.-by-convention-read_csv-assumes-that-the-quoting-character-will-be-and-if-you-want-to-change-it-youll-need-to-use-read_delim-instead.-what-arguments-do-you-need-to-specify-to-read-the-following-text-into-a-data-frame--"><i class="fa fa-check"></i><b>0.0.1</b> 4. Sometimes strings in a CSV file contain commas. To prevent them from causing problems they need to be surrounded by a quoting character, like &quot; or ’. By convention, read_csv() assumes that the quoting character will be “, and if you want to change it you’ll need to use read_delim() instead. What arguments do you need to specify to read the following text into a data frame? {-}</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#identify-what-is-wrong-with-each-of-the-following-inline-csv-files.-what-happens-when-you-run-the-code"><i class="fa fa-check"></i>5. Identify what is wrong with each of the following inline CSV files. What happens when you run the code?</a></li>
</ul></li>
<li><a href="chapter-11-data-import.html#notes---parsing-a-vector"><strong>11.3</strong> Notes - Parsing a vector</a><ul>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#parsing-numbers"><i class="fa fa-check"></i>11.3.1 Parsing Numbers</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#parsing-strings"><i class="fa fa-check"></i>11.3.2 Parsing Strings</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#parsing-factors"><i class="fa fa-check"></i>11.3.3 Parsing Factors</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#parsing-dates-date-times-and-times"><i class="fa fa-check"></i>11.3.4 Parsing Dates, Date-times, and Times</a></li>
</ul></li>
<li><a href="chapter-11-data-import.html#exercises-21"><strong>11.3.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#what-are-the-most-important-arguments-to-locale"><i class="fa fa-check"></i>1. What are the most important arguments to locale()?</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#what-happens-if-you-try-and-set-decimal_mark-and-grouping_mark-to-the-same-character-what-happens-to-the-default-value-of-grouping_mark-when-you-set-decimal_mark-to-what-happens-to-the-default-value-of-decimal_mark-when-you-set-the-grouping_mark-to-."><i class="fa fa-check"></i>2. What happens if you try and set decimal_mark and grouping_mark to the same character? What happens to the default value of grouping_mark when you set decimal_mark to “,”? What happens to the default value of decimal_mark when you set the grouping_mark to “.”?</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#i-didnt-discuss-the-date_format-and-time_format-options-to-locale.-what-do-they-do-construct-an-example-that-shows-when-they-might-be-useful."><i class="fa fa-check"></i>3. I didn’t discuss the date_format and time_format options to locale(). What do they do? Construct an example that shows when they might be useful.</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#if-you-live-outside-the-us-create-a-new-locale-object-that-encapsulates-the-settings-for-the-types-of-file-you-read-most-commonly."><i class="fa fa-check"></i>4. If you live outside the US, create a new locale object that encapsulates the settings for the types of file you read most commonly.</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#whats-the-difference-between-read_csv-and-read_csv2"><i class="fa fa-check"></i>5. What’s the difference between read_csv() and read_csv2()?</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#what-are-the-most-common-encodings-used-in-europe-what-are-the-most-common-encodings-used-in-asia-do-some-googling-to-find-out."><i class="fa fa-check"></i>6. What are the most common encodings used in Europe? What are the most common encodings used in Asia? Do some googling to find out.</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#generate-the-correct-format-string-to-parse-each-of-the-following-dates-and-times"><i class="fa fa-check"></i>7. Generate the correct format string to parse each of the following dates and times:</a></li>
</ul></li>
<li><a href="chapter-11-data-import.html#notes---parsing-a-file"><strong>11.4</strong> Notes - Parsing a file</a></li>
<li><a href="chapter-11-data-import.html#notes---writing-to-a-file"><strong>11.5</strong> Notes - Writing to a file</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html"><i class="fa fa-check"></i>Chapter 12 - Tidy data</a><ul>
<li><a href="chapter-12-tidy-data.html#exercises-22"><strong>12.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#using-prose-describe-how-the-variables-and-observations-are-organised-in-each-of-the-sample-tables."><i class="fa fa-check"></i>1. Using prose, describe how the variables and observations are organised in each of the sample tables.</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#compute-the-rate-for-table2-and-table4a-table4b.-you-will-need-to-perform-four-operations"><i class="fa fa-check"></i>2. Compute the rate for table2, and table4a + table4b. You will need to perform four operations:</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#recreate-the-plot-showing-change-in-cases-over-time-using-table2-instead-of-table1.-what-do-you-need-to-do-first"><i class="fa fa-check"></i>3. Recreate the plot showing change in cases over time using table2 instead of table1. What do you need to do first?</a></li>
</ul></li>
<li><a href="chapter-12-tidy-data.html#notes---spreading-and-gathering"><strong>12.3.1</strong> Notes - Spreading and Gathering</a></li>
<li><a href="chapter-12-tidy-data.html#exercises-23"><strong>12.3.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#why-are-gather-and-spread-not-perfectly-symmetrical-carefully-consider-the-following-example"><i class="fa fa-check"></i>1. Why are gather() and spread() not perfectly symmetrical? Carefully consider the following example:</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#why-does-this-code-fail"><i class="fa fa-check"></i>2. Why does this code fail?</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#why-does-spreading-this-tibble-fail-how-could-you-add-a-new-column-to-fix-the-problem"><i class="fa fa-check"></i>3. Why does spreading this tibble fail? How could you add a new column to fix the problem?</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#tidy-the-simple-tibble-below.-do-you-need-to-spread-or-gather-it-what-are-the-variables"><i class="fa fa-check"></i>4. Tidy the simple tibble below. Do you need to spread or gather it? What are the variables?</a></li>
</ul></li>
<li><a href="chapter-12-tidy-data.html#notes---separating-and-uniting"><strong>12.4</strong> Notes - Separating and uniting</a></li>
<li><a href="chapter-12-tidy-data.html#exercises-24"><strong>12.4.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#what-do-the-extra-and-fill-arguments-do-in-separate-experiment-with-the-various-options-for-the-following-two-toy-datasets."><i class="fa fa-check"></i>1. What do the extra and fill arguments do in separate()? Experiment with the various options for the following two toy datasets.</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#both-unite-and-separate-have-a-remove-argument.-what-does-it-do-why-would-you-set-it-to-false"><i class="fa fa-check"></i>2. Both unite() and separate() have a remove argument. What does it do? Why would you set it to FALSE?</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#compare-and-contrast-separate-and-extract.-why-are-there-three-variations-of-separation-by-position-by-separator-and-with-groups-but-only-one-unite"><i class="fa fa-check"></i>3. Compare and contrast separate() and extract(). Why are there three variations of separation (by position, by separator, and with groups), but only one unite?</a></li>
</ul></li>
<li><a href="chapter-12-tidy-data.html#notes---missing-values-1"><strong>12.5</strong> Notes - Missing Values</a></li>
<li><a href="chapter-12-tidy-data.html#exercises-25"><strong>12.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#compare-and-contrast-the-fill-arguments-to-spread-and-complete."><i class="fa fa-check"></i>1. Compare and contrast the fill arguments to spread() and complete().</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#what-does-the-direction-argument-to-fill-do"><i class="fa fa-check"></i>2. What does the direction argument to fill() do?</a></li>
</ul></li>
<li><a href="chapter-12-tidy-data.html#notes---case-study"><strong>12.6</strong> Notes - Case Study</a></li>
<li><a href="chapter-12-tidy-data.html#exercises-26"><strong>12.6.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#in-this-case-study-i-set-na.rm-true-just-to-make-it-easier-to-check-that-we-had-the-correct-values.-is-this-reasonable-think-about-how-missing-values-are-represented-in-this-dataset.-are-there-implicit-missing-values-whats-the-difference-between-an-na-and-zero"><i class="fa fa-check"></i>1. In this case study I set na.rm = TRUE just to make it easier to check that we had the correct values. Is this reasonable? Think about how missing values are represented in this dataset. Are there implicit missing values? What’s the difference between an NA and zero?</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#what-happens-if-you-neglect-the-mutate-step-mutatekey-stringrstr_replacekey-newrel-new_rel"><i class="fa fa-check"></i>2. What happens if you neglect the mutate() step? (mutate(key = stringr::str_replace(key, “newrel”, “new_rel”)))</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#i-claimed-that-iso2-and-iso3-were-redundant-with-country.-confirm-this-claim."><i class="fa fa-check"></i>3. I claimed that iso2 and iso3 were redundant with country. Confirm this claim.</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#for-each-country-year-and-sex-compute-the-total-number-of-cases-of-tb.-make-an-informative-visualisation-of-the-data."><i class="fa fa-check"></i>4. For each country, year, and sex compute the total number of cases of TB. Make an informative visualisation of the data.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html"><i class="fa fa-check"></i>Chapter 13 - Relational data</a><ul>
<li><a href="chapter-13-relational-data.html#exercises-27"><strong>13.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#imagine-you-wanted-to-draw-approximately-the-route-each-plane-flies-from-its-origin-to-its-destination.-what-variables-would-you-need-what-tables-would-you-need-to-combine"><i class="fa fa-check"></i>1. Imagine you wanted to draw (approximately) the route each plane flies from its origin to its destination. What variables would you need? What tables would you need to combine?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#i-forgot-to-draw-the-relationship-between-weather-and-airports.-what-is-the-relationship-and-how-should-it-appear-in-the-diagram"><i class="fa fa-check"></i>2. I forgot to draw the relationship between weather and airports. What is the relationship and how should it appear in the diagram?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#weather-only-contains-information-for-the-origin-nyc-airports.-if-it-contained-weather-records-for-all-airports-in-the-usa-what-additional-relation-would-it-define-with-flights"><i class="fa fa-check"></i>3. weather only contains information for the origin (NYC) airports. If it contained weather records for all airports in the USA, what additional relation would it define with flights?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#we-know-that-some-days-of-the-year-are-special-and-fewer-people-than-usual-fly-on-them.-how-might-you-represent-that-data-as-a-data-frame-what-would-be-the-primary-keys-of-that-table-how-would-it-connect-to-the-existing-tables"><i class="fa fa-check"></i>4. We know that some days of the year are “special”, and fewer people than usual fly on them. How might you represent that data as a data frame? What would be the primary keys of that table? How would it connect to the existing tables?</a></li>
</ul></li>
<li><a href="chapter-13-relational-data.html#notes---keys"><strong>13.3</strong> Notes - Keys</a></li>
<li><a href="chapter-13-relational-data.html#exercises-28"><strong>13.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#add-a-surrogate-key-to-flights."><i class="fa fa-check"></i>1. Add a surrogate key to flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#identify-the-keys-in-the-following-datasets"><i class="fa fa-check"></i>2. Identify the keys in the following datasets:</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#draw-a-diagram-illustrating-the-connections-between-the-batting-master-and-salaries-tables-in-the-lahman-package.-draw-another-diagram-that-shows-the-relationship-between-master-managers-awardsmanagers.-how-would-you-characterise-the-relationship-between-the-batting-pitching-and-fielding-tables"><i class="fa fa-check"></i>3. Draw a diagram illustrating the connections between the Batting, Master, and Salaries tables in the Lahman package. Draw another diagram that shows the relationship between Master, Managers, AwardsManagers. How would you characterise the relationship between the Batting, Pitching, and Fielding tables?</a></li>
</ul></li>
<li><a href="chapter-13-relational-data.html#notes---mutating-joins"><strong>13.4</strong> Notes - Mutating Joins</a></li>
<li><a href="chapter-13-relational-data.html#exercises-29"><strong>13.4.6</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#compute-the-average-delay-by-destination-then-join-on-the-airports-data-frame-so-you-can-show-the-spatial-distribution-of-delays.-heres-an-easy-way-to-draw-a-map-of-the-united-states"><i class="fa fa-check"></i>1. Compute the average delay by destination, then join on the airports data frame so you can show the spatial distribution of delays. Here’s an easy way to draw a map of the United States:</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#add-the-location-of-the-origin-and-destination-i.e.the-lat-and-lon-to-flights."><i class="fa fa-check"></i>2. Add the location of the origin and destination (i.e. the lat and lon) to flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#is-there-a-relationship-between-the-age-of-a-plane-and-its-delays"><i class="fa fa-check"></i>3. Is there a relationship between the age of a plane and its delays?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#what-weather-conditions-make-it-more-likely-to-see-a-delay"><i class="fa fa-check"></i>4. What weather conditions make it more likely to see a delay?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#what-happened-on-june-13-2013-display-the-spatial-pattern-of-delays-and-then-use-google-to-cross-reference-with-the-weather."><i class="fa fa-check"></i>5. What happened on June 13 2013? Display the spatial pattern of delays, and then use Google to cross-reference with the weather.</a></li>
</ul></li>
<li><a href="chapter-13-relational-data.html#notes---filtering-joins"><strong>13.5</strong> Notes - Filtering Joins</a></li>
<li><a href="chapter-13-relational-data.html#exercises-30"><strong>13.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#what-does-it-mean-for-a-flight-to-have-a-missing-tailnum-what-do-the-tail-numbers-that-dont-have-a-matching-record-in-planes-have-in-common-hint-one-variable-explains-90-of-the-problems."><i class="fa fa-check"></i>1. What does it mean for a flight to have a missing tailnum? What do the tail numbers that don’t have a matching record in planes have in common? (Hint: one variable explains ~90% of the problems.)</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#filter-flights-to-only-show-flights-with-planes-that-have-flown-at-least-100-flights."><i class="fa fa-check"></i>2. Filter flights to only show flights with planes that have flown at least 100 flights.</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#combine-fueleconomyvehicles-and-fueleconomycommon-to-find-only-the-records-for-the-most-common-models."><i class="fa fa-check"></i>3. Combine fueleconomy::vehicles and fueleconomy::common to find only the records for the most common models.</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#find-the-48-hours-over-the-course-of-the-whole-year-that-have-the-worst-delays.-cross-reference-it-with-the-weather-data.-can-you-see-any-patterns"><i class="fa fa-check"></i>4. Find the 48 hours (over the course of the whole year) that have the worst delays. Cross-reference it with the weather data. Can you see any patterns?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#what-does-anti_joinflights-airports-by-cdest-faa-tell-you-what-does-anti_joinairports-flights-by-cfaa-dest-tell-you"><i class="fa fa-check"></i>5. What does anti_join(flights, airports, by = c(“dest” = “faa”)) tell you? What does anti_join(airports, flights, by = c(“faa” = “dest”)) tell you?</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#you-might-expect-that-theres-an-implicit-relationship-between-plane-and-airline-because-each-plane-is-flown-by-a-single-airline.-confirm-or-reject-this-hypothesis-using-the-tools-youve-learned-above."><i class="fa fa-check"></i>6. You might expect that there’s an implicit relationship between plane and airline, because each plane is flown by a single airline. Confirm or reject this hypothesis using the tools you’ve learned above.</a></li>
</ul></li>
<li><a href="chapter-13-relational-data.html#notes---join-problems-and-set-operations"><strong>13.6 &amp; 13.7</strong> Notes - Join problems and set operations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html"><i class="fa fa-check"></i>Chapter 14 - Strings</a><ul>
<li><a href="chapter-14-strings.html#exercises-31"><strong>14.2.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#in-code-that-doesnt-use-stringr-youll-often-see-paste-and-paste0.-whats-the-difference-between-the-two-functions-what-stringr-function-are-they-equivalent-to-how-do-the-functions-differ-in-their-handling-of-na"><i class="fa fa-check"></i>1. In code that doesn’t use stringr, you’ll often see paste() and paste0(). What’s the difference between the two functions? What stringr function are they equivalent to? How do the functions differ in their handling of NA?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#in-your-own-words-describe-the-difference-between-the-sep-and-collapse-arguments-to-str_c."><i class="fa fa-check"></i>2. In your own words, describe the difference between the sep and collapse arguments to str_c().</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#use-str_length-and-str_sub-to-extract-the-middle-character-from-a-string.-what-will-you-do-if-the-string-has-an-even-number-of-characters"><i class="fa fa-check"></i>3. Use str_length() and str_sub() to extract the middle character from a string. What will you do if the string has an even number of characters?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#what-does-str_wrap-do-when-might-you-want-to-use-it"><i class="fa fa-check"></i>4. What does str_wrap() do? When might you want to use it?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#what-does-str_trim-do-whats-the-opposite-of-str_trim"><i class="fa fa-check"></i>5. What does str_trim() do? What’s the opposite of str_trim()?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#write-a-function-that-turns-e.g.-a-vector-ca-b-c-into-the-string-a-b-and-c.-think-carefully-about-what-it-should-do-if-given-a-vector-of-length-0-1-or-2."><i class="fa fa-check"></i>6. Write a function that turns (e.g.) a vector c(“a”, “b”, “c”) into the string a, b, and c. Think carefully about what it should do if given a vector of length 0, 1, or 2.</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-32"><strong>14.3.1.1</strong> Exercises</a><ul>
<li><a href="chapter-14-strings.html#explain-why-each-of-these-strings-dont-match-a-.">1. Explain why each of these strings don’t match a <code>\</code>: <code>&quot;\&quot;, &quot;\\&quot;, &quot;\\\&quot;</code>.</a></li>
<li><a href="chapter-14-strings.html#how-would-you-match-the-sequence">2. How would you match the sequence <code>&quot;'\</code>?</a></li>
<li><a href="chapter-14-strings.html#what-patterns-will-the-regular-expression-......-match-how-would-you-represent-it-as-a-string">3. What patterns will the regular expression <code>\..\..\..</code> match? How would you represent it as a string?</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-33"><strong>14.3.2.1</strong> Exercises</a><ul>
<li><a href="chapter-14-strings.html#how-would-you-match-the-literal-string">1. How would you match the literal string <code>&quot;$^$&quot;</code>?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#given-the-corpus-of-common-words-in-stringrwords-create-regular-expressions-that-find-all-words-that"><i class="fa fa-check"></i>2. Given the corpus of common words in stringr::words, create regular expressions that find all words that:</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-34"><strong>14.3.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#create-regular-expressions-to-find-all-words-that"><i class="fa fa-check"></i>1. Create regular expressions to find all words that:</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#empirically-verify-the-rule-i-before-e-except-after-c."><i class="fa fa-check"></i>2. Empirically verify the rule “i before e except after c”.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#is-q-always-followed-by-a-u"><i class="fa fa-check"></i>3. Is “q” always followed by a “u”?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#write-a-regular-expression-that-matches-a-word-if-its-probably-written-in-british-english-not-american-english."><i class="fa fa-check"></i>4. Write a regular expression that matches a word if it’s probably written in British English, not American English.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#create-a-regular-expression-that-will-match-telephone-numbers-as-commonly-written-in-your-country."><i class="fa fa-check"></i>5. Create a regular expression that will match telephone numbers as commonly written in your country.</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-35"><strong>14.3.4.1</strong> Exercises</a><ul>
<li><a href="chapter-14-strings.html#describe-the-equivalents-of-in-mn-form.">1. Describe the equivalents of <code>?, +, *</code> in <code>{m,n}</code> form.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#describe-in-words-what-these-regular-expressions-match-read-carefully-to-see-if-im-using-a-regular-expression-or-a-string-that-defines-a-regular-expression."><i class="fa fa-check"></i>2. Describe in words what these regular expressions match: (read carefully to see if I’m using a regular expression or a string that defines a regular expression.)</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#create-regular-expressions-to-find-all-words-that-1"><i class="fa fa-check"></i>3. Create regular expressions to find all words that:</a></li>
<li><a href="chapter-14-strings.html#solve-the-beginner-regexp-crosswords-at-httpsregexcrossword.comchallengesbeginner.">4. Solve the beginner regexp crosswords at <code>https://regexcrossword.com/challenges/beginner</code>.</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-36"><strong>14.3.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#describe-in-words-what-these-expressions-will-match"><i class="fa fa-check"></i>1. Describe, in words, what these expressions will match:</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#construct-regular-expressions-to-match-words-that"><i class="fa fa-check"></i>2. Construct regular expressions to match words that:</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-37"><strong>14.4.2</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#for-each-of-the-following-challenges-try-solving-it-by-using-both-a-single-regular-expression-and-a-combination-of-multiple-str_detect-calls."><i class="fa fa-check"></i>1. For each of the following challenges, try solving it by using both a single regular expression, and a combination of multiple str_detect() calls.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#what-word-has-the-highest-number-of-vowels-what-word-has-the-highest-proportion-of-vowels-hint-what-is-the-denominator"><i class="fa fa-check"></i>2. What word has the highest number of vowels? What word has the highest proportion of vowels? (Hint: what is the denominator?)</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-38"><strong>14.4.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#in-the-previous-example-you-might-have-noticed-that-the-regular-expression-matched-flickered-which-is-not-a-colour.-modify-the-regex-to-fix-the-problem."><i class="fa fa-check"></i>1. In the previous example, you might have noticed that the regular expression matched “flickered”, which is not a colour. Modify the regex to fix the problem.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#from-the-harvard-sentences-data-extract"><i class="fa fa-check"></i>2. From the Harvard sentences data, extract:</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-39"><strong>14.4.4.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#find-all-words-that-come-after-a-number-like-one-two-three-etc.-pull-out-both-the-number-and-the-word."><i class="fa fa-check"></i>1. Find all words that come after a “number” like “one”, “two”, “three” etc. Pull out both the number and the word.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#find-all-contractions.-separate-out-the-pieces-before-and-after-the-apostrophe."><i class="fa fa-check"></i>2. Find all contractions. Separate out the pieces before and after the apostrophe.</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-40"><strong>14.4.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#replace-all-forward-slashes-in-a-string-with-backslashes."><i class="fa fa-check"></i>1. Replace all forward slashes in a string with backslashes.</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#implement-a-simple-version-of-str_to_lower-using-replace_all."><i class="fa fa-check"></i>2. Implement a simple version of str_to_lower() using replace_all().</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#switch-the-first-and-last-letters-in-words.-which-of-those-strings-are-still-words"><i class="fa fa-check"></i>3. Switch the first and last letters in words. Which of those strings are still words?</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-41"><strong>14.4.6.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#split-up-a-string-like-apples-pears-and-bananas-into-individual-components."><i class="fa fa-check"></i>1. Split up a string like “apples, pears, and bananas” into individual components.</a></li>
<li><a href="chapter-14-strings.html#why-is-it-better-to-split-up-by-boundaryword-than">2. Why is it better to split up by <code>boundary(&quot;word&quot;)</code> than <code>&quot; &quot;</code>?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#what-does-splitting-with-an-empty-string-do-experiment-and-then-read-the-documentation."><i class="fa fa-check"></i>3. What does splitting with an empty string (“”) do? Experiment, and then read the documentation.</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-42"><strong>14.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#how-would-you-find-all-strings-containing-with-regex-vs.with-fixed"><i class="fa fa-check"></i>1. How would you find all strings containing  with regex() vs. with fixed()?</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#what-are-the-five-most-common-words-in-sentences"><i class="fa fa-check"></i>2. What are the five most common words in sentences?</a></li>
</ul></li>
<li><a href="chapter-14-strings.html#exercises-43"><strong>14.7.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#find-the-stringi-functions-that"><i class="fa fa-check"></i>1. Find the stringi functions that:</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#how-do-you-control-the-language-that-stri_sort-uses-for-sorting"><i class="fa fa-check"></i>2. How do you control the language that stri_sort() uses for sorting?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html"><i class="fa fa-check"></i>Chapter 15 - Factors</a><ul>
<li><a href="chapter-15-factors.html#exercises-44"><strong>15.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#explore-the-distribution-of-rincome-reported-income.-what-makes-the-default-bar-chart-hard-to-understand-how-could-you-improve-the-plot"><i class="fa fa-check"></i>1. Explore the distribution of rincome (reported income). What makes the default bar chart hard to understand? How could you improve the plot?</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#what-is-the-most-common-relig-in-this-survey-whats-the-most-common-partyid"><i class="fa fa-check"></i>2. What is the most common relig in this survey? What’s the most common partyid?</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#which-relig-does-denom-denomination-apply-to-how-can-you-find-out-with-a-table-how-can-you-find-out-with-a-visualisation"><i class="fa fa-check"></i>3. Which relig does denom (denomination) apply to? How can you find out with a table? How can you find out with a visualisation?</a></li>
</ul></li>
<li><a href="chapter-15-factors.html#exercises-45"><strong>15.4.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#there-are-some-suspiciously-high-numbers-in-tvhours.-is-the-mean-a-good-summary"><i class="fa fa-check"></i>1. There are some suspiciously high numbers in tvhours. Is the mean a good summary?</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#for-each-factor-in-gss_cat-identify-whether-the-order-of-the-levels-is-arbitrary-or-principled."><i class="fa fa-check"></i>2. For each factor in gss_cat identify whether the order of the levels is arbitrary or principled.</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#why-did-moving-not-applicable-to-the-front-of-the-levels-move-it-to-the-bottom-of-the-plot"><i class="fa fa-check"></i>3. Why did moving “Not applicable” to the front of the levels move it to the bottom of the plot?</a></li>
</ul></li>
<li><a href="chapter-15-factors.html#exercises-46"><strong>15.5.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#how-have-the-proportions-of-people-identifying-as-democrat-republican-and-independent-changed-over-time"><i class="fa fa-check"></i>1. How have the proportions of people identifying as Democrat, Republican, and Independent changed over time?</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#how-could-you-collapse-rincome-into-a-small-set-of-categories"><i class="fa fa-check"></i>2. How could you collapse rincome into a small set of categories?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html"><i class="fa fa-check"></i>Chapter 16 - Dates and times</a><ul>
<li><a href="chapter-16-dates-and-times.html#exercises-47"><strong>16.2.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#what-happens-if-you-parse-a-string-that-contains-invalid-dates"><i class="fa fa-check"></i>1. What happens if you parse a string that contains invalid dates?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#what-does-the-tzone-argument-to-today-do-why-is-it-important"><i class="fa fa-check"></i>2. What does the tzone argument to today() do? Why is it important?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#use-the-appropriate-lubridate-function-to-parse-each-of-the-following-dates"><i class="fa fa-check"></i>3. Use the appropriate lubridate function to parse each of the following dates:</a></li>
</ul></li>
<li><a href="chapter-16-dates-and-times.html#exercises-48"><strong>16.3.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#how-does-the-distribution-of-flight-times-within-a-day-change-over-the-course-of-the-year"><i class="fa fa-check"></i>1. How does the distribution of flight times within a day change over the course of the year?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#compare-dep_time-sched_dep_time-and-dep_delay.-are-they-consistent-explain-your-findings."><i class="fa fa-check"></i>2. Compare dep_time, sched_dep_time and dep_delay. Are they consistent? Explain your findings.</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#compare-air_time-with-the-duration-between-the-departure-and-arrival.-explain-your-findings.-hint-consider-the-location-of-the-airport."><i class="fa fa-check"></i>3. Compare air_time with the duration between the departure and arrival. Explain your findings. (Hint: consider the location of the airport.)</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#how-does-the-average-delay-time-change-over-the-course-of-a-day-should-you-use-dep_time-or-sched_dep_time-why"><i class="fa fa-check"></i>4. How does the average delay time change over the course of a day? Should you use dep_time or sched_dep_time? Why?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#on-what-day-of-the-week-should-you-leave-if-you-want-to-minimise-the-chance-of-a-delay"><i class="fa fa-check"></i>5. On what day of the week should you leave if you want to minimise the chance of a delay?</a></li>
<li><a href="chapter-16-dates-and-times.html#what-makes-the-distribution-of-diamondscarat-and-flightssched_dep_time-similar">6. What makes the distribution of diamonds<span class="math inline">\(carat and flights\)</span>sched_dep_time similar?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#confirm-my-hypothesis-that-the-early-departures-of-flights-in-minutes-20-30-and-50-60-are-caused-by-scheduled-flights-that-leave-early.-hint-create-a-binary-variable-that-tells-you-whether-or-not-a-flight-was-delayed."><i class="fa fa-check"></i>7. Confirm my hypothesis that the early departures of flights in minutes 20-30 and 50-60 are caused by scheduled flights that leave early. Hint: create a binary variable that tells you whether or not a flight was delayed.</a></li>
</ul></li>
<li><a href="chapter-16-dates-and-times.html#exercises-49"><strong>16.4.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#why-is-there-months-but-no-dmonths"><i class="fa fa-check"></i>1. Why is there months() but no dmonths()?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#explain-daysovernight-1-to-someone-who-has-just-started-learning-r.-how-does-it-work"><i class="fa fa-check"></i>2. Explain days(overnight * 1) to someone who has just started learning R. How does it work?</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#create-a-vector-of-dates-giving-the-first-day-of-every-month-in-2015.-create-a-vector-of-dates-giving-the-first-day-of-every-month-in-the-current-year."><i class="fa fa-check"></i>3. Create a vector of dates giving the first day of every month in 2015. Create a vector of dates giving the first day of every month in the current year.</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#write-a-function-that-given-your-birthday-as-a-date-returns-how-old-you-are-in-years."><i class="fa fa-check"></i>4. Write a function that given your birthday (as a date), returns how old you are in years.</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#why-cant-today-today-years1-months1-work"><i class="fa fa-check"></i>5. Why can’t (today() %–% (today() + years(1)) / months(1) work?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Programming</b></span></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html"><i class="fa fa-check"></i>Chapter 19 - Functions</a><ul>
<li><a href="chapter-19-functions.html#exercises-50"><strong>19.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#why-is-true-not-a-parameter-to-rescale01-what-would-happen-if-x-contained-a-single-missing-value-and-na.rm-was-false"><i class="fa fa-check"></i>1. Why is TRUE not a parameter to rescale01()? What would happen if x contained a single missing value, and na.rm was FALSE?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#in-the-second-variant-of-rescale01-infinite-values-are-left-unchanged.-rewrite-rescale01-so-that--inf-is-mapped-to-0-and-inf-is-mapped-to-1."><i class="fa fa-check"></i>2. In the second variant of rescale01(), infinite values are left unchanged. Rewrite rescale01() so that -Inf is mapped to 0, and Inf is mapped to 1.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#practice-turning-the-following-code-snippets-into-functions.-think-about-what-each-function-does.-what-would-you-call-it-how-many-arguments-does-it-need-can-you-rewrite-it-to-be-more-expressive-or-less-duplicative"><i class="fa fa-check"></i>3. Practice turning the following code snippets into functions. Think about what each function does. What would you call it? How many arguments does it need? Can you rewrite it to be more expressive or less duplicative?</a></li>
<li><a href="chapter-19-functions.html#follow-httpnicercode.github.iointrowriting-functions.html-to-write-your-own-functions-to-compute-the-variance-and-skew-of-a-numeric-vector.">4. Follow <code>http://nicercode.github.io/intro/writing-functions.html</code> to write your own functions to compute the variance and skew of a numeric vector.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#write-both_na-a-function-that-takes-two-vectors-of-the-same-length-and-returns-the-number-of-positions-that-have-an-na-in-both-vectors."><i class="fa fa-check"></i>5. Write both_na(), a function that takes two vectors of the same length and returns the number of positions that have an NA in both vectors.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#what-do-the-following-functions-do-why-are-they-useful-even-though-they-are-so-short"><i class="fa fa-check"></i>6. What do the following functions do? Why are they useful even though they are so short?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#read-the-complete-lyrics-to-little-bunny-foo-foo.-theres-a-lot-of-duplication-in-this-song.-extend-the-initial-piping-example-to-recreate-the-complete-song-and-use-functions-to-reduce-the-duplication."><i class="fa fa-check"></i>7. Read the complete lyrics to “Little Bunny Foo Foo”. There’s a lot of duplication in this song. Extend the initial piping example to recreate the complete song, and use functions to reduce the duplication.</a></li>
</ul></li>
<li><a href="chapter-19-functions.html#exercises-51"><strong>19.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#read-the-source-code-for-each-of-the-following-three-functions-puzzle-out-what-they-do-and-then-brainstorm-better-names."><i class="fa fa-check"></i>1. Read the source code for each of the following three functions, puzzle out what they do, and then brainstorm better names.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#take-a-function-that-youve-written-recently-and-spend-5-minutes-brainstorming-a-better-name-for-it-and-its-arguments."><i class="fa fa-check"></i>2. Take a function that you’ve written recently and spend 5 minutes brainstorming a better name for it and its arguments.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#compare-and-contrast-rnorm-and-massmvrnorm.-how-could-you-make-them-more-consistent"><i class="fa fa-check"></i>3. Compare and contrast rnorm() and MASS::mvrnorm(). How could you make them more consistent?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#make-a-case-for-why-norm_r-norm_d-etc-would-be-better-than-rnorm-dnorm.-make-a-case-for-the-opposite."><i class="fa fa-check"></i>4. Make a case for why norm_r(), norm_d() etc would be better than rnorm(), dnorm(). Make a case for the opposite.</a></li>
</ul></li>
<li><a href="chapter-19-functions.html#exercises-52"><strong>19.4.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#whats-the-difference-between-if-and-ifelse-carefully-read-the-help-and-construct-three-examples-that-illustrate-the-key-differences."><i class="fa fa-check"></i>1. What’s the difference between if and ifelse()? Carefully read the help and construct three examples that illustrate the key differences.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#write-a-greeting-function-that-says-good-morning-good-afternoon-or-good-evening-depending-on-the-time-of-day.-hint-use-a-time-argument-that-defaults-to-lubridatenow.-that-will-make-it-easier-to-test-your-function."><i class="fa fa-check"></i>2. Write a greeting function that says “good morning”, “good afternoon”, or “good evening”, depending on the time of day. (Hint: use a time argument that defaults to lubridate::now(). That will make it easier to test your function.)</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#implement-a-fizzbuzz-function.-it-takes-a-single-number-as-input.-if-the-number-is-divisible-by-three-it-returns-fizz.-if-its-divisible-by-five-it-returns-buzz.-if-its-divisible-by-three-and-five-it-returns-fizzbuzz.-otherwise-it-returns-the-number.-make-sure-you-first-write-working-code-before-you-create-the-function."><i class="fa fa-check"></i>3. Implement a fizzbuzz function. It takes a single number as input. If the number is divisible by three, it returns “fizz”. If it’s divisible by five it returns “buzz”. If it’s divisible by three and five, it returns “fizzbuzz”. Otherwise, it returns the number. Make sure you first write working code before you create the function.</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#how-could-you-use-cut-to-simplify-this-set-of-nested-if-else-statements"><i class="fa fa-check"></i>4. How could you use cut() to simplify this set of nested if-else statements?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#what-happens-if-you-use-switch-with-numeric-values"><i class="fa fa-check"></i>5. What happens if you use switch() with numeric values?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#what-does-this-switch-call-do-what-happens-if-x-is-e"><i class="fa fa-check"></i>6. What does this switch() call do? What happens if x is “e”?</a></li>
</ul></li>
<li><a href="chapter-19-functions.html#exercises-53"><strong>19.5.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#what-does-commasletters-collapse---do-why"><i class="fa fa-check"></i>1. What does commas(letters, collapse = “-”) do? Why?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#itd-be-nice-if-you-could-supply-multiple-characters-to-the-pad-argument-e.g.ruletitle-pad--.-why-doesnt-this-currently-work-how-could-you-fix-it"><i class="fa fa-check"></i>2. It’d be nice if you could supply multiple characters to the pad argument, e.g. rule(“Title”, pad = “-+”). Why doesn’t this currently work? How could you fix it?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#what-does-the-trim-argument-to-mean-do-when-might-you-use-it"><i class="fa fa-check"></i>3. What does the trim argument to mean() do? When might you use it?</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#the-default-value-for-the-method-argument-to-cor-is-cpearson-kendall-spearman.-what-does-that-mean-what-value-is-used-by-default"><i class="fa fa-check"></i>4. The default value for the method argument to cor() is c(“pearson”, “kendall”, “spearman”). What does that mean? What value is used by default?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html"><i class="fa fa-check"></i>Chapter 20 - Vectors</a><ul>
<li><a href="chapter-20-vectors.html#exercises-54"><strong>20.3.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#describe-the-difference-between-is.finitex-and-is.infinitex."><i class="fa fa-check"></i>1. Describe the difference between is.finite(x) and !is.infinite(x).</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#read-the-source-code-for-dplyrnear-hint-to-see-the-source-code-drop-the-.-how-does-it-work"><i class="fa fa-check"></i>2. Read the source code for dplyr::near() (Hint: to see the source code, drop the ()). How does it work?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#a-logical-vector-can-take-3-possible-values.-how-many-possible-values-can-an-integer-vector-take-how-many-possible-values-can-a-double-take-use-google-to-do-some-research."><i class="fa fa-check"></i>3. A logical vector can take 3 possible values. How many possible values can an integer vector take? How many possible values can a double take? Use google to do some research.</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#brainstorm-at-least-four-functions-that-allow-you-to-convert-a-double-to-an-integer.-how-do-they-differ-be-precise."><i class="fa fa-check"></i>4. Brainstorm at least four functions that allow you to convert a double to an integer. How do they differ? Be precise.</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#what-functions-from-the-readr-package-allow-you-to-turn-a-string-into-logical-integer-and-double-vector"><i class="fa fa-check"></i>5. What functions from the readr package allow you to turn a string into logical, integer, and double vector?</a></li>
</ul></li>
<li><a href="chapter-20-vectors.html#exercises-55"><strong>20.4.6</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#what-does-meanis.nax-tell-you-about-a-vector-x-what-about-sumis.finitex"><i class="fa fa-check"></i>1. What does mean(is.na(x)) tell you about a vector x? What about sum(!is.finite(x))?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#carefully-read-the-documentation-of-is.vector.-what-does-it-actually-test-for-why-does-is.atomic-not-agree-with-the-definition-of-atomic-vectors-above"><i class="fa fa-check"></i>2. Carefully read the documentation of is.vector(). What does it actually test for? Why does is.atomic() not agree with the definition of atomic vectors above?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#compare-and-contrast-setnames-with-purrrset_names."><i class="fa fa-check"></i>3. Compare and contrast setNames() with purrr::set_names().</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#create-functions-that-take-a-vector-as-input-and-returns"><i class="fa fa-check"></i>4. Create functions that take a vector as input and returns:</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#why-is-x-whichx-0-not-the-same-as-xx-0"><i class="fa fa-check"></i>5. Why is x[-which(x &gt; 0)] not the same as x[x &lt;= 0]?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#what-happens-when-you-subset-with-a-positive-integer-thats-bigger-than-the-length-of-the-vector-what-happens-when-you-subset-with-a-name-that-doesnt-exist"><i class="fa fa-check"></i>6. What happens when you subset with a positive integer that’s bigger than the length of the vector? What happens when you subset with a name that doesn’t exist?</a></li>
</ul></li>
<li><a href="chapter-20-vectors.html#exercises-56"><strong>20.5.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#draw-the-following-lists-as-nested-sets"><i class="fa fa-check"></i>1. Draw the following lists as nested sets:</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#what-happens-if-you-subset-a-tibble-as-if-youre-subsetting-a-list-what-are-the-key-differences-between-a-list-and-a-tibble"><i class="fa fa-check"></i>2. What happens if you subset a tibble as if you’re subsetting a list? What are the key differences between a list and a tibble?</a></li>
</ul></li>
<li><a href="chapter-20-vectors.html#exercises-57"><strong>20.7.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#what-does-hmshms3600-return-how-does-it-print-what-primitive-type-is-the-augmented-vector-built-on-top-of-what-attributes-does-it-use"><i class="fa fa-check"></i>1. What does hms::hms(3600) return? How does it print? What primitive type is the augmented vector built on top of? What attributes does it use?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#try-and-make-a-tibble-that-has-columns-with-different-lengths.-what-happens"><i class="fa fa-check"></i>2. Try and make a tibble that has columns with different lengths. What happens?</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#based-on-the-definition-above-is-it-ok-to-have-a-list-as-a-column-of-a-tibble"><i class="fa fa-check"></i>3. Based on the definition above, is it ok to have a list as a column of a tibble?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html"><i class="fa fa-check"></i>Chapter 21 - Iteration</a><ul>
<li><a href="chapter-21-iteration.html#exercises-58"><strong>21.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#write-for-loops-to"><i class="fa fa-check"></i>1. Write for loops to:</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#eliminate-the-for-loop-in-each-of-the-following-examples-by-taking-advantage-of-an-existing-function-that-works-with-vectors"><i class="fa fa-check"></i>2. Eliminate the for loop in each of the following examples by taking advantage of an existing function that works with vectors:</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#combine-your-function-writing-and-for-loop-skills"><i class="fa fa-check"></i>3. Combine your function writing and for loop skills:</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#its-common-to-see-for-loops-that-dont-preallocate-the-output-and-instead-increase-the-length-of-a-vector-at-each-step"><i class="fa fa-check"></i>4. It’s common to see for loops that don’t preallocate the output and instead increase the length of a vector at each step:</a></li>
</ul></li>
<li><a href="chapter-21-iteration.html#exercises-59"><strong>21.3.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#imagine-you-have-a-directory-full-of-csv-files-that-you-want-to-read-in.-you-have-their-paths-in-a-vector-files---dirdata-pattern-.csv-full.names-true-and-now-want-to-read-each-one-with-read_csv.-write-the-for-loop-that-will-load-them-into-a-single-data-frame."><i class="fa fa-check"></i>1. Imagine you have a directory full of CSV files that you want to read in. You have their paths in a vector, files &lt;- dir(“data/”, pattern = “\.csv$”, full.names = TRUE), and now want to read each one with read_csv(). Write the for loop that will load them into a single data frame.</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#what-happens-if-you-use-for-nm-in-namesx-and-x-has-no-names-what-if-only-some-of-the-elements-are-named-what-if-the-names-are-not-unique"><i class="fa fa-check"></i>2. What happens if you use for (nm in names(x)) and x has no names? What if only some of the elements are named? What if the names are not unique?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#write-a-function-that-prints-the-mean-of-each-numeric-column-in-a-data-frame-along-with-its-name.-for-example-show_meaniris-would-print"><i class="fa fa-check"></i>3. Write a function that prints the mean of each numeric column in a data frame, along with its name. For example, show_mean(iris) would print:</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#what-does-this-code-do-how-does-it-work"><i class="fa fa-check"></i>4. What does this code do? How does it work?</a></li>
</ul></li>
<li><a href="chapter-21-iteration.html#exercises-60"><strong>21.4.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#read-the-documentation-for-apply.-in-the-2d-case-what-two-for-loops-does-it-generalise"><i class="fa fa-check"></i>1. Read the documentation for apply(). In the 2d case, what two for loops does it generalise?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#adapt-col_summary-so-that-it-only-applies-to-numeric-columns.-you-might-want-to-start-with-an-is_numeric-function-that-returns-a-logical-vector-that-has-a-true-corresponding-to-each-numeric-column."><i class="fa fa-check"></i>2. Adapt col_summary() so that it only applies to numeric columns. You might want to start with an is_numeric() function that returns a logical vector that has a TRUE corresponding to each numeric column.</a></li>
</ul></li>
<li><a href="chapter-21-iteration.html#exercises-61"><strong>21.5.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#write-code-that-uses-one-of-the-map-functions-to"><i class="fa fa-check"></i>1. Write code that uses one of the map functions to:</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#how-can-you-create-a-single-vector-that-for-each-column-in-a-data-frame-indicates-whether-or-not-its-a-factor"><i class="fa fa-check"></i>2. How can you create a single vector that for each column in a data frame indicates whether or not it’s a factor?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#what-happens-when-you-use-the-map-functions-on-vectors-that-arent-lists-what-does-map15-runif-do-why"><i class="fa fa-check"></i>3. What happens when you use the map functions on vectors that aren’t lists? What does map(1:5, runif) do? Why?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#what-does-map-22-rnorm-n-5-do-why-what-does-map_dbl-22-rnorm-n-5-do-why"><i class="fa fa-check"></i>4. What does map(-2:2, rnorm, n = 5) do? Why? What does map_dbl(-2:2, rnorm, n = 5) do? Why?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#rewrite-mapx-functiondf-lmmpg-wt-data-df-to-eliminate-the-anonymous-function."><i class="fa fa-check"></i>5. Rewrite map(x, function(df) lm(mpg ~ wt, data = df)) to eliminate the anonymous function.</a></li>
</ul></li>
<li><a href="chapter-21-iteration.html#exercises-62"><strong>21.9.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#implement-your-own-version-of-every-using-a-for-loop.-compare-it-with-purrrevery.-what-does-purrrs-version-do-that-your-version-doesnt"><i class="fa fa-check"></i>1. Implement your own version of every() using a for loop. Compare it with purrr::every(). What does purrr’s version do that your version doesn’t?</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#create-an-enhanced-col_summary-that-applies-a-summary-function-to-every-numeric-column-in-a-data-frame."><i class="fa fa-check"></i>2. Create an enhanced col_summary() that applies a summary function to every numeric column in a data frame.</a></li>
<li class="chapter" data-level="" data-path="chapter-21-iteration.html"><a href="chapter-21-iteration.html#a-possible-base-r-equivalent-of-col_summary-is"><i class="fa fa-check"></i>3. A possible base R equivalent of col_summary() is:</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Modeling</b></span></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html"><i class="fa fa-check"></i>Chapter 23 - Model basics</a><ul>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#notes---making-simple-models"><i class="fa fa-check"></i>Notes - making simple models</a></li>
<li><a href="chapter-23-model-basics.html#exercises-63"><strong>23.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#one-downside-of-the-linear-model-is-that-it-is-sensitive-to-unusual-values-because-the-distance-incorporates-a-squared-term.-fit-a-linear-model-to-the-simulated-data-below-and-visualise-the-results.-rerun-a-few-times-to-generate-different-simulated-datasets.-what-do-you-notice-about-the-model"><i class="fa fa-check"></i>1. One downside of the linear model is that it is sensitive to unusual values because the distance incorporates a squared term. Fit a linear model to the simulated data below, and visualise the results. Rerun a few times to generate different simulated datasets. What do you notice about the model?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#one-way-to-make-linear-models-more-robust-is-to-use-a-different-distance-measure.-for-example-instead-of-root-mean-squared-distance-you-could-use-mean-absolute-distance"><i class="fa fa-check"></i>2. One way to make linear models more robust is to use a different distance measure. For example, instead of root-mean-squared distance, you could use mean-absolute distance:</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#one-challenge-with-performing-numerical-optimisation-is-that-its-only-guaranteed-to-find-one-local-optimum.-whats-the-problem-with-optimising-a-three-parameter-model-like-this"><i class="fa fa-check"></i>3. One challenge with performing numerical optimisation is that it’s only guaranteed to find one local optimum. What’s the problem with optimising a three parameter model like this?</a></li>
</ul></li>
<li><a href="chapter-23-model-basics.html#exercises-64"><strong>23.3.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#instead-of-using-lm-to-fit-a-straight-line-you-can-use-loess-to-fit-a-smooth-curve.-repeat-the-process-of-model-fitting-grid-generation-predictions-and-visualisation-on-sim1-using-loess-instead-of-lm.-how-does-the-result-compare-to-geom_smooth"><i class="fa fa-check"></i>1. Instead of using lm() to fit a straight line, you can use loess() to fit a smooth curve. Repeat the process of model fitting, grid generation, predictions, and visualisation on sim1 using loess() instead of lm(). How does the result compare to geom_smooth()?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#add_predictions-is-paired-with-gather_predictions-and-spread_predictions.-how-do-these-three-functions-differ"><i class="fa fa-check"></i>2. add_predictions() is paired with gather_predictions() and spread_predictions(). How do these three functions differ?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#what-does-geom_ref_line-do-what-package-does-it-come-from-why-is-displaying-a-reference-line-in-plots-showing-residuals-useful-and-important"><i class="fa fa-check"></i>3. What does geom_ref_line() do? What package does it come from? Why is displaying a reference line in plots showing residuals useful and important?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#why-might-you-want-to-look-at-a-frequency-polygon-of-absolute-residuals-what-are-the-pros-and-cons-compared-to-looking-at-the-raw-residuals"><i class="fa fa-check"></i>4. Why might you want to look at a frequency polygon of absolute residuals? What are the pros and cons compared to looking at the raw residuals?</a></li>
</ul></li>
<li><a href="chapter-23-model-basics.html#exercises-65"><strong>23.4.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#what-happens-if-you-repeat-the-analysis-of-sim2-using-a-model-without-an-intercept.-what-happens-to-the-model-equation-what-happens-to-the-predictions"><i class="fa fa-check"></i>1. What happens if you repeat the analysis of sim2 using a model without an intercept. What happens to the model equation? What happens to the predictions?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#use-model_matrix-to-explore-the-equations-generated-for-the-models-i-fit-to-sim3-and-sim4.-why-is-a-good-shorthand-for-interaction"><i class="fa fa-check"></i>2. Use model_matrix() to explore the equations generated for the models I fit to sim3 and sim4. Why is * a good shorthand for interaction?</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#using-the-basic-principles-convert-the-formulas-in-the-following-two-models-into-functions.-hint-start-by-converting-the-categorical-variable-into-0-1-variables."><i class="fa fa-check"></i>3. Using the basic principles, convert the formulas in the following two models into functions. (Hint: start by converting the categorical variable into 0-1 variables.)</a></li>
<li class="chapter" data-level="" data-path="chapter-23-model-basics.html"><a href="chapter-23-model-basics.html#for-sim4-which-of-mod1-and-mod2-is-better-i-think-mod2-does-a-slightly-better-job-at-removing-patterns-but-its-pretty-subtle.-can-you-come-up-with-a-plot-to-support-my-claim"><i class="fa fa-check"></i>4. For sim4, which of mod1 and mod2 is better? I think mod2 does a slightly better job at removing patterns, but it’s pretty subtle. Can you come up with a plot to support my claim?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html"><i class="fa fa-check"></i>Chapter 24 - Model building</a><ul>
<li><a href="chapter-24-model-building.html#exercises-66"><strong>24.2.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#in-the-plot-of-lcarat-vs.lprice-there-are-some-bright-vertical-strips.-what-do-they-represent"><i class="fa fa-check"></i>1. In the plot of lcarat vs. lprice, there are some bright vertical strips. What do they represent?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#if-logprice-a_0-a_1-logcarat-what-does-that-say-about-the-relationship-between-price-and-carat"><i class="fa fa-check"></i>2. If log(price) = a_0 + a_1 * log(carat), what does that say about the relationship between price and carat?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#extract-the-diamonds-that-have-very-high-and-very-low-residuals.-is-there-anything-unusual-about-these-diamonds-are-they-particularly-bad-or-good-or-do-you-think-these-are-pricing-errors"><i class="fa fa-check"></i>3. Extract the diamonds that have very high and very low residuals. Is there anything unusual about these diamonds? Are they particularly bad or good, or do you think these are pricing errors?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#does-the-final-model-mod_diamond2-do-a-good-job-of-predicting-diamond-prices-would-you-trust-it-to-tell-you-how-much-to-spend-if-you-were-buying-a-diamond"><i class="fa fa-check"></i>4. Does the final model, mod_diamond2, do a good job of predicting diamond prices? Would you trust it to tell you how much to spend if you were buying a diamond?</a></li>
</ul></li>
<li><a href="chapter-24-model-building.html#exercises-67"><strong>24.3.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#use-your-google-sleuthing-skills-to-brainstorm-why-there-were-fewer-than-expected-flights-on-jan-20-may-26-and-sep-1.-hint-they-all-have-the-same-explanation.-how-would-these-days-generalise-to-another-year"><i class="fa fa-check"></i>1. Use your Google sleuthing skills to brainstorm why there were fewer than expected flights on Jan 20, May 26, and Sep 1. (Hint: they all have the same explanation.) How would these days generalise to another year?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#what-do-the-three-days-with-high-positive-residuals-represent-how-would-these-days-generalise-to-another-year"><i class="fa fa-check"></i>2. What do the three days with high positive residuals represent? How would these days generalise to another year?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#create-a-new-variable-that-splits-the-wday-variable-into-terms-but-only-for-saturdays-i.e.it-should-have-thurs-fri-but-sat-summer-sat-spring-sat-fall.-how-does-this-model-compare-with-the-model-with-every-combination-of-wday-and-term"><i class="fa fa-check"></i>3. Create a new variable that splits the wday variable into terms, but only for Saturdays, i.e. it should have Thurs, Fri, but Sat-summer, Sat-spring, Sat-fall. How does this model compare with the model with every combination of wday and term?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#create-a-new-wday-variable-that-combines-the-day-of-week-term-for-saturdays-and-public-holidays.-what-do-the-residuals-of-that-model-look-like"><i class="fa fa-check"></i>4. Create a new wday variable that combines the day of week, term (for Saturdays), and public holidays. What do the residuals of that model look like?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#what-happens-if-you-fit-a-day-of-week-effect-that-varies-by-month-i.e.n-wday-month-why-is-this-not-very-helpful"><i class="fa fa-check"></i>5. What happens if you fit a day of week effect that varies by month (i.e. n ~ wday * month)? Why is this not very helpful?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#what-would-you-expect-the-model-n-wday-nsdate-5-to-look-like-knowing-what-you-know-about-the-data-why-would-you-expect-it-to-be-not-particularly-effective"><i class="fa fa-check"></i>6. What would you expect the model n ~ wday + ns(date, 5) to look like? Knowing what you know about the data, why would you expect it to be not particularly effective?</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#we-hypothesised-that-people-leaving-on-sundays-are-more-likely-to-be-business-travellers-who-need-to-be-somewhere-on-monday.-explore-that-hypothesis-by-seeing-how-it-breaks-down-based-on-distance-and-time-if-its-true-youd-expect-to-see-more-sunday-evening-flights-to-places-that-are-far-away."><i class="fa fa-check"></i>7. We hypothesised that people leaving on Sundays are more likely to be business travellers who need to be somewhere on Monday. Explore that hypothesis by seeing how it breaks down based on distance and time: if it’s true, you’d expect to see more Sunday evening flights to places that are far away.</a></li>
<li class="chapter" data-level="" data-path="chapter-24-model-building.html"><a href="chapter-24-model-building.html#its-a-little-frustrating-that-sunday-and-saturday-are-on-separate-ends-of-the-plot.-write-a-small-function-to-set-the-levels-of-the-factor-so-that-the-week-starts-on-monday."><i class="fa fa-check"></i>8. It’s a little frustrating that Sunday and Saturday are on separate ends of the plot. Write a small function to set the levels of the factor so that the week starts on Monday.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html"><i class="fa fa-check"></i>Chapter 25 - Many models</a><ul>
<li><a href="chapter-25-many-models.html#exercises-68"><strong>25.2.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#a-linear-trend-seems-to-be-slightly-too-simple-for-the-overall-trend.-can-you-do-better-with-a-quadratic-polynomial-how-can-you-interpret-the-coefficients-of-the-quadratic-hint-you-might-want-to-transform-year-so-that-it-has-mean-zero."><i class="fa fa-check"></i>1. A linear trend seems to be slightly too simple for the overall trend. Can you do better with a quadratic polynomial? How can you interpret the coefficients of the quadratic? (Hint you might want to transform year so that it has mean zero.)</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#explore-other-methods-for-visualising-the-distribution-of-r2-per-continent.-you-might-want-to-try-the-ggbeeswarm-package-which-provides-similar-methods-for-avoiding-overlaps-as-jitter-but-uses-deterministic-methods."><i class="fa fa-check"></i>2. Explore other methods for visualising the distribution of R2 per continent. You might want to try the ggbeeswarm package, which provides similar methods for avoiding overlaps as jitter, but uses deterministic methods.</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#to-create-the-last-plot-showing-the-data-for-the-countries-with-the-worst-model-fits-we-needed-two-steps-we-created-a-data-frame-with-one-row-per-country-and-then-semi-joined-it-to-the-original-dataset.-its-possible-to-avoid-this-join-if-we-use-unnest-instead-of-unnest.drop-true.-how"><i class="fa fa-check"></i>3. To create the last plot (showing the data for the countries with the worst model fits), we needed two steps: we created a data frame with one row per country and then semi-joined it to the original dataset. It’s possible to avoid this join if we use unnest() instead of unnest(.drop = TRUE). How?</a></li>
</ul></li>
<li><a href="chapter-25-many-models.html#exercises-69"><strong>25.4.5</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#list-all-the-functions-that-you-can-think-of-that-take-a-atomic-vector-and-return-a-list."><i class="fa fa-check"></i>1. List all the functions that you can think of that take a atomic vector and return a list.</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#brainstorm-useful-summary-functions-that-like-quantile-return-multiple-values."><i class="fa fa-check"></i>2. Brainstorm useful summary functions that, like quantile(), return multiple values.</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#whats-missing-in-the-following-data-frame-how-does-quantile-return-that-missing-piece-why-isnt-that-helpful-here"><i class="fa fa-check"></i>3. What’s missing in the following data frame? How does quantile() return that missing piece? Why isn’t that helpful here?</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#what-does-this-code-do-why-might-might-it-be-useful"><i class="fa fa-check"></i>4. What does this code do? Why might might it be useful?</a></li>
</ul></li>
<li><a href="chapter-25-many-models.html#exercises-70"><strong>25.5.3</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#why-might-the-lengths-function-be-useful-for-creating-atomic-vector-columns-from-list-columns"><i class="fa fa-check"></i>1. Why might the lengths() function be useful for creating atomic vector columns from list-columns?</a></li>
<li class="chapter" data-level="" data-path="chapter-25-many-models.html"><a href="chapter-25-many-models.html#list-the-most-common-types-of-vector-found-in-a-data-frame.-what-makes-lists-different"><i class="fa fa-check"></i>2. List the most common types of vector found in a data frame. What makes lists different?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Communicate</b></span></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html"><i class="fa fa-check"></i>Chapter 27 - R Markdown</a><ul>
<li><a href="chapter-27-r-markdown.html#exercises-71"><strong>27.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#create-a-new-notebook-using-file-new-file-r-notebook.-read-the-instructions.-practice-running-the-chunks.-verify-that-you-can-modify-the-code-re-run-it-and-see-modified-output."><i class="fa fa-check"></i>1. Create a new notebook using File &gt; New File &gt; R Notebook. Read the instructions. Practice running the chunks. Verify that you can modify the code, re-run it, and see modified output.</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#create-a-new-r-markdown-document-with-file-new-file-r-markdown-knit-it-by-clicking-the-appropriate-button.-knit-it-by-using-the-appropriate-keyboard-short-cut.-verify-that-you-can-modify-the-input-and-see-the-output-update."><i class="fa fa-check"></i>2. Create a new R Markdown document with File &gt; New File &gt; R Markdown… Knit it by clicking the appropriate button. Knit it by using the appropriate keyboard short cut. Verify that you can modify the input and see the output update.</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#compare-and-contrast-the-r-notebook-and-r-markdown-files-you-created-above.-how-are-the-outputs-similar-how-are-they-different-how-are-the-inputs-similar-how-are-they-different-what-happens-if-you-copy-the-yaml-header-from-one-to-the-other"><i class="fa fa-check"></i>3. Compare and contrast the R notebook and R markdown files you created above. How are the outputs similar? How are they different? How are the inputs similar? How are they different? What happens if you copy the YAML header from one to the other?</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#create-one-new-r-markdown-document-for-each-of-the-three-built-in-formats-html-pdf-and-word.-knit-each-of-the-three-documents.-how-does-the-output-differ-how-does-the-input-differ-you-may-need-to-install-latex-in-order-to-build-the-pdf-output-rstudio-will-prompt-you-if-this-is-necessary."><i class="fa fa-check"></i>4. Create one new R Markdown document for each of the three built-in formats: HTML, PDF and Word. Knit each of the three documents. How does the output differ? How does the input differ? (You may need to install LaTeX in order to build the PDF output — RStudio will prompt you if this is necessary.)</a></li>
</ul></li>
<li><a href="chapter-27-r-markdown.html#exercises-72"><strong>27.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#practice-what-youve-learned-by-creating-a-brief-cv.-the-title-should-be-your-name-and-you-should-include-headings-for-at-least-education-or-employment.-each-of-the-sections-should-include-a-bulleted-list-of-jobsdegrees.-highlight-the-year-in-bold."><i class="fa fa-check"></i>1. Practice what you’ve learned by creating a brief CV. The title should be your name, and you should include headings for (at least) education or employment. Each of the sections should include a bulleted list of jobs/degrees. Highlight the year in bold.</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#using-the-r-markdown-quick-reference-figure-out-how-to"><i class="fa fa-check"></i>2. Using the R Markdown quick reference, figure out how to:</a></li>
<li><a href="chapter-27-r-markdown.html#copy-and-paste-the-contents-of-diamond-sizes.rmd-from-httpsgithub.comhadleyr4dstreemasterrmarkdown-in-to-a-local-r-markdown-document.-check-that-you-can-run-it-then-add-text-after-the-frequency-polygon-that-describes-its-most-striking-features.">3. Copy and paste the contents of diamond-sizes.Rmd from <code>https://github.com/hadley/r4ds/tree/master/rmarkdown</code> in to a local R markdown document. Check that you can run it, then add text after the frequency polygon that describes its most striking features.</a></li>
</ul></li>
<li><a href="chapter-27-r-markdown.html#exercises-73"><strong>27.4.7</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#add-a-section-that-explores-how-diamond-sizes-vary-by-cut-colour-and-clarity.-assume-youre-writing-a-report-for-someone-who-doesnt-know-r-and-instead-of-setting-echo-false-on-each-chunk-set-a-global-option."><i class="fa fa-check"></i>1. Add a section that explores how diamond sizes vary by cut, colour, and clarity. Assume you’re writing a report for someone who doesn’t know R, and instead of setting echo = FALSE on each chunk, set a global option.</a></li>
<li><a href="chapter-27-r-markdown.html#download-diamond-sizes.rmd-from-httpsgithub.comhadleyr4dstreemasterrmarkdown.-add-a-section-that-describes-the-largest-20-diamonds-including-a-table-that-displays-their-most-important-attributes.">2. Download diamond-sizes.Rmd from <code>https://github.com/hadley/r4ds/tree/master/rmarkdown</code>. Add a section that describes the largest 20 diamonds, including a table that displays their most important attributes.</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#modify-diamonds-sizes.rmd-to-use-comma-to-produce-nicely-formatted-output.-also-include-the-percentage-of-diamonds-that-are-larger-than-2.5-carats."><i class="fa fa-check"></i>3. Modify diamonds-sizes.Rmd to use comma() to produce nicely formatted output. Also include the percentage of diamonds that are larger than 2.5 carats.</a></li>
<li class="chapter" data-level="" data-path="chapter-27-r-markdown.html"><a href="chapter-27-r-markdown.html#set-up-a-network-of-chunks-where-d-depends-on-c-and-b-and-both-b-and-c-depend-on-a.-have-each-chunk-print-lubridatenow-set-cache-true-then-verify-your-understanding-of-caching."><i class="fa fa-check"></i>4. Set up a network of chunks where d depends on c and b, and both b and c depend on a. Have each chunk print lubridate::now(), set cache = TRUE, then verify your understanding of caching.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html"><i class="fa fa-check"></i>Chapter 28 - Graphics for communication</a><ul>
<li><a href="chapter-28-graphics-for-communication.html#exercises-74"><strong>28.2.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#create-one-plot-on-the-fuel-economy-data-with-customised-title-subtitle-caption-x-y-and-colour-labels."><i class="fa fa-check"></i>1. Create one plot on the fuel economy data with customised title, subtitle, caption, x, y, and colour labels.</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#the-geom_smooth-is-somewhat-misleading-because-the-hwy-for-large-engines-is-skewed-upwards-due-to-the-inclusion-of-lightweight-sports-cars-with-big-engines.-use-your-modelling-tools-to-fit-and-display-a-better-model."><i class="fa fa-check"></i>2. The geom_smooth() is somewhat misleading because the hwy for large engines is skewed upwards due to the inclusion of lightweight sports cars with big engines. Use your modelling tools to fit and display a better model.</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#take-an-exploratory-graphic-that-youve-created-in-the-last-month-and-add-informative-titles-to-make-it-easier-for-others-to-understand."><i class="fa fa-check"></i>3. Take an exploratory graphic that you’ve created in the last month, and add informative titles to make it easier for others to understand.</a></li>
</ul></li>
<li><a href="chapter-28-graphics-for-communication.html#exercises-75"><strong>28.3.1</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#use-geom_text-with-infinite-positions-to-place-text-at-the-four-corners-of-the-plot."><i class="fa fa-check"></i>1. Use geom_text() with infinite positions to place text at the four corners of the plot.</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#read-the-documentation-for-annotate.-how-can-you-use-it-to-add-a-text-label-to-a-plot-without-having-to-create-a-tibble"><i class="fa fa-check"></i>2. Read the documentation for annotate(). How can you use it to add a text label to a plot without having to create a tibble?</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#how-do-labels-with-geom_text-interact-with-faceting-how-can-you-add-a-label-to-a-single-facet-how-can-you-put-a-different-label-in-each-facet-hint-think-about-the-underlying-data."><i class="fa fa-check"></i>3. How do labels with geom_text() interact with faceting? How can you add a label to a single facet? How can you put a different label in each facet? (Hint: think about the underlying data.)</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#what-arguments-to-geom_label-control-the-appearance-of-the-background-box"><i class="fa fa-check"></i>4. What arguments to geom_label() control the appearance of the background box?</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#what-are-the-four-arguments-to-arrow-how-do-they-work-create-a-series-of-plots-that-demonstrate-the-most-important-options."><i class="fa fa-check"></i>5. What are the four arguments to arrow()? How do they work? Create a series of plots that demonstrate the most important options.</a></li>
</ul></li>
<li><a href="chapter-28-graphics-for-communication.html#exercises-76"><strong>28.4.4</strong> Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#why-doesnt-the-following-code-override-the-default-scale"><i class="fa fa-check"></i>1. Why doesn’t the following code override the default scale?</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#what-is-the-first-argument-to-every-scale-how-does-it-compare-to-labs"><i class="fa fa-check"></i>2. What is the first argument to every scale? How does it compare to labs()?</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#change-the-display-of-the-presidential-terms-by"><i class="fa fa-check"></i>3. Change the display of the presidential terms by:</a></li>
<li class="chapter" data-level="" data-path="chapter-28-graphics-for-communication.html"><a href="chapter-28-graphics-for-communication.html#use-override.aes-to-make-the-legend-on-the-following-plot-easier-to-see."><i class="fa fa-check"></i>4. Use override.aes to make the legend on the following plot easier to see.</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Science Walkthrough</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-5---data-transformation" class="section level1 unnumbered">
<h1>Chapter 5 - Data transformation</h1>
<p>The data that we will work with in chapter 5 is from the nycflights13 package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(nycflights13)</code></pre></div>
<div id="notes---filter-rows-with-filter" class="section level2 unnumbered">
<h2><strong>5.2</strong> Notes - Filter rows with filter()</h2>
<p>filter() will subset obervations based on their values. I think it works a lot like the which() function in base R (ie: data[which(data$variable &gt; value),] ). Below is a way to do the same thing using either filter() or base R which().</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># tidyverse filter() output</span>
<span class="kw">filter</span>(flights, month <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, day <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 842 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 832 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># base R way to get the same output</span>
flights[<span class="kw">which</span>(flights<span class="op">$</span>month <span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>flights<span class="op">$</span>day <span class="op">==</span><span class="dv">1</span>),]</code></pre></div>
<pre><code>## # A tibble: 842 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 832 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div id="comparisons" class="section level3 unnumbered">
<h3>5.2.1 Comparisons</h3>
<p>A safer way for comparing two numeric vectors is the near() function in dplyr. For example, if running this comparison:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>(<span class="dv">2</span>) <span class="op">^</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">/</span><span class="dv">49</span> <span class="op">*</span><span class="st"> </span><span class="dv">49</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>We see that what we would normally regard as true is specified as FALSE in R, due to floating point precision issues. The near() function will allow more tolerance.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">near</span>(<span class="kw">sqrt</span>(<span class="dv">2</span>) <span class="op">^</span><span class="st"> </span><span class="dv">2</span>,  <span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">near</span>(<span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">49</span> <span class="op">*</span><span class="st"> </span><span class="dv">49</span>, <span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="logical-operators" class="section level3 unnumbered">
<h3>5.2.2 Logical Operators</h3>
<p>There are many ways to combine “and”, <code>&amp;</code>, “or”, <code>|</code>, and “not”,<code>!</code> to filter out observations in a data table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#following two filter functions give same output</span>
<span class="kw">filter</span>(flights, month <span class="op">==</span><span class="st"> </span><span class="dv">11</span> <span class="op">|</span><span class="st"> </span>month <span class="op">==</span><span class="st"> </span><span class="dv">12</span>)</code></pre></div>
<pre><code>## # A tibble: 55,403 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013    11     1        5           2359         6      352
##  2  2013    11     1       35           2250       105      123
##  3  2013    11     1      455            500        -5      641
##  4  2013    11     1      539            545        -6      856
##  5  2013    11     1      542            545        -3      831
##  6  2013    11     1      549            600       -11      912
##  7  2013    11     1      550            600       -10      705
##  8  2013    11     1      554            600        -6      659
##  9  2013    11     1      554            600        -6      826
## 10  2013    11     1      554            600        -6      749
## # … with 55,393 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, month <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">11</span>,<span class="dv">12</span>))</code></pre></div>
<pre><code>## # A tibble: 55,403 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013    11     1        5           2359         6      352
##  2  2013    11     1       35           2250       105      123
##  3  2013    11     1      455            500        -5      641
##  4  2013    11     1      539            545        -6      856
##  5  2013    11     1      542            545        -3      831
##  6  2013    11     1      549            600       -11      912
##  7  2013    11     1      550            600       -10      705
##  8  2013    11     1      554            600        -6      659
##  9  2013    11     1      554            600        -6      826
## 10  2013    11     1      554            600        -6      749
## # … with 55,393 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#following two filter functions give same output</span>
<span class="kw">filter</span>(flights, <span class="op">!</span>(arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">120</span> <span class="op">|</span><span class="st"> </span>dep_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">120</span>))</code></pre></div>
<pre><code>## # A tibble: 316,050 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 316,040 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, arr_delay <span class="op">&lt;=</span><span class="st"> </span><span class="dv">120</span> <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>dep_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">120</span>)</code></pre></div>
<pre><code>## # A tibble: 316,050 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 316,040 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="missing-values" class="section level3 unnumbered">
<h3>5.2.3 Missing values</h3>
<p>Missing values are represented as NA. NA values are “contagious,” meaning that any operation or comparison with NA will also return NA. If a data frame contains NA values, they will not be returned by filter() unless specifically asked for, using is.na()</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">3</span>))
<span class="kw">filter</span>(df, x <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       x
##   &lt;dbl&gt;
## 1     3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&gt; # A tibble: 1 × 1</span>
<span class="co">#&gt;       x</span>
<span class="co">#&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1     3</span>
<span class="kw">filter</span>(df, <span class="kw">is.na</span>(x) <span class="op">|</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 2 x 1
##       x
##   &lt;dbl&gt;
## 1    NA
## 2     3</code></pre>
</div>
</div>
<div id="exercises-7" class="section level2 unnumbered">
<h2><strong>5.2.4</strong> Exercises</h2>
<div id="find-all-flights-that" class="section level3 unnumbered">
<h3>1. Find all flights that</h3>
<ul>
<li>Had an arrival delay of two or more hours</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># arr_delay is in minutes, so 120 for two hours</span>
<span class="kw">filter</span>(flights, arr_delay <span class="op">&gt;=</span><span class="st"> </span><span class="dv">120</span>)</code></pre></div>
<pre><code>## # A tibble: 10,200 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      811            630       101     1047
##  2  2013     1     1      848           1835       853     1001
##  3  2013     1     1      957            733       144     1056
##  4  2013     1     1     1114            900       134     1447
##  5  2013     1     1     1505           1310       115     1638
##  6  2013     1     1     1525           1340       105     1831
##  7  2013     1     1     1549           1445        64     1912
##  8  2013     1     1     1558           1359       119     1718
##  9  2013     1     1     1732           1630        62     2028
## 10  2013     1     1     1803           1620       103     2008
## # … with 10,190 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ul>
<li>Flew to Houston (IAH or HOU)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, dest <span class="op">==</span><span class="st"> &quot;IAH&quot;</span> <span class="op">|</span><span class="st"> </span>dest <span class="op">==</span><span class="st"> &quot;HOU&quot;</span>)</code></pre></div>
<pre><code>## # A tibble: 9,313 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      623            627        -4      933
##  4  2013     1     1      728            732        -4     1041
##  5  2013     1     1      739            739         0     1104
##  6  2013     1     1      908            908         0     1228
##  7  2013     1     1     1028           1026         2     1350
##  8  2013     1     1     1044           1045        -1     1352
##  9  2013     1     1     1114            900       134     1447
## 10  2013     1     1     1205           1200         5     1503
## # … with 9,303 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ul>
<li>Were operated by United, American, or Delta</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#find all unique carriers:</span>
<span class="kw">unique</span>(flights<span class="op">$</span>carrier)</code></pre></div>
<pre><code>##  [1] &quot;UA&quot; &quot;AA&quot; &quot;B6&quot; &quot;DL&quot; &quot;EV&quot; &quot;MQ&quot; &quot;US&quot; &quot;WN&quot; &quot;VX&quot; &quot;FL&quot; &quot;AS&quot; &quot;9E&quot; &quot;F9&quot; &quot;HA&quot;
## [15] &quot;YV&quot; &quot;OO&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Symbol for United = UA, American = AA, Delta = DL</span>
<span class="kw">filter</span> (flights, carrier <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;UA&quot;</span>, <span class="st">&quot;AA&quot;</span>,<span class="st">&quot;DL&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 139,504 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      554            600        -6      812
##  5  2013     1     1      554            558        -4      740
##  6  2013     1     1      558            600        -2      753
##  7  2013     1     1      558            600        -2      924
##  8  2013     1     1      558            600        -2      923
##  9  2013     1     1      559            600        -1      941
## 10  2013     1     1      559            600        -1      854
## # … with 139,494 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ul>
<li>Departed in summer (July, August, and September)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span> (flights, month <span class="op">&gt;=</span><span class="st"> </span><span class="dv">7</span> <span class="op">&amp;</span><span class="st"> </span>month <span class="op">&lt;=</span><span class="dv">9</span>)</code></pre></div>
<pre><code>## # A tibble: 86,326 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     7     1        1           2029       212      236
##  2  2013     7     1        2           2359         3      344
##  3  2013     7     1       29           2245       104      151
##  4  2013     7     1       43           2130       193      322
##  5  2013     7     1       44           2150       174      300
##  6  2013     7     1       46           2051       235      304
##  7  2013     7     1       48           2001       287      308
##  8  2013     7     1       58           2155       183      335
##  9  2013     7     1      100           2146       194      327
## 10  2013     7     1      100           2245       135      337
## # … with 86,316 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># test whether the output only has months 7 8 9 to check our work.</span>
<span class="kw">unique</span>(<span class="kw">filter</span> (flights, month <span class="op">&gt;=</span><span class="st"> </span><span class="dv">7</span> <span class="op">&amp;</span><span class="st"> </span>month <span class="op">&lt;=</span><span class="dv">9</span>)<span class="op">$</span>month)</code></pre></div>
<pre><code>## [1] 7 8 9</code></pre>
<ul>
<li>Arrived more than two hours late, but didn’t leave late</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span> (flights, arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">120</span>, dep_delay <span class="op">&lt;=</span><span class="dv">0</span>)</code></pre></div>
<pre><code>## # A tibble: 29 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1    27     1419           1420        -1     1754
##  2  2013    10     7     1350           1350         0     1736
##  3  2013    10     7     1357           1359        -2     1858
##  4  2013    10    16      657            700        -3     1258
##  5  2013    11     1      658            700        -2     1329
##  6  2013     3    18     1844           1847        -3       39
##  7  2013     4    17     1635           1640        -5     2049
##  8  2013     4    18      558            600        -2     1149
##  9  2013     4    18      655            700        -5     1213
## 10  2013     5    22     1827           1830        -3     2217
## # … with 19 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#looks like combining the two arguments into one does the same thing.</span>
<span class="kw">filter</span>(flights, arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">120</span> <span class="op">&amp;</span><span class="st"> </span>dep_delay <span class="op">&lt;=</span><span class="dv">0</span>)</code></pre></div>
<pre><code>## # A tibble: 29 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1    27     1419           1420        -1     1754
##  2  2013    10     7     1350           1350         0     1736
##  3  2013    10     7     1357           1359        -2     1858
##  4  2013    10    16      657            700        -3     1258
##  5  2013    11     1      658            700        -2     1329
##  6  2013     3    18     1844           1847        -3       39
##  7  2013     4    17     1635           1640        -5     2049
##  8  2013     4    18      558            600        -2     1149
##  9  2013     4    18      655            700        -5     1213
## 10  2013     5    22     1827           1830        -3     2217
## # … with 19 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ul>
<li>Were delayed by at least an hour, but made up over 30 minutes in flight</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># if delayed 60 minutes but made up at least 30, expect arr_delay to be less than 60-30 = 30 min</span>
<span class="kw">filter</span> (flights, dep_delay <span class="op">&gt;=</span><span class="st"> </span><span class="dv">60</span>, arr_delay <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>)</code></pre></div>
<pre><code>## # A tibble: 206 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     3     1850           1745        65     2148
##  2  2013     1     3     1950           1845        65     2228
##  3  2013     1     3     2015           1915        60     2135
##  4  2013     1     6     1019            900        79     1558
##  5  2013     1     7     1543           1430        73     1758
##  6  2013     1    11     1020            920        60     1311
##  7  2013     1    12     1706           1600        66     1949
##  8  2013     1    12     1953           1845        68     2154
##  9  2013     1    19     1456           1355        61     1636
## 10  2013     1    21     1531           1430        61     1843
## # … with 196 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ul>
<li>Departed between midnight and 6am (inclusive)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">times &lt;-<span class="st"> </span><span class="kw">filter</span> (flights, dep_time <span class="op">&gt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>dep_time <span class="op">&lt;=</span><span class="st"> </span><span class="dv">600</span>)
times</code></pre></div>
<pre><code>## # A tibble: 9,344 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 9,334 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#check if it worked</span>
<span class="kw">range</span>(times<span class="op">$</span>dep_time)</code></pre></div>
<pre><code>## [1]   1 600</code></pre>
<ul>
<li>Another useful dplyr filtering helper is between(). What does it do? Can you use it to simplify the code needed to answer the previous challenges?</li>
</ul>
<p>?between() states that this is a shortcut to perform the same function as <code>x &gt;= left &amp; x &lt;= right</code>, for <code>between(x, left, right)</code>. I will use between() to produce the same result as in the previous bullet point for flights departing between midnight and 6am.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, <span class="kw">between</span>(dep_time, <span class="dv">0</span>, <span class="dv">600</span>))</code></pre></div>
<pre><code>## # A tibble: 9,344 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 9,334 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="how-many-flights-have-a-missing-dep_time-what-other-variables-are-missing-what-might-these-rows-represent" class="section level3 unnumbered">
<h3>2. How many flights have a missing dep_time? What other variables are missing? What might these rows represent?</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, <span class="kw">is.na</span>(dep_time))</code></pre></div>
<pre><code>## # A tibble: 8,255 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1       NA           1630        NA       NA
##  2  2013     1     1       NA           1935        NA       NA
##  3  2013     1     1       NA           1500        NA       NA
##  4  2013     1     1       NA            600        NA       NA
##  5  2013     1     2       NA           1540        NA       NA
##  6  2013     1     2       NA           1620        NA       NA
##  7  2013     1     2       NA           1355        NA       NA
##  8  2013     1     2       NA           1420        NA       NA
##  9  2013     1     2       NA           1321        NA       NA
## 10  2013     1     2       NA           1545        NA       NA
## # … with 8,245 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>The flights with missing dep_time also have missing arr_time and air_time, suggesting that these were cancelled flights.</p>
</div>
<div id="why-is-na-0-not-missing-why-is-na-true-not-missing-why-is-false-na-not-missing-can-you-figure-out-the-general-rule-na-0-is-a-tricky-counterexample" class="section level3 unnumbered">
<h3>3. Why is NA ^ 0 not missing? Why is NA | TRUE not missing? Why is FALSE &amp; NA not missing? Can you figure out the general rule? (NA * 0 is a tricky counterexample!)</h3>
<p>Since NA represents an unknown value, it still obeys certain rules as if it were a known value. Since any number to the power of 0 is 1, NA^0 returns the value 1, which will make the code <code>filter(flights, dep_time == NA^0)</code> return all the flights that departed at time 0001. NA | TRUE is an expression that evaluates to TRUE, because the logical operator will evaluate whether either side has a TRUE value. This would return all the data points in the data frame. FALSE &amp; NA returns FALSE based on the same premise as the previous item. Since FALSE exists on either side of the &amp; logical operator, it is evaluated as FALSE. The general (but not concrete) rule is that modifying NA with a logical operator in the form <code>NA &lt;operator&gt; value</code> will evaluate to either TRUE or FALSE, returning not missing values, and that NA will still abide by certain rules that any value would abide by. NA*0, however, is an exception beacuse this still evaluates to NA, whereas other values would evaluate to 0.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">NA</span><span class="op">^</span><span class="dv">0</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">NA</span> <span class="op">|</span><span class="st"> </span><span class="ot">TRUE</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">FALSE</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">NA</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">NA</span><span class="op">*</span><span class="dv">0</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, dep_time <span class="op">==</span><span class="st"> </span><span class="ot">NA</span><span class="op">^</span><span class="dv">0</span>)</code></pre></div>
<pre><code>## # A tibble: 25 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1    13        1           2249        72      108
##  2  2013     1    31        1           2100       181      124
##  3  2013    11    13        1           2359         2      442
##  4  2013    12    16        1           2359         2      447
##  5  2013    12    20        1           2359         2      430
##  6  2013    12    26        1           2359         2      437
##  7  2013    12    30        1           2359         2      441
##  8  2013     2    11        1           2100       181      111
##  9  2013     2    24        1           2245        76      121
## 10  2013     3     8        1           2355         6      431
## # … with 15 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, dep_time <span class="op">==</span><span class="st"> </span><span class="ot">NA</span> <span class="op">|</span><span class="st"> </span><span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<div id="notes---arrange-rows-with-arrange" class="section level2 unnumbered">
<h2><strong>5.3</strong> Notes - Arrange rows with arrange()</h2>
<p>arrange() will return a data frame with the observations sorted by the variable you specify. It functions similarly to the order() function in base R. Below are two ways to get the same sorted dataframe using arrange() and order(). You can see that arrange() makes things a little simpler to read. For the base R order() function, it will only return a sorted list of values, so you have to pass them into the flights[] frame to obtain all the values for the sorted data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># using arrange()</span>
<span class="kw">arrange</span>(flights, <span class="kw">desc</span>(arr_delay))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     9      641            900      1301     1242
##  2  2013     6    15     1432           1935      1137     1607
##  3  2013     1    10     1121           1635      1126     1239
##  4  2013     9    20     1139           1845      1014     1457
##  5  2013     7    22      845           1600      1005     1044
##  6  2013     4    10     1100           1900       960     1342
##  7  2013     3    17     2321            810       911      135
##  8  2013     7    22     2257            759       898      121
##  9  2013    12     5      756           1700       896     1058
## 10  2013     5     3     1133           2055       878     1250
## # … with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># using base R order()</span>
flights[<span class="kw">order</span>(flights<span class="op">$</span>arr_delay, <span class="dt">decreasing =</span> T),]</code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     9      641            900      1301     1242
##  2  2013     6    15     1432           1935      1137     1607
##  3  2013     1    10     1121           1635      1126     1239
##  4  2013     9    20     1139           1845      1014     1457
##  5  2013     7    22      845           1600      1005     1044
##  6  2013     4    10     1100           1900       960     1342
##  7  2013     3    17     2321            810       911      135
##  8  2013     7    22     2257            759       898      121
##  9  2013    12     5      756           1700       896     1058
## 10  2013     5     3     1133           2055       878     1250
## # … with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>Missing values (NA) are placed at the end for arrange()</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="ot">NA</span>))
<span class="kw">arrange</span>(df, x)</code></pre></div>
<pre><code>## # A tibble: 3 x 1
##       x
##   &lt;dbl&gt;
## 1     2
## 2     5
## 3    NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">arrange</span>(df, <span class="kw">desc</span>(x))</code></pre></div>
<pre><code>## # A tibble: 3 x 1
##       x
##   &lt;dbl&gt;
## 1     5
## 2     2
## 3    NA</code></pre>
</div>
<div id="exercises-8" class="section level2 unnumbered">
<h2><strong>5.3.1</strong> Exercises</h2>
<div id="how-could-you-use-arrange-to-sort-all-missing-values-to-the-start-hint-use-is.na." class="section level3 unnumbered">
<h3>1. How could you use arrange() to sort all missing values to the start? (Hint: use is.na()).</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">arrange</span>(flights, <span class="kw">desc</span>(<span class="kw">is.na</span>(dep_time)))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1       NA           1630        NA       NA
##  2  2013     1     1       NA           1935        NA       NA
##  3  2013     1     1       NA           1500        NA       NA
##  4  2013     1     1       NA            600        NA       NA
##  5  2013     1     2       NA           1540        NA       NA
##  6  2013     1     2       NA           1620        NA       NA
##  7  2013     1     2       NA           1355        NA       NA
##  8  2013     1     2       NA           1420        NA       NA
##  9  2013     1     2       NA           1321        NA       NA
## 10  2013     1     2       NA           1545        NA       NA
## # … with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="sort-flights-to-find-the-most-delayed-flights.-find-the-flights-that-left-earliest." class="section level3 unnumbered">
<h3>2. Sort flights to find the most delayed flights. Find the flights that left earliest.</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># most delayed flights</span>
<span class="kw">arrange</span>(flights, <span class="kw">desc</span>(dep_delay))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     9      641            900      1301     1242
##  2  2013     6    15     1432           1935      1137     1607
##  3  2013     1    10     1121           1635      1126     1239
##  4  2013     9    20     1139           1845      1014     1457
##  5  2013     7    22      845           1600      1005     1044
##  6  2013     4    10     1100           1900       960     1342
##  7  2013     3    17     2321            810       911      135
##  8  2013     6    27      959           1900       899     1236
##  9  2013     7    22     2257            759       898      121
## 10  2013    12     5      756           1700       896     1058
## # … with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># flights that left earliest (least amount of delay)</span>
<span class="kw">arrange</span>(flights, dep_delay)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013    12     7     2040           2123       -43       40
##  2  2013     2     3     2022           2055       -33     2240
##  3  2013    11    10     1408           1440       -32     1549
##  4  2013     1    11     1900           1930       -30     2233
##  5  2013     1    29     1703           1730       -27     1947
##  6  2013     8     9      729            755       -26     1002
##  7  2013    10    23     1907           1932       -25     2143
##  8  2013     3    30     2030           2055       -25     2213
##  9  2013     3     2     1431           1455       -24     1601
## 10  2013     5     5      934            958       -24     1225
## # … with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="sort-flights-to-find-the-fastest-flights." class="section level3 unnumbered">
<h3>3. Sort flights to find the fastest flights.</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># fastest flights</span>
<span class="kw">arrange</span> (flights, arr_delay)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     5     7     1715           1729       -14     1944
##  2  2013     5    20      719            735       -16      951
##  3  2013     5     2     1947           1949        -2     2209
##  4  2013     5     6     1826           1830        -4     2045
##  5  2013     5     4     1816           1820        -4     2017
##  6  2013     5     2     1926           1929        -3     2157
##  7  2013     5     6     1753           1755        -2     2004
##  8  2013     5     7     2054           2055        -1     2317
##  9  2013     5    13      657            700        -3      908
## 10  2013     1     4     1026           1030        -4     1305
## # … with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find out which airlines had the top 1,000 fastest flights</span>
top1000_fastest &lt;-<span class="st"> </span><span class="kw">arrange</span>(flights,arr_delay)[<span class="dv">1</span><span class="op">:</span><span class="dv">1000</span>,]
<span class="kw">ggplot</span> (top1000_fastest, <span class="kw">aes</span> ( <span class="dt">x =</span> carrier, <span class="dt">fill =</span> carrier))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>()</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/fastest_flights_arrange-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># compare total air time vs dep_delay to see if there are any trends between airlines</span>
<span class="kw">ggplot</span> (top1000_fastest, <span class="kw">aes</span> (<span class="dt">x =</span> arr_delay, <span class="dt">y =</span> air_time))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>( <span class="kw">aes</span> (<span class="dt">color =</span> carrier))</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/fastest_flights_arrange-2.png" width="672" /></p>
<p>Based on the bar plot, within the top 1000 flights that landed early, AA, DL, and UA have more than other airlines. Looking at the scatterplot, it seems UA generally has medium-length flights that arrive ahead of schedule, whereas HA has very long flights that arrive ahead of schedule, and 9E has very short flights that arrive ahead of schedule.</p>
</div>
<div id="which-flights-travelled-the-longest-which-travelled-the-shortest" class="section level3 unnumbered">
<h3>4. Which flights travelled the longest? Which travelled the shortest?</h3>
<p>The shortest flights were from EWR to BDL, taking around 22 minutes. Of the top 100 shortest flights, flight number 4276 was the most frequent. The longest flights were from JFK to HNL or EWR to HNL, and lasted around 654 minutes. Of the top 100 longest flights, flight number 51 was the most frequent.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># flights that travelled the shortest</span>
shortest &lt;-<span class="st"> </span><span class="kw">arrange</span>(flights, air_time)[<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>,]
shortest</code></pre></div>
<pre><code>## # A tibble: 100 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1    16     1355           1315        40     1442
##  2  2013     4    13      537            527        10      622
##  3  2013    12     6      922            851        31     1021
##  4  2013     2     3     2153           2129        24     2247
##  5  2013     2     5     1303           1315       -12     1342
##  6  2013     2    12     2123           2130        -7     2211
##  7  2013     3     2     1450           1500       -10     1547
##  8  2013     3     8     2026           1935        51     2131
##  9  2013     3    18     1456           1329        87     1533
## 10  2013     3    19     2226           2145        41     2305
## # … with 90 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find the most frequent flight number for top 100 shortest flights.</span>
<span class="kw">arrange</span>(<span class="kw">count</span>(shortest, flight),<span class="kw">desc</span>(n))</code></pre></div>
<pre><code>## # A tibble: 32 x 2
##    flight     n
##     &lt;int&gt; &lt;int&gt;
##  1   4276    19
##  2   4368    12
##  3   3822     8
##  4   4155     7
##  5   3847     5
##  6   4619     5
##  7   4103     4
##  8   3825     3
##  9   4118     3
## 10   5968     3
## # … with 22 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># flights that travelled the longest</span>
longest &lt;-<span class="st"> </span><span class="kw">arrange</span>(flights, <span class="kw">desc</span>(air_time))[<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>,]
longest</code></pre></div>
<pre><code>## # A tibble: 100 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     3    17     1337           1335         2     1937
##  2  2013     2     6      853            900        -7     1542
##  3  2013     3    15     1001           1000         1     1551
##  4  2013     3    17     1006           1000         6     1607
##  5  2013     3    16     1001           1000         1     1544
##  6  2013     2     5      900            900         0     1555
##  7  2013    11    12      936            930         6     1630
##  8  2013     3    14      958           1000        -2     1542
##  9  2013    11    20     1006           1000         6     1639
## 10  2013     3    15     1342           1335         7     1924
## # … with 90 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find the most frequent flight number for top 100 shortest flights.</span>
<span class="kw">arrange</span>(<span class="kw">count</span>(longest, flight),<span class="kw">desc</span>(n))</code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   flight     n
##    &lt;int&gt; &lt;int&gt;
## 1     51    61
## 2     15    39</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get average flight time for top 100 shortest / longest flights</span>
<span class="kw">mean</span>(shortest<span class="op">$</span>air_time)</code></pre></div>
<pre><code>## [1] 22.32</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(longest<span class="op">$</span>air_time)</code></pre></div>
<pre><code>## [1] 654.47</code></pre>
</div>
</div>
<div id="notes---select-columns-with-select" class="section level2 unnumbered">
<h2><strong>5.4</strong> Notes - Select columns with select()</h2>
<p>The select() function allows you to select a subset of columns (variables) from your data frame and return a new data frame with these selected columns. This works similarly to using indexes to pull out columns from a data frame in base R. For example, here is a way to do the same thing both ways:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Select columns by name</span>
<span class="kw">select</span>(flights, year, month, day)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##     year month   day
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2013     1     1
##  2  2013     1     1
##  3  2013     1     1
##  4  2013     1     1
##  5  2013     1     1
##  6  2013     1     1
##  7  2013     1     1
##  8  2013     1     1
##  9  2013     1     1
## 10  2013     1     1
## # … with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use base R to do the same thing</span>
flights[,<span class="kw">c</span>(<span class="st">&quot;year&quot;</span>,<span class="st">&quot;month&quot;</span>,<span class="st">&quot;day&quot;</span>)]</code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##     year month   day
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2013     1     1
##  2  2013     1     1
##  3  2013     1     1
##  4  2013     1     1
##  5  2013     1     1
##  6  2013     1     1
##  7  2013     1     1
##  8  2013     1     1
##  9  2013     1     1
## 10  2013     1     1
## # … with 336,766 more rows</code></pre>
<p>Select seems to be more versatile if you want to do other things quickly, like combining it with ends_with(), starts_with(), contains(), matches(), num_range(), etc.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># select multiple columns using colon</span>
<span class="kw">select</span>(flights, year<span class="op">:</span>day)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##     year month   day
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2013     1     1
##  2  2013     1     1
##  3  2013     1     1
##  4  2013     1     1
##  5  2013     1     1
##  6  2013     1     1
##  7  2013     1     1
##  8  2013     1     1
##  9  2013     1     1
## 10  2013     1     1
## # … with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># select columns that end with a phrase</span>
<span class="kw">select</span>(flights, <span class="kw">ends_with</span>(<span class="st">&quot;time&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 5
##    dep_time sched_dep_time arr_time sched_arr_time air_time
##       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt;
##  1      517            515      830            819      227
##  2      533            529      850            830      227
##  3      542            540      923            850      160
##  4      544            545     1004           1022      183
##  5      554            600      812            837      116
##  6      554            558      740            728      150
##  7      555            600      913            854      158
##  8      557            600      709            723       53
##  9      557            600      838            846      140
## 10      558            600      753            745      138
## # … with 336,766 more rows</code></pre>
<p>A variant of select(), rename(), can rename column variables. This seems very useful.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rename</span>(flights, <span class="dt">tail_num =</span> tailnum)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tail_num &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>To move variables to the leftmost side using select(), use the everything() function in conjunction with the variables you are pulling out.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(flights, carrier, flight, <span class="kw">everything</span>())</code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##    carrier flight  year month   day dep_time sched_dep_time dep_delay
##    &lt;chr&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;
##  1 UA        1545  2013     1     1      517            515         2
##  2 UA        1714  2013     1     1      533            529         4
##  3 AA        1141  2013     1     1      542            540         2
##  4 B6         725  2013     1     1      544            545        -1
##  5 DL         461  2013     1     1      554            600        -6
##  6 UA        1696  2013     1     1      554            558        -4
##  7 B6         507  2013     1     1      555            600        -5
##  8 EV        5708  2013     1     1      557            600        -3
##  9 B6          79  2013     1     1      557            600        -3
## 10 AA         301  2013     1     1      558            600        -2
## # … with 336,766 more rows, and 11 more variables: arr_time &lt;int&gt;,
## #   sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,
## #   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
## #   time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="exercises-9" class="section level2 unnumbered">
<h2><strong>5.4.1</strong> Exercises</h2>
<div id="brainstorm-as-many-ways-as-possible-to-select-dep_time-dep_delay-arr_time-and-arr_delay-from-flights." class="section level3 unnumbered">
<h3>1. Brainstorm as many ways as possible to select dep_time, dep_delay, arr_time, and arr_delay from flights.</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># standard way to select</span>
<span class="kw">select</span> (flights, dep_time, dep_delay, arr_time, arr_delay)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 4
##    dep_time dep_delay arr_time arr_delay
##       &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1      517         2      830        11
##  2      533         4      850        20
##  3      542         2      923        33
##  4      544        -1     1004       -18
##  5      554        -6      812       -25
##  6      554        -4      740        12
##  7      555        -5      913        19
##  8      557        -3      709       -14
##  9      557        -3      838        -8
## 10      558        -2      753         8
## # … with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># select using starts_with()</span>
<span class="kw">select</span> (flights, <span class="kw">starts_with</span>(<span class="st">&quot;dep&quot;</span>),<span class="kw">starts_with</span>(<span class="st">&quot;arr&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 4
##    dep_time dep_delay arr_time arr_delay
##       &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1      517         2      830        11
##  2      533         4      850        20
##  3      542         2      923        33
##  4      544        -1     1004       -18
##  5      554        -6      812       -25
##  6      554        -4      740        12
##  7      555        -5      913        19
##  8      557        -3      709       -14
##  9      557        -3      838        -8
## 10      558        -2      753         8
## # … with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#can also do some less efficient combination of contains() and subtracting columns.</span>
<span class="kw">select</span> (flights, <span class="kw">contains</span>(<span class="st">&quot;dep_&quot;</span>), <span class="kw">contains</span>(<span class="st">&quot;arr_&quot;</span>),<span class="op">-</span><span class="kw">contains</span>(<span class="st">&quot;sched&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 4
##    dep_time dep_delay arr_time arr_delay
##       &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1      517         2      830        11
##  2      533         4      850        20
##  3      542         2      923        33
##  4      544        -1     1004       -18
##  5      554        -6      812       -25
##  6      554        -4      740        12
##  7      555        -5      913        19
##  8      557        -3      709       -14
##  9      557        -3      838        -8
## 10      558        -2      753         8
## # … with 336,766 more rows</code></pre>
</div>
<div id="what-happens-if-you-include-the-name-of-a-variable-multiple-times-in-a-select-call" class="section level3 unnumbered">
<h3>2. What happens if you include the name of a variable multiple times in a select() call?</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(flights, dep_time, dep_time)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 1
##    dep_time
##       &lt;int&gt;
##  1      517
##  2      533
##  3      542
##  4      544
##  5      554
##  6      554
##  7      555
##  8      557
##  9      557
## 10      558
## # … with 336,766 more rows</code></pre>
<p>It looks like you will only get the variable one time (it will not duplicate).</p>
</div>
<div id="what-does-the-one_of-function-do-why-might-it-be-helpful-in-conjunction-with-this-vector" class="section level3 unnumbered">
<h3>3. What does the one_of() function do? Why might it be helpful in conjunction with this vector?</h3>
<p>one_of() function takes in a vector of characters, which could be names of columns that you want to select. This way, you dont have to have so many arguments in select(). You can pre-make a vector with the columns you want, then select one_of(vars), as shown here. However, I tried just putting the vector in as a argument without one_of() and it gave the same output.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;dep_delay&quot;</span>, <span class="st">&quot;arr_delay&quot;</span>)
<span class="co">#use the one_of() function to select each of the specified columns in vars</span>
<span class="kw">select</span>(flights, <span class="kw">one_of</span>(vars))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 5
##     year month   day dep_delay arr_delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1  2013     1     1         2        11
##  2  2013     1     1         4        20
##  3  2013     1     1         2        33
##  4  2013     1     1        -1       -18
##  5  2013     1     1        -6       -25
##  6  2013     1     1        -4        12
##  7  2013     1     1        -5        19
##  8  2013     1     1        -3       -14
##  9  2013     1     1        -3        -8
## 10  2013     1     1        -2         8
## # … with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># it seems like this also works to give the same output.</span>
<span class="kw">select</span>(flights, vars)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 5
##     year month   day dep_delay arr_delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1  2013     1     1         2        11
##  2  2013     1     1         4        20
##  3  2013     1     1         2        33
##  4  2013     1     1        -1       -18
##  5  2013     1     1        -6       -25
##  6  2013     1     1        -4        12
##  7  2013     1     1        -5        19
##  8  2013     1     1        -3       -14
##  9  2013     1     1        -3        -8
## 10  2013     1     1        -2         8
## # … with 336,766 more rows</code></pre>
</div>
<div id="does-the-result-of-running-the-following-code-surprise-you-how-do-the-select-helpers-deal-with-case-by-default-how-can-you-change-that-default" class="section level3 unnumbered">
<h3>4. Does the result of running the following code surprise you? How do the select helpers deal with case by default? How can you change that default?</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(flights, <span class="kw">contains</span>(<span class="st">&quot;TIME&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 6
##    dep_time sched_dep_time arr_time sched_arr_time air_time
##       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt;
##  1      517            515      830            819      227
##  2      533            529      850            830      227
##  3      542            540      923            850      160
##  4      544            545     1004           1022      183
##  5      554            600      812            837      116
##  6      554            558      740            728      150
##  7      555            600      913            854      158
##  8      557            600      709            723       53
##  9      557            600      838            846      140
## 10      558            600      753            745      138
## # … with 336,766 more rows, and 1 more variable: time_hour &lt;dttm&gt;</code></pre>
<p>The code returns columns that have lowercase time in them, even though we specified TIME in uppercase. This is not surprising because ?contains() specifies that “ignore.case = TRUE” by default. To get only columns with uppercase TIME, we can write:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(flights, <span class="kw">contains</span>(<span class="st">&quot;TIME&quot;</span>, <span class="dt">ignore.case =</span> <span class="ot">FALSE</span>))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 0</code></pre>
<p>Since no columns in the flights data frame have the uppercase TIME in them, nothing is returned.</p>
</div>
</div>
<div id="notes---add-new-variables-with-mutate" class="section level2 unnumbered">
<h2><strong>5.5</strong> Notes - Add new variables with mutate()</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># view the data as a spreadsheet with View() - note capital V</span>
<span class="co"># View(flights)</span>

<span class="co"># select a subset of columns so data is easier to work with for demonstration purposes</span>
flights_sml &lt;-<span class="st"> </span><span class="kw">select</span>(flights, 
  year<span class="op">:</span>day, 
  <span class="kw">ends_with</span>(<span class="st">&quot;delay&quot;</span>), 
  distance, 
  air_time
)
flights_sml</code></pre></div>
<pre><code>## # A tibble: 336,776 x 7
##     year month   day dep_delay arr_delay distance air_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1  2013     1     1         2        11     1400      227
##  2  2013     1     1         4        20     1416      227
##  3  2013     1     1         2        33     1089      160
##  4  2013     1     1        -1       -18     1576      183
##  5  2013     1     1        -6       -25      762      116
##  6  2013     1     1        -4        12      719      150
##  7  2013     1     1        -5        19     1065      158
##  8  2013     1     1        -3       -14      229       53
##  9  2013     1     1        -3        -8      944      140
## 10  2013     1     1        -2         8      733      138
## # … with 336,766 more rows</code></pre>
<p>To add new columns to the dataset that are functions of existing columns, use the mutate() function. You can even refer to newly created columns in the same call, which seems like magic. The new columns are appended to the end of the data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(flights_sml,
  <span class="dt">gain =</span> arr_delay <span class="op">-</span><span class="st"> </span>dep_delay,
  <span class="dt">hours =</span> air_time <span class="op">/</span><span class="st"> </span><span class="dv">60</span>,
  <span class="dt">gain_per_hour =</span> gain <span class="op">/</span><span class="st"> </span>hours
)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 10
##     year month   day dep_delay arr_delay distance air_time  gain hours
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  2013     1     1         2        11     1400      227     9 3.78 
##  2  2013     1     1         4        20     1416      227    16 3.78 
##  3  2013     1     1         2        33     1089      160    31 2.67 
##  4  2013     1     1        -1       -18     1576      183   -17 3.05 
##  5  2013     1     1        -6       -25      762      116   -19 1.93 
##  6  2013     1     1        -4        12      719      150    16 2.5  
##  7  2013     1     1        -5        19     1065      158    24 2.63 
##  8  2013     1     1        -3       -14      229       53   -11 0.883
##  9  2013     1     1        -3        -8      944      140    -5 2.33 
## 10  2013     1     1        -2         8      733      138    10 2.3  
## # … with 336,766 more rows, and 1 more variable: gain_per_hour &lt;dbl&gt;</code></pre>
<p>To keep only the newly created columns, use transmute():</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">transmute</span>(flights,
  <span class="dt">gain =</span> arr_delay <span class="op">-</span><span class="st"> </span>dep_delay,
  <span class="dt">hours =</span> air_time <span class="op">/</span><span class="st"> </span><span class="dv">60</span>,
  <span class="dt">gain_per_hour =</span> gain <span class="op">/</span><span class="st"> </span>hours
)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##     gain hours gain_per_hour
##    &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;
##  1     9 3.78           2.38
##  2    16 3.78           4.23
##  3    31 2.67          11.6 
##  4   -17 3.05          -5.57
##  5   -19 1.93          -9.83
##  6    16 2.5            6.4 
##  7    24 2.63           9.11
##  8   -11 0.883        -12.5 
##  9    -5 2.33          -2.14
## 10    10 2.3            4.35
## # … with 336,766 more rows</code></pre>
<p>In general, all functions or operators that can be applied to vectors and return vectors with the same number of values as output can be used with mutate() or transmute(). Examples include arithmetic operators, modular arithmetic, logs, offsets (lead() and lag()), cumulative sum/averages, logical comparisons (returns boolean for each value in vector), Another provided example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># convert dep_time to hours and minutes using modulus and remainder</span>
<span class="kw">transmute</span>(flights,
  dep_time,
  <span class="dt">hour =</span> dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>,
  <span class="dt">minute =</span> dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>
)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##    dep_time  hour minute
##       &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1      517     5     17
##  2      533     5     33
##  3      542     5     42
##  4      544     5     44
##  5      554     5     54
##  6      554     5     54
##  7      555     5     55
##  8      557     5     57
##  9      557     5     57
## 10      558     5     58
## # … with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">2</span>,  <span class="dv">4</span>, <span class="dv">3</span>)
<span class="kw">min_rank</span>(y)</code></pre></div>
<pre><code>## [1]  1  2 NA  2  5  4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rank</span>(y)</code></pre></div>
<pre><code>## [1] 1.0 2.5 6.0 2.5 5.0 4.0</code></pre>
</div>
<div id="exercises-10" class="section level2 unnumbered">
<h2><strong>5.5.2</strong> Exercises</h2>
<div id="currently-dep_time-and-sched_dep_time-are-convenient-to-look-at-but-hard-to-compute-with-because-theyre-not-really-continuous-numbers.-convert-them-to-a-more-convenient-representation-of-number-of-minutes-since-midnight." class="section level3 unnumbered">
<h3>1. Currently dep_time and sched_dep_time are convenient to look at, but hard to compute with because they’re not really continuous numbers. Convert them to a more convenient representation of number of minutes since midnight.</h3>
<p>To convert military hours to minutes since midnight, first find how many hours it’s been (%/% 100), then multiply that by 60 to get the minutes, then add the remainin minutes (%% 100). Below is a table of the old columns and new columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">transmute</span>(flights,
          dep_time,
          sched_dep_time,
          <span class="dt">dep_time_min =</span> (dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>(dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>),
          <span class="dt">sched_dep_time_min =</span> (dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>(dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>)
)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 4
##    dep_time sched_dep_time dep_time_min sched_dep_time_min
##       &lt;int&gt;          &lt;int&gt;        &lt;dbl&gt;              &lt;dbl&gt;
##  1      517            515          317                317
##  2      533            529          333                333
##  3      542            540          342                342
##  4      544            545          344                344
##  5      554            600          354                354
##  6      554            558          354                354
##  7      555            600          355                355
##  8      557            600          357                357
##  9      557            600          357                357
## 10      558            600          358                358
## # … with 336,766 more rows</code></pre>
</div>
<div id="compare-air_time-with-arr_time---dep_time.-what-do-you-expect-to-see-what-do-you-see-what-do-you-need-to-do-to-fix-it" class="section level3 unnumbered">
<h3>2. Compare air_time with arr_time - dep_time. What do you expect to see? What do you see? What do you need to do to fix it?</h3>
<p>I expect to see that arr_time - dep_time = air_time. However, the values do not match because arr_time - dep_time returns the amount of time in hours:minutes, whereas air_time is in total minutes. We would have to convert the output into total minutes. However, this still does not fix the problem. There is also the issue of time zones. Depending on where the plane flew, the air_time could be consistent but the arr_time could be way off. We can see from the first two rows that two different flights that had different arr_time and dep_times had the same air_time!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># gives time in hours:min</span>
<span class="kw">transmute</span> (flights, arr_time, dep_time, air_time, <span class="dt">my_air_time =</span> arr_time <span class="op">-</span><span class="st"> </span>dep_time)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 4
##    arr_time dep_time air_time my_air_time
##       &lt;int&gt;    &lt;int&gt;    &lt;dbl&gt;       &lt;int&gt;
##  1      830      517      227         313
##  2      850      533      227         317
##  3      923      542      160         381
##  4     1004      544      183         460
##  5      812      554      116         258
##  6      740      554      150         186
##  7      913      555      158         358
##  8      709      557       53         152
##  9      838      557      140         281
## 10      753      558      138         195
## # … with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># convert to total minutes</span>
<span class="kw">transmute</span> (flights, arr_time, dep_time, air_time, <span class="dt">my_air_time =</span> ((arr_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>arr_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>) <span class="op">-</span><span class="st"> </span>((dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 4
##    arr_time dep_time air_time my_air_time
##       &lt;int&gt;    &lt;int&gt;    &lt;dbl&gt;       &lt;dbl&gt;
##  1      830      517      227         193
##  2      850      533      227         197
##  3      923      542      160         221
##  4     1004      544      183         260
##  5      812      554      116         138
##  6      740      554      150         106
##  7      913      555      158         198
##  8      709      557       53          72
##  9      838      557      140         161
## 10      753      558      138         115
## # … with 336,766 more rows</code></pre>
</div>
<div id="compare-dep_time-sched_dep_time-and-dep_delay.-how-would-you-expect-those-three-numbers-to-be-related" class="section level3 unnumbered">
<h3>3. Compare dep_time, sched_dep_time, and dep_delay. How would you expect those three numbers to be related?</h3>
<p>I would expect that dep_time - sched_dep_time, converted to minutes, would equal dep_delay.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">transmute</span> (flights, dep_time, sched_dep_time, dep_delay, <span class="dt">my_dep_delay =</span> ((dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>) <span class="op">-</span><span class="st"> </span>((sched_dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>sched_dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 4
##    dep_time sched_dep_time dep_delay my_dep_delay
##       &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;        &lt;dbl&gt;
##  1      517            515         2            2
##  2      533            529         4            4
##  3      542            540         2            2
##  4      544            545        -1           -1
##  5      554            600        -6           -6
##  6      554            558        -4           -4
##  7      555            600        -5           -5
##  8      557            600        -3           -3
##  9      557            600        -3           -3
## 10      558            600        -2           -2
## # … with 336,766 more rows</code></pre>
</div>
<div id="find-the-10-most-delayed-flights-using-a-ranking-function.-how-do-you-want-to-handle-ties-carefully-read-the-documentation-for-min_rank." class="section level3 unnumbered">
<h3>4. Find the 10 most delayed flights using a ranking function. How do you want to handle ties? Carefully read the documentation for min_rank().</h3>
<p>I suppose we could arrange dep_delay to find the top most delayed flights. Using min_rank() will rank the delayed flights - if we rank the delayed flights and then sort on the rank, we see that the most delayed flight is rank 328521, with a delay of 1301 minutes. The default ties.method for min_rank is “min”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">transmute</span>(flights, dep_delay, <span class="dt">rank_delay =</span> <span class="kw">min_rank</span>(dep_delay)) </code></pre></div>
<pre><code>## # A tibble: 336,776 x 2
##    dep_delay rank_delay
##        &lt;dbl&gt;      &lt;int&gt;
##  1         2     208140
##  2         4     219823
##  3         2     208140
##  4        -1     164763
##  5        -6      48888
##  6        -4      94410
##  7        -5      69589
##  8        -3     119029
##  9        -3     119029
## 10        -2     143247
## # … with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sorted_flights &lt;-<span class="st"> </span><span class="kw">transmute</span>(flights, dep_delay, <span class="dt">rank_delay =</span> <span class="kw">min_rank</span>(dep_delay)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(rank_delay))
sorted_flights[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,]</code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    dep_delay rank_delay
##        &lt;dbl&gt;      &lt;int&gt;
##  1      1301     328521
##  2      1137     328520
##  3      1126     328519
##  4      1014     328518
##  5      1005     328517
##  6       960     328516
##  7       911     328515
##  8       899     328514
##  9       898     328513
## 10       896     328512</code></pre>
</div>
<div id="what-does-13-110-return-why" class="section level3 unnumbered">
<h3>5. What does 1:3 + 1:10 return? Why?</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># returns error</span>
 <span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></code></pre></div>
<pre><code>## Warning in 1:3 + 1:10: longer object length is not a multiple of shorter
## object length</code></pre>
<pre><code>##  [1]  2  4  6  5  7  9  8 10 12 11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># if adding to a multiple:</span>
<span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">9</span></code></pre></div>
<pre><code>## [1]  2  4  6  5  7  9  8 10 12</code></pre>
</div>
<div id="what-trigonometric-functions-does-r-provide" class="section level3 unnumbered">
<h3>6. What trigonometric functions does R provide?</h3>
<p>Taken from the R documentation: “These functions give the obvious trigonometric functions. They respectively compute the cosine, sine, tangent, arc-cosine, arc-sine, arc-tangent, and the two-argument arc-tangent.”</p>
<p><code>cospi(x), sinpi(x), and tanpi(x), compute cos(pi*x), sin(pi*x), and tan(pi*x).</code></p>
</div>
</div>
<div id="notes---grouped-summaries-with-summarise" class="section level2 unnumbered">
<h2><strong>5.6</strong> Notes - Grouped summaries with summarise()</h2>
<p>summarise(), in its simplest usage, can perform a function on a column in the data set and return the output as a single row:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summarise</span>(flights, <span class="dt">delay =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   delay
##   &lt;dbl&gt;
## 1  12.6</code></pre>
<p>A more advanced usage of summarise() is when paired with group_by(). This will return the function on each of the subgroups from group_by(), and giving statistics “by group”. Looking at the group_by() output, there doesnt seem to be any striking difference between the original flights data frame and the grouped data frame. The result of using group_by() is not immediately apparent unless paired with summarise(). It would be interesting to know what other usages group_by() can have.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_day &lt;-<span class="st"> </span><span class="kw">group_by</span>(flights, year, month, day)
<span class="kw">summarise</span>(by_day, <span class="dt">delay =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [?]
##     year month   day delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1  2013     1     1 11.5 
##  2  2013     1     2 13.9 
##  3  2013     1     3 11.0 
##  4  2013     1     4  8.95
##  5  2013     1     5  5.73
##  6  2013     1     6  7.15
##  7  2013     1     7  5.42
##  8  2013     1     8  2.55
##  9  2013     1     9  2.28
## 10  2013     1    10  2.84
## # … with 355 more rows</code></pre>
<div id="combining-multiple-operations-with-the-pipe" class="section level3 unnumbered">
<h3>5.6.1 Combining multiple operations with the pipe</h3>
<p>Learning how to use the pipe - the pipe, or <code>%&gt;%</code> can be used to more efficiently run sequential of functions on a variable and its output. This reduces the amount of naming intermediate variables we have to do. If we care about intermediate variables (ie, performing other analysis or using the vairable for other purposes) then I would not use the pipe. If i do not care about the intermeidate variables and want to quickly get output, the pipe would be useful.</p>
<p>Here is the provided example about writing code without or with pipes:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># not using pipes - note all the intermediate variables</span>
by_dest &lt;-<span class="st"> </span><span class="kw">group_by</span>(flights, dest)
delay &lt;-<span class="st"> </span><span class="kw">summarise</span>(by_dest,
  <span class="dt">count =</span> <span class="kw">n</span>(),
  <span class="dt">dist =</span> <span class="kw">mean</span>(distance, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
  <span class="dt">delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
)
delay &lt;-<span class="st"> </span><span class="kw">filter</span>(delay, count <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, dest <span class="op">!=</span><span class="st"> &quot;HNL&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># using pipes</span>
delay &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">count =</span> <span class="kw">n</span>(),
    <span class="dt">dist =</span> <span class="kw">mean</span>(distance, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
    <span class="dt">delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
  ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(count <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, dest <span class="op">!=</span><span class="st"> &quot;HNL&quot;</span>)

<span class="co"># It looks like delays increase with distance up to ~750 miles </span>
<span class="co"># and then decrease. Maybe as flights get longer there&#39;s more </span>
<span class="co"># ability to make up delays in the air?</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> delay, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> dist, <span class="dt">y =</span> delay)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> count), <span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/pipe_dist_vs_delay_example-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&gt; `geom_smooth()` using method = &#39;loess&#39;</span></code></pre></div>
</div>
<div id="missing-values-1" class="section level3 unnumbered">
<h3>5.6.2 Missing values</h3>
<p>Without setting na.rm, the following code does not produce any means using summarse(). Instead, all the values under the mean column are NA. This is beacuse aggregating NA with any other numbers will return NA. We must call na.rm = TRUE in the summarise() function to produce meaningul values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># without na.rm</span>
flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(dep_delay))</code></pre></div>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [?]
##     year month   day  mean
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1  2013     1     1    NA
##  2  2013     1     2    NA
##  3  2013     1     3    NA
##  4  2013     1     4    NA
##  5  2013     1     5    NA
##  6  2013     1     6    NA
##  7  2013     1     7    NA
##  8  2013     1     8    NA
##  9  2013     1     9    NA
## 10  2013     1    10    NA
## # … with 355 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># with na.rm</span>
flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [?]
##     year month   day  mean
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1  2013     1     1 11.5 
##  2  2013     1     2 13.9 
##  3  2013     1     3 11.0 
##  4  2013     1     4  8.95
##  5  2013     1     5  5.73
##  6  2013     1     6  7.15
##  7  2013     1     7  5.42
##  8  2013     1     8  2.55
##  9  2013     1     9  2.28
## 10  2013     1    10  2.84
## # … with 355 more rows</code></pre>
<p>To get a data frame without any of the NA values (cancelled flights):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 2 ways to use filter() to get the non-cancelled flights</span>
(not_cancelled &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(dep_delay), <span class="op">!</span><span class="kw">is.na</span>(arr_delay)))</code></pre></div>
<pre><code>## # A tibble: 327,346 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 327,336 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(not_cancelled2 &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>(<span class="kw">is.na</span>(dep_delay) <span class="op">|</span><span class="st"> </span><span class="kw">is.na</span>(arr_delay))))</code></pre></div>
<pre><code>## # A tibble: 327,346 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 327,336 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">not_cancelled <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(dep_delay))</code></pre></div>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [?]
##     year month   day  mean
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1  2013     1     1 11.4 
##  2  2013     1     2 13.7 
##  3  2013     1     3 10.9 
##  4  2013     1     4  8.97
##  5  2013     1     5  5.73
##  6  2013     1     6  7.15
##  7  2013     1     7  5.42
##  8  2013     1     8  2.56
##  9  2013     1     9  2.30
## 10  2013     1    10  2.84
## # … with 355 more rows</code></pre>
</div>
<div id="counts" class="section level3 unnumbered">
<h3>5.6.3 Counts</h3>
<p>When using summarise, its important to know how many observations each summary value was being computed on. If the counts are low, the variance of the summary value might be very high, and the results may not be as interpretable or reliable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">delays &lt;-<span class="st"> </span>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">delay =</span> <span class="kw">mean</span>(arr_delay)
  )

<span class="kw">ggplot</span>(<span class="dt">data =</span> delays, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> delay)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_freqpoly</span>(<span class="dt">binwidth =</span> <span class="dv">10</span>)</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/delay_freqpoly_example-1.png" width="672" /></p>
<p>Here we see that some flights have very high delay values, but these flights also don’t have very many counts. To count how many observations each summary value was computed on, use the n() function in summarize().</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">delays &lt;-<span class="st"> </span>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
    <span class="dt">n =</span> <span class="kw">n</span>()
  )

<span class="co"># basically the previous graph flipped on its side</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> delays, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> n, <span class="dt">y =</span> delay)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">10</span>)</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/delays_geom_point_example-1.png" width="672" /></p>
<p>We can filter out the observations based on less than 25 counts using filter(), and then pipe the result into ggplot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">delays <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">25</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> n, <span class="dt">y =</span> delay)) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">10</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/delays_filtered_example-1.png" width="672" /></p>
</div>
<div id="useful-summary-functions" class="section level3 unnumbered">
<h3>5.6.4 Useful summary functions</h3>
<p>Types of functions that you can use in summarize are: mean(), median(), sd(), IQR(), mad(), min(), quantile(), max(), first(), nth(), last(), n(), sum (!is.na()), counts of logical variables (sum(x&gt;20)), and more. And subsetting values prior to performing the function using &gt; &lt;, etc.</p>
<p>When subsetting, it is important not to be confused between getting the mean of the subsetted values vs the proportion of the subsetted values that satisfy the condition:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get mean delay of flights delayed by more than 60 hours</span>
not_cancelled <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">avg_delay_over60 =</span> <span class="kw">mean</span>(arr_delay[arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>]) <span class="co"># the average positive delay</span>
  )</code></pre></div>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [?]
##     year month   day avg_delay_over60
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;            &lt;dbl&gt;
##  1  2013     1     1            131. 
##  2  2013     1     2            116. 
##  3  2013     1     3            109. 
##  4  2013     1     4            104. 
##  5  2013     1     5            103. 
##  6  2013     1     6             90.5
##  7  2013     1     7            106. 
##  8  2013     1     8            100. 
##  9  2013     1     9            165. 
## 10  2013     1    10            183. 
## # … with 355 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get proportion of flights delayed for more than 60 hours</span>
not_cancelled <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">hour_perc =</span> <span class="kw">mean</span>(arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>))</code></pre></div>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [?]
##     year month   day hour_perc
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;
##  1  2013     1     1    0.0722
##  2  2013     1     2    0.0851
##  3  2013     1     3    0.0567
##  4  2013     1     4    0.0396
##  5  2013     1     5    0.0349
##  6  2013     1     6    0.0470
##  7  2013     1     7    0.0333
##  8  2013     1     8    0.0213
##  9  2013     1     9    0.0202
## 10  2013     1    10    0.0183
## # … with 355 more rows</code></pre>
<p>The example in the book provides two ways to find the min &amp; max observation for each group of flights (although the output is in a different format), which I thought was interesting.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># using summarise()</span>
not_cancelled <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">first_dep =</span> <span class="kw">first</span>(dep_time), 
    <span class="dt">last_dep =</span> <span class="kw">last</span>(dep_time)
  )</code></pre></div>
<pre><code>## # A tibble: 365 x 5
## # Groups:   year, month [?]
##     year month   day first_dep last_dep
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;    &lt;int&gt;
##  1  2013     1     1       517     2356
##  2  2013     1     2        42     2354
##  3  2013     1     3        32     2349
##  4  2013     1     4        25     2358
##  5  2013     1     5        14     2357
##  6  2013     1     6        16     2355
##  7  2013     1     7        49     2359
##  8  2013     1     8       454     2351
##  9  2013     1     9         2     2252
## 10  2013     1    10         3     2320
## # … with 355 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># using mutate() &amp; filter()</span>
not_cancelled <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">r =</span> <span class="kw">min_rank</span>(<span class="kw">desc</span>(dep_time))) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(r <span class="op">%in%</span><span class="st"> </span><span class="kw">range</span>(r))</code></pre></div>
<pre><code>## # A tibble: 770 x 20
## # Groups:   year, month, day [365]
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1     2356           2359        -3      425
##  3  2013     1     2       42           2359        43      518
##  4  2013     1     2     2354           2359        -5      413
##  5  2013     1     3       32           2359        33      504
##  6  2013     1     3     2349           2359       -10      434
##  7  2013     1     4       25           2359        26      505
##  8  2013     1     4     2358           2359        -1      429
##  9  2013     1     4     2358           2359        -1      436
## 10  2013     1     5       14           2359        15      503
## # … with 760 more rows, and 13 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, r &lt;int&gt;</code></pre>
<p>Also, I thought it was very useful how you can weight counts based on another variable, so that you can get a sum of total values of a different variable grouped on another set of variables (basically a shorter way to use group_by and summarize-sum() together, as shown below).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># sum using weighted counts()</span>
not_cancelled <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(tailnum, <span class="dt">wt =</span> distance)</code></pre></div>
<pre><code>## # A tibble: 4,037 x 2
##    tailnum      n
##    &lt;chr&gt;    &lt;dbl&gt;
##  1 D942DN    3418
##  2 N0EGMQ  239143
##  3 N10156  109664
##  4 N102UW   25722
##  5 N103US   24619
##  6 N104UW   24616
##  7 N10575  139903
##  8 N105UW   23618
##  9 N107US   21677
## 10 N108UW   32070
## # … with 4,027 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># sum using group_by and summarise() + sum()</span>
not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">sum_distances =</span> <span class="kw">sum</span>(distance))</code></pre></div>
<pre><code>## # A tibble: 4,037 x 2
##    tailnum sum_distances
##    &lt;chr&gt;           &lt;dbl&gt;
##  1 D942DN           3418
##  2 N0EGMQ         239143
##  3 N10156         109664
##  4 N102UW          25722
##  5 N103US          24619
##  6 N104UW          24616
##  7 N10575         139903
##  8 N105UW          23618
##  9 N107US          21677
## 10 N108UW          32070
## # … with 4,027 more rows</code></pre>
<p>To count unique values, use n_distinct():</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">not_cancelled <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">carriers =</span> <span class="kw">n_distinct</span>(carrier)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(carriers))</code></pre></div>
<pre><code>## # A tibble: 104 x 2
##    dest  carriers
##    &lt;chr&gt;    &lt;int&gt;
##  1 ATL          7
##  2 BOS          7
##  3 CLT          7
##  4 ORD          7
##  5 TPA          7
##  6 AUS          6
##  7 DCA          6
##  8 DTW          6
##  9 IAD          6
## 10 MSP          6
## # … with 94 more rows</code></pre>
</div>
<div id="grouping-by-multiple-variables" class="section level3 unnumbered">
<h3>5.6.5 Grouping by multiple variables</h3>
<p>You can progressively peel off groupings by re-calling summarise() on previous summarise() tables. Must be careful to use aggregation functions that make sense, like sum(), and not rank-based statistics like median(). They initial grouped data frame can be ungrouped manually as well.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># group the data</span>
daily &lt;-<span class="st"> </span><span class="kw">group_by</span>(flights, year, month, day)

<span class="co"># use summarise() to get metric per group</span>
(per_day   &lt;-<span class="st"> </span><span class="kw">summarise</span>(daily, <span class="dt">flights =</span> <span class="kw">n</span>()))</code></pre></div>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [?]
##     year month   day flights
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;
##  1  2013     1     1     842
##  2  2013     1     2     943
##  3  2013     1     3     914
##  4  2013     1     4     915
##  5  2013     1     5     720
##  6  2013     1     6     832
##  7  2013     1     7     933
##  8  2013     1     8     899
##  9  2013     1     9     902
## 10  2013     1    10     932
## # … with 355 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use summarise() on the previous summary to get metric one level up</span>
(per_month &lt;-<span class="st"> </span><span class="kw">summarise</span>(per_day, <span class="dt">flights =</span> <span class="kw">sum</span>(flights)))</code></pre></div>
<pre><code>## # A tibble: 12 x 3
## # Groups:   year [?]
##     year month flights
##    &lt;int&gt; &lt;int&gt;   &lt;int&gt;
##  1  2013     1   27004
##  2  2013     2   24951
##  3  2013     3   28834
##  4  2013     4   28330
##  5  2013     5   28796
##  6  2013     6   28243
##  7  2013     7   29425
##  8  2013     8   29327
##  9  2013     9   27574
## 10  2013    10   28889
## 11  2013    11   27268
## 12  2013    12   28135</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use summarise() on the previous summary again to get metric another level up</span>
(per_year  &lt;-<span class="st"> </span><span class="kw">summarise</span>(per_month, <span class="dt">flights =</span> <span class="kw">sum</span>(flights)))</code></pre></div>
<pre><code>## # A tibble: 1 x 2
##    year flights
##   &lt;int&gt;   &lt;int&gt;
## 1  2013  336776</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ungroup the data</span>
daily <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st">             </span><span class="co"># no longer grouped by date</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">flights =</span> <span class="kw">n</span>())  <span class="co"># all flights</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   flights
##     &lt;int&gt;
## 1  336776</code></pre>
</div>
</div>
<div id="exercises-11" class="section level2 unnumbered">
<h2><strong>5.6.7</strong> Exercises</h2>
<div id="brainstorm-at-least-5-different-ways-to-assess-the-typical-delay-characteristics-of-a-group-of-flights.-consider-the-following-scenarios" class="section level3 unnumbered">
<h3>1. Brainstorm at least 5 different ways to assess the typical delay characteristics of a group of flights. Consider the following scenarios:</h3>
<ul>
<li>A flight is 15 minutes early 50% of the time, and 15 minutes late 50% of the time.</li>
</ul>
<p>To examine how flights behave, I would group by the flight number (flight), then perform analyses on the grouped flights. When looking at the data, there are some flights that are always 15 minutes late! However, these flights had less than 20 total data points. Filtering out the flights with less than 20 total points, we can see that flights with less data points tend to have a higher proportion of delays, whereas flights with many data points have an overall lower proportion of delayed flights. The proportion of flights that are early 15 minutes also follows a similar trend, with flights that have flown fewer times tending to have larger proportion of those flights 15 minutes early.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_flight &lt;-<span class="st"> </span>not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(flight) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">late_15 =</span> <span class="kw">mean</span>(dep_delay <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>),
    <span class="dt">early_15 =</span> <span class="kw">mean</span>(dep_delay <span class="op">&lt;=</span><span class="st"> </span><span class="op">-</span><span class="dv">15</span>),
    <span class="dt">n =</span> <span class="kw">n</span>()
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(late_<span class="dv">15</span>))
by_flight</code></pre></div>
<pre><code>## # A tibble: 3,835 x 4
##    flight late_15 early_15     n
##     &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
##  1    106       1        0     1
##  2    974       1        0     1
##  3   1084       1        0     3
##  4   1226       1        0     1
##  5   1320       1        0     1
##  6   1510       1        0     1
##  7   1514       1        0     1
##  8   1760       1        0     2
##  9   1859       1        0     1
## 10   1868       1        0     2
## # … with 3,825 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># filter out flights with less than 20 total flights, then plot delays vs total counts</span>
<span class="kw">ggplot</span>(<span class="kw">filter</span>(by_flight, n <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>), <span class="kw">aes</span> (<span class="dt">x =</span> n, <span class="dt">y =</span> late_<span class="dv">15</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>( <span class="kw">aes</span>(<span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">5</span>))</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/flight_early_late_50-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># filter out flights with less than 20 total flights, then plot delays vs total counts</span>
<span class="kw">ggplot</span>(<span class="kw">filter</span>(by_flight, n <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>), <span class="kw">aes</span> (<span class="dt">x =</span> n, <span class="dt">y =</span> early_<span class="dv">15</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>( <span class="kw">aes</span>(<span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">5</span>))</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/flight_early_late_50-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find the flights that are either 15 minutes late with proportion 0.5 (no results)</span>
<span class="kw">filter</span> (by_flight, late_<span class="dv">15</span> <span class="op">==</span><span class="st"> </span><span class="fl">0.5</span>, early_<span class="dv">15</span> <span class="op">==</span><span class="st"> </span><span class="fl">0.5</span>)</code></pre></div>
<pre><code>## # A tibble: 0 x 4
## # … with 4 variables: flight &lt;int&gt;, late_15 &lt;dbl&gt;, early_15 &lt;dbl&gt;, n &lt;int&gt;</code></pre>
<ul>
<li>A flight is always 10 minutes late.</li>
</ul>
<p>The code below will give the flight numbers of all the flights that have been at least 10 minutes late 100% of the time. We can see that the number of counts is low for all of the flights returned.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_flight &lt;-<span class="st"> </span>not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(flight) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">late_10 =</span> <span class="kw">mean</span>(dep_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>),
    <span class="dt">n =</span> <span class="kw">n</span>()
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(late_<span class="dv">10</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)
by_flight</code></pre></div>
<pre><code>## # A tibble: 93 x 3
##    flight late_10     n
##     &lt;int&gt;   &lt;dbl&gt; &lt;int&gt;
##  1    106       1     1
##  2    896       1     1
##  3    974       1     1
##  4   1084       1     3
##  5   1226       1     1
##  6   1320       1     1
##  7   1475       1     3
##  8   1510       1     1
##  9   1514       1     1
## 10   1760       1     2
## # … with 83 more rows</code></pre>
<ul>
<li>A flight is 30 minutes early 50% of the time, and 30 minutes late 50% of the time.</li>
</ul>
<p>This can be solved by using the same code from the first bullet point, except changing the parameters to 30 minutes instead of 15.</p>
<ul>
<li>99% of the time a flight is on time. 1% of the time it’s 2 hours late.</li>
</ul>
<p>Below is code that finds flights that are late at least 2 hours exactly 1% of the time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_flight &lt;-<span class="st"> </span>not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(flight) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">late_120 =</span> <span class="kw">mean</span>(dep_delay <span class="op">&gt;=</span><span class="st"> </span><span class="dv">120</span>),
    <span class="dt">n =</span> <span class="kw">n</span>()
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(late_<span class="dv">120</span> <span class="op">==</span><span class="st"> </span><span class="fl">0.01</span>)
by_flight</code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   flight late_120     n
##    &lt;int&gt;    &lt;dbl&gt; &lt;int&gt;
## 1   1153     0.01   100
## 2   3361     0.01   200</code></pre>
<p>Which is more important: arrival delay or departure delay?</p>
<p>In my opinion, time of arrival of the flight is more important than departure delay, since you will probably have planned an itinerary that has a next step that depends on the time of arrival rather than the time of departure.</p>
</div>
<div id="come-up-with-another-approach-that-will-give-you-the-same-output-as-not_cancelled-countdest-and-not_cancelled-counttailnum-wt-distance-without-using-count." class="section level3 unnumbered">
<h3>2. Come up with another approach that will give you the same output as not_cancelled %&gt;% count(dest) and not_cancelled %&gt;% count(tailnum, wt = distance) (without using count()).</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># same output as: not_cancelled %&gt;% count(dest)</span>
not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">n =</span> <span class="kw">n</span>()
  )</code></pre></div>
<pre><code>## # A tibble: 104 x 2
##    dest      n
##    &lt;chr&gt; &lt;int&gt;
##  1 ABQ     254
##  2 ACK     264
##  3 ALB     418
##  4 ANC       8
##  5 ATL   16837
##  6 AUS    2411
##  7 AVL     261
##  8 BDL     412
##  9 BGR     358
## 10 BHM     269
## # … with 94 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># same output as: not_cancelled %&gt;% count(tailnum, wt = distance)</span>
not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">n =</span> <span class="kw">sum</span>(distance)
  )</code></pre></div>
<pre><code>## # A tibble: 4,037 x 2
##    tailnum      n
##    &lt;chr&gt;    &lt;dbl&gt;
##  1 D942DN    3418
##  2 N0EGMQ  239143
##  3 N10156  109664
##  4 N102UW   25722
##  5 N103US   24619
##  6 N104UW   24616
##  7 N10575  139903
##  8 N105UW   23618
##  9 N107US   21677
## 10 N108UW   32070
## # … with 4,027 more rows</code></pre>
</div>
<div id="our-definition-of-cancelled-flights-is.nadep_delay-is.naarr_delay-is-slightly-suboptimal.-why-which-is-the-most-important-column" class="section level3 unnumbered">
<h3>3. Our definition of cancelled flights (is.na(dep_delay) | is.na(arr_delay) ) is slightly suboptimal. Why? Which is the most important column?</h3>
<p>If a flight still took place and there was an error in entering the dep_delay or arr_delay, we would have thrown out the flight. A more important column to look at may be air_time - a flight cannot have had air_time if it never flew.</p>
</div>
<div id="look-at-the-number-of-cancelled-flights-per-day.-is-there-a-pattern-is-the-proportion-of-cancelled-flights-related-to-the-average-delay" class="section level3 unnumbered">
<h3>4. Look at the number of cancelled flights per day. Is there a pattern? Is the proportion of cancelled flights related to the average delay?</h3>
<p>To answer the first part of the question, this code returns a table with the number of cancelled flights per day. Plotting the data as a time series, we can see that there is some periodic trend in which spikes of large numbers of cancelled flights occur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find number of cancelled flights per day</span>

cancelled_flights &lt;-<span class="st"> </span><span class="kw">filter</span> (flights, <span class="kw">is.na</span>(air_time))
(per_day_cancelled &lt;-<span class="st"> </span>cancelled_flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">n</span>()))</code></pre></div>
<pre><code>## # A tibble: 363 x 4
## # Groups:   year, month [?]
##     year month   day     n
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2013     1     1    11
##  2  2013     1     2    15
##  3  2013     1     3    14
##  4  2013     1     4     7
##  5  2013     1     5     3
##  6  2013     1     6     3
##  7  2013     1     7     3
##  8  2013     1     8     7
##  9  2013     1     9     9
## 10  2013     1    10     3
## # … with 353 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span> (per_day_cancelled)<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span> (<span class="dt">x =</span> day, <span class="dt">y =</span> n, <span class="dt">group =</span> day))</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/num_cancelled_per_day-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span> (per_day_cancelled)<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(per_day_cancelled<span class="op">$</span>n)), <span class="dt">y =</span> n))</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/num_cancelled_per_day-2.png" width="672" /></p>
<p>To find the proportion of cancelled flights per day, first group flights by year,month,day using group_by(), then for each day, count the total number of flights and number of cancelled flights using summarize(), and then use mutate() to calculate the proportion by dividing the number of cancelled flights by the total flights. Based on the graph of average_delay vs proportion_cancelled, we can see that there is a positive correlation in which days that have overall higher delays also have overall higher proportion of cancelled flights.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#proportion of cancelled flights per day</span>

(proportion_cancelled &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year,month,day) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span> (
    <span class="dt">average_delay =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> T),
    <span class="dt">num_cancelled =</span> <span class="kw">sum</span> (<span class="kw">is.na</span>(air_time)),
    <span class="dt">total_flights =</span> <span class="kw">n</span>()
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span> ( <span class="dt">prop_cancelled =</span> num_cancelled<span class="op">/</span>total_flights))</code></pre></div>
<pre><code>## # A tibble: 365 x 7
## # Groups:   year, month [12]
##     year month   day average_delay num_cancelled total_flights
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;         &lt;dbl&gt;         &lt;int&gt;         &lt;int&gt;
##  1  2013     1     1         11.5             11           842
##  2  2013     1     2         13.9             15           943
##  3  2013     1     3         11.0             14           914
##  4  2013     1     4          8.95             7           915
##  5  2013     1     5          5.73             3           720
##  6  2013     1     6          7.15             3           832
##  7  2013     1     7          5.42             3           933
##  8  2013     1     8          2.55             7           899
##  9  2013     1     9          2.28             9           902
## 10  2013     1    10          2.84             3           932
## # … with 355 more rows, and 1 more variable: prop_cancelled &lt;dbl&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(proportion_cancelled, <span class="kw">aes</span> (average_delay, prop_cancelled))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/proportion_cancelled_vs_delay-1.png" width="672" /></p>
</div>
<div id="which-carrier-has-the-worst-delays-challenge-can-you-disentangle-the-effects-of-bad-airports-vs.bad-carriers-whywhy-not-hint-think-about-flights-group_bycarrier-dest-summarisen" class="section level3 unnumbered">
<h3>5. Which carrier has the worst delays? Challenge: can you disentangle the effects of bad airports vs. bad carriers? Why/why not? (Hint: think about flights %&gt;% group_by(carrier, dest) %&gt;% summarise(n()))</h3>
<p>The top 5 carriers with the worst delays are: F9, EV, YV&lt; FL, and WN. If we continue to subset by airport location (see graph), we find that some carriers have higher delays on average without depending on destination, whereas some carriers which fly only to certain destinations have a large dep_delay. One such example is FL, which we see only flies to 3 destinations and has a high dep_delay on average.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find carrier with worst delay</span>
by_carrier &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span> (
    <span class="dt">avg_delay =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> T)
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(avg_delay))
by_carrier</code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    carrier avg_delay
##    &lt;chr&gt;       &lt;dbl&gt;
##  1 F9          20.2 
##  2 EV          20.0 
##  3 YV          19.0 
##  4 FL          18.7 
##  5 WN          17.7 
##  6 9E          16.7 
##  7 B6          13.0 
##  8 VX          12.9 
##  9 OO          12.6 
## 10 UA          12.1 
## 11 MQ          10.6 
## 12 DL           9.26
## 13 AA           8.59
## 14 AS           5.80
## 15 HA           4.90
## 16 US           3.78</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_carrier_dest &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(carrier, dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span> (
    <span class="dt">avg_delay =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> T),
    <span class="dt">n =</span> <span class="kw">n</span>()
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(avg_delay))
by_carrier_dest</code></pre></div>
<pre><code>## # A tibble: 314 x 4
## # Groups:   carrier [16]
##    carrier dest  avg_delay     n
##    &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;int&gt;
##  1 UA      STL        77.5     2
##  2 OO      ORD        67       1
##  3 OO      DTW        61       2
##  4 UA      RDU        60       1
##  5 EV      PBI        48.7     6
##  6 EV      TYS        41.8   323
##  7 EV      CAE        36.7   113
##  8 EV      TUL        34.9   315
##  9 9E      BGR        34       1
## 10 WN      MSY        33.4   298
## # … with 304 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># &quot;stripchart&quot; of average delay grouped by carrier, each point is a destination</span>
<span class="kw">ggplot</span>(by_carrier_dest) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span> (<span class="kw">aes</span>(<span class="dt">x =</span> carrier, <span class="dt">y =</span> avg_delay, <span class="dt">color =</span> dest, <span class="dt">size =</span> n, <span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">5</span>), <span class="dt">position =</span> <span class="st">&#39;jitter&#39;</span>)</code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/delay_by_carrier-1.png" width="672" /></p>
</div>
<div id="what-does-the-sort-argument-to-count-do.-when-might-you-use-it" class="section level3 unnumbered">
<h3>6. What does the sort argument to count() do. When might you use it?</h3>
<p>If you set sort = TRUE in count(), it will return the output sorted in descending order of n. This might be useful when trying to find the item with the most occurances when counting, and will save you from having to pipe the data into arrange().</p>
</div>
</div>
<div id="notes---grouped-mutates-and-filters" class="section level2 unnumbered">
<h2><strong>5.7</strong> Notes - Grouped mutates (and filters)</h2>
<p>You can use the group_by() function for purposes other than piping into summarize(). For example, you can use group_by() with filter() to find which items within a group satisfy a certain condition.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">popular_dests &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">n</span>() <span class="op">&gt;</span><span class="st"> </span><span class="dv">365</span>)
popular_dests</code></pre></div>
<pre><code>## # A tibble: 332,577 x 19
## # Groups:   dest [77]
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 332,567 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># out of 105 destinations, 77 have had greater than 365 flights</span>
<span class="kw">length</span>(<span class="kw">unique</span>(flights<span class="op">$</span>dest))</code></pre></div>
<pre><code>## [1] 105</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">unique</span>(popular_dests<span class="op">$</span>dest))</code></pre></div>
<pre><code>## [1] 77</code></pre>
<p>This resulting filtered data frame can be further analyzed for per-group metrics.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">popular_dests <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop_delay =</span> arr_delay <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(arr_delay)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(year<span class="op">:</span>day, dest, arr_delay, prop_delay)</code></pre></div>
<pre><code>## # A tibble: 131,106 x 6
## # Groups:   dest [77]
##     year month   day dest  arr_delay prop_delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1  2013     1     1 IAH          11  0.000111 
##  2  2013     1     1 IAH          20  0.000201 
##  3  2013     1     1 MIA          33  0.000235 
##  4  2013     1     1 ORD          12  0.0000424
##  5  2013     1     1 FLL          19  0.0000938
##  6  2013     1     1 ORD           8  0.0000283
##  7  2013     1     1 LAX           7  0.0000344
##  8  2013     1     1 DFW          31  0.000282 
##  9  2013     1     1 ATL          12  0.0000400
## 10  2013     1     1 DTW          16  0.000116 
## # … with 131,096 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># not sure if this divides the group sum, or the total sum of all flights</span></code></pre></div>
</div>
<div id="exercises-12" class="section level2 unnumbered">
<h2><strong>5.7.1</strong> Exercises</h2>
<div id="refer-back-to-the-lists-of-useful-mutate-and-filtering-functions.-describe-how-each-operation-changes-when-you-combine-it-with-grouping." class="section level3 unnumbered">
<h3>1. Refer back to the lists of useful mutate and filtering functions. Describe how each operation changes when you combine it with grouping.</h3>
<p>For filter(), the conditional statement in the filter() function will be applied separately to each subgroup, and all the observations corresponding to the subgroups that are TRUE will be returned.</p>
<p>When combined with grouping, mutate seems to be more tricky. The functions do not seem to change if a grouped or ungrouped input is used. It seems that the mutate() would be useful if used on a grouped, filtered table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year,month,day) <span class="op">%&gt;%</span>
<span class="kw">mutate</span>(  dep_time,
  <span class="dt">hour =</span> dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>,
  <span class="dt">log_air_time =</span> <span class="kw">log</span>(air_time)
)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 20
## # Groups:   year, month, day [365]
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 336,766 more rows, and 13 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, log_air_time &lt;dbl&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="kw">mutate</span>(  dep_time,
  <span class="dt">hour =</span> dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>,
  <span class="dt">log_air_time =</span> <span class="kw">log</span>(air_time)
)</code></pre></div>
<pre><code>## # A tibble: 336,776 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 336,766 more rows, and 13 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, log_air_time &lt;dbl&gt;</code></pre>
</div>
<div id="which-plane-tailnum-has-the-worst-on-time-record" class="section level3 unnumbered">
<h3>2. Which plane (tailnum) has the worst on-time record?</h3>
<p>There are over 100 planes which have a 100% record of being delayed, either on departure or arrival.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># by departure delay</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">delay_count =</span> <span class="kw">sum</span> (dep_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>),
    <span class="dt">delay_proportion =</span> <span class="kw">mean</span> (dep_delay<span class="op">&gt;</span><span class="dv">0</span>)
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span> (<span class="kw">desc</span>(delay_proportion))</code></pre></div>
<pre><code>## # A tibble: 4,044 x 3
##    tailnum delay_count delay_proportion
##    &lt;chr&gt;         &lt;int&gt;            &lt;dbl&gt;
##  1 N136DL            1                1
##  2 N206UA            1                1
##  3 N228UA            1                1
##  4 N245AY            2                1
##  5 N26906            1                1
##  6 N302AS            1                1
##  7 N303AS            1                1
##  8 N305AS            2                1
##  9 N319AS            3                1
## 10 N32626            1                1
## # … with 4,034 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># by arrival delay</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">arr_count =</span> <span class="kw">sum</span> (arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>),
    <span class="dt">arr_proportion =</span> <span class="kw">mean</span> (arr_delay<span class="op">&gt;</span><span class="dv">0</span>)
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span> (<span class="kw">desc</span>(arr_proportion))</code></pre></div>
<pre><code>## # A tibble: 4,044 x 3
##    tailnum arr_count arr_proportion
##    &lt;chr&gt;       &lt;int&gt;          &lt;dbl&gt;
##  1 N121DE          2              1
##  2 N136DL          1              1
##  3 N143DA          1              1
##  4 N17627          2              1
##  5 N240AT          5              1
##  6 N26906          1              1
##  7 N295AT          4              1
##  8 N302AS          1              1
##  9 N303AS          1              1
## 10 N32626          1              1
## # … with 4,034 more rows</code></pre>
</div>
<div id="what-time-of-day-should-you-fly-if-you-want-to-avoid-delays-as-much-as-possible" class="section level3 unnumbered">
<h3>3. What time of day should you fly if you want to avoid delays as much as possible?</h3>
<p>To figure this out, we would want to examine the distribution of delays over time to see where the delays are minimized. Plotting time on the x-axis and the mean dep_delay per unit time on the y axis, we can see that from time 500-1000 there are on average less delays than during other times.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dep_time) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">mean_delay =</span> <span class="kw">mean</span> (dep_delay, <span class="dt">na.rm =</span> T),
    <span class="dt">n =</span> <span class="kw">n</span>()
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span> (mean_delay) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span> ( <span class="kw">aes</span> (dep_time, mean_delay) )<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> n, <span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">5</span>))</code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/mean_delay_vs_deptime-1.png" width="672" /></p>
</div>
<div id="for-each-destination-compute-the-total-minutes-of-delay.-for-each-flight-compute-the-proportion-of-the-total-delay-for-its-destination." class="section level3 unnumbered">
<h3>4. For each destination, compute the total minutes of delay. For each, flight, compute the proportion of the total delay for its destination.</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate total delay time of delayed flights using summarize()</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(dep_delay <span class="op">&gt;</span><span class="dv">0</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">total_delay =</span> <span class="kw">sum</span> (dep_delay, <span class="dt">na.rm =</span> T)
  )</code></pre></div>
<pre><code>## # A tibble: 103 x 2
##    dest  total_delay
##    &lt;chr&gt;       &lt;dbl&gt;
##  1 ABQ          4076
##  2 ACK          2603
##  3 ALB         10934
##  4 ANC           105
##  5 ATL        254414
##  6 AUS         36623
##  7 AVL          3092
##  8 BDL          8471
##  9 BGR          8170
## 10 BHM          8817
## # … with 93 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate total delay time of delayed flights using weighted counts()</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(dep_delay <span class="op">&gt;</span><span class="dv">0</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(dest, <span class="dt">wt =</span> dep_delay)</code></pre></div>
<pre><code>## # A tibble: 103 x 2
##    dest       n
##    &lt;chr&gt;  &lt;dbl&gt;
##  1 ABQ     4076
##  2 ACK     2603
##  3 ALB    10934
##  4 ANC      105
##  5 ATL   254414
##  6 AUS    36623
##  7 AVL     3092
##  8 BDL     8471
##  9 BGR     8170
## 10 BHM     8817
## # … with 93 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># first filter for all flights that are delayed, then group by destination</span>
<span class="co"># then calculate dep_delay for flight to destination / sum of all delayed flights within the same destination</span>
<span class="co"># select the rows you want, then arrange based on alphabetical order</span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(dep_delay <span class="op">&gt;</span><span class="dv">0</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span> (<span class="dt">prop_delay =</span> dep_delay <span class="op">/</span><span class="st"> </span><span class="kw">sum</span> (dep_delay)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span> (dest, flight, dep_delay, prop_delay) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span> (dest)</code></pre></div>
<pre><code>## # A tibble: 128,432 x 4
## # Groups:   dest [103]
##    dest  flight dep_delay prop_delay
##    &lt;chr&gt;  &lt;int&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1 ABQ       65         9   0.00221 
##  2 ABQ       65        16   0.00393 
##  3 ABQ       65         1   0.000245
##  4 ABQ       65        10   0.00245 
##  5 ABQ       65        53   0.0130  
##  6 ABQ       65       105   0.0258  
##  7 ABQ       65        14   0.00343 
##  8 ABQ       65        18   0.00442 
##  9 ABQ       65         3   0.000736
## 10 ABQ       65        17   0.00417 
## # … with 128,422 more rows</code></pre>
</div>
<div id="delays-are-typically-temporally-correlated-even-once-the-problem-that-caused-the-initial-delay-has-been-resolved-later-flights-are-delayed-to-allow-earlier-flights-to-leave.-using-lag-explore-how-the-delay-of-a-flight-is-related-to-the-delay-of-the-immediately-preceding-flight." class="section level3 unnumbered">
<h3>5. Delays are typically temporally correlated: even once the problem that caused the initial delay has been resolved, later flights are delayed to allow earlier flights to leave. Using lag() explore how the delay of a flight is related to the delay of the immediately preceding flight.</h3>
<p>I first filter for flights that are delayed. The flights are already ordered by dep_tiem. I then use mutate() and lag() to bind a new column to the data that shows what the previous delay was for that observation. Then, I plot the current delay vs. the previous delay in a scatterplot. Since there are so many points, it is hard to see the pattern. So, I added a linear regression line to the points (OLS) to visualize any correlation that exists. There is a positive correlation, suggesting that, on average, flights that come immediately after a delayed flight tend to also be delayed. The slope is &lt; 1, suggesting that the delay is less than the previous delay.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span> (dep_delay <span class="op">&gt;</span><span class="dv">0</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span> ( <span class="dt">prev_delay =</span> <span class="kw">lag</span>(dep_delay)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span> ( <span class="kw">aes</span> (<span class="dt">x =</span> prev_delay, <span class="dt">y =</span> dep_delay))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&#39;lm&#39;</span>, <span class="dt">se =</span> F)</code></pre></div>
<pre><code>## Warning: Removed 1 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="r4ds-walkthrough_files/figure-html/previous_delay_corr_dep_delay-1.png" width="672" /></p>
</div>
<div id="look-at-each-destination.-can-you-find-flights-that-are-suspiciously-fast-i.e.flights-that-represent-a-potential-data-entry-error.-compute-the-air-time-a-flight-relative-to-the-shortest-flight-to-that-destination.-which-flights-were-most-delayed-in-the-air" class="section level3 unnumbered">
<h3>6. Look at each destination. Can you find flights that are suspiciously fast? (i.e. flights that represent a potential data entry error). Compute the air time a flight relative to the shortest flight to that destination. Which flights were most delayed in the air?</h3>
<p>Flights that are suspiciously fast will have an air_time value that is very small compared to the expected amount of air_time (sched_arr_time - sched_dep_time). To find these flights, first group flights by dest, use mutate() to calculate the expected air_time, and calculate the proportion of the amount of time saved during the flight, (expected_air_time - air_time)/expected_air_time. Use arrange() to sort the flights based on prop_time_saved. If we expected the flight to take two hours but the flight had an air_time of 20 minutes, these flights would show up at the top of each group. We see that there are suspiciously fast flights such as flight 4117 to ALB which took 26 minutes, but was expected to take 72 minutes, saving 63% of the expected flight time. Also, flight 4013 to PHL took 23 minutes but was expected ot take 93. This is suspicious!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate the expected air time by converting sched_arr_time and sched_dep_time to minutes, then subtracting.</span>
<span class="co"># if the sched_arr_time was past midnight, we have to add 2400 to the value before subtracting.</span>
<span class="co"># to fix this, I use ifelse() within the mutate function.</span>
expected_times &lt;-<span class="st"> </span>not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span> (<span class="dt">expected_air_time =</span> <span class="kw">ifelse</span>(sched_arr_time <span class="op">&lt;</span><span class="st"> </span>sched_dep_time, 
                                     ((((sched_arr_time<span class="op">+</span><span class="dv">2400</span>) <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>(sched_arr_time<span class="op">+</span><span class="dv">2400</span>) <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>) 
                                      <span class="op">-</span><span class="st"> </span>((sched_dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>sched_dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>)), 
                                     (((sched_arr_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>sched_arr_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>) 
                                      <span class="op">-</span><span class="st"> </span>((sched_dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>sched_dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>))))
<span class="co"># use grouped arrange() to find suspicous flights with large prop_time_saved for each destination.</span>
expected_times <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>( <span class="dt">prop_time_saved =</span> (expected_air_time <span class="op">-</span><span class="st"> </span>air_time)<span class="op">/</span>expected_air_time ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(prop_time_saved)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">slice</span> (<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># select top 5 fastest flights</span>
<span class="st">  </span><span class="kw">select</span> (dest, flight, sched_dep_time, sched_arr_time, air_time, expected_air_time, prop_time_saved)</code></pre></div>
<pre><code>## # A tibble: 516 x 7
## # Groups:   dest [104]
##    dest  flight sched_dep_time sched_arr_time air_time expected_air_ti…
##    &lt;chr&gt;  &lt;int&gt;          &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt;            &lt;dbl&gt;
##  1 ABQ     1505           2001           2308      224              187
##  2 ABQ     1505           2001           2308      230              187
##  3 ABQ     1505           2001           2308      230              187
##  4 ABQ     1505           2001           2308      230              187
##  5 ABQ     1505           2001           2308      230              187
##  6 ACK     1491            800            909       35               69
##  7 ACK     1491            800            909       35               69
##  8 ACK     1491            800            909       35               69
##  9 ACK     1191           1209           1316       35               67
## 10 ACK     1195            800            913       39               73
## # … with 506 more rows, and 1 more variable: prop_time_saved &lt;dbl&gt;</code></pre>
<p>To compute air time to a flight relative to shortest flight to the destination, I would first take a ratio of the air_time to distance, find out what this value is for the shortest flight (smallest distance), then compare it with the suspicious flights. To find the flights most delayed in the air, subtract arr_delay from dep_delay and compare these values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># compare distance traveled over time </span>
not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span> ( <span class="dt">dist_over_time =</span> distance<span class="op">/</span>air_time,
           <span class="dt">shortest_dest_flight =</span> <span class="kw">min</span> (air_time, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span> (<span class="kw">desc</span>(dist_over_time)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">slice</span> (<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>( dest, flight, distance, air_time, dist_over_time, shortest_dest_flight)</code></pre></div>
<pre><code>## # A tibble: 516 x 6
## # Groups:   dest [104]
##    dest  flight distance air_time dist_over_time shortest_dest_flight
##    &lt;chr&gt;  &lt;int&gt;    &lt;dbl&gt;    &lt;dbl&gt;          &lt;dbl&gt;                &lt;dbl&gt;
##  1 ABQ     1505     1826      212           8.61                  212
##  2 ABQ     1505     1826      213           8.57                  212
##  3 ABQ     1505     1826      213           8.57                  212
##  4 ABQ     1505     1826      217           8.41                  212
##  5 ABQ     1505     1826      220           8.3                   212
##  6 ACK     1491      199       35           5.69                   35
##  7 ACK     1191      199       35           5.69                   35
##  8 ACK     1491      199       35           5.69                   35
##  9 ACK     1191      199       35           5.69                   35
## 10 ACK     1491      199       35           5.69                   35
## # … with 506 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># top 5 flights for each destination that are delayed the most in the air</span>
(in_air_delays &lt;-<span class="st"> </span>not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span> (<span class="dt">in_air_delay =</span> arr_delay <span class="op">-</span><span class="st"> </span>dep_delay) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span> (<span class="kw">desc</span>(in_air_delay)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">slice</span> (<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>( dest, flight, arr_delay, dep_delay, in_air_delay))</code></pre></div>
<pre><code>## # A tibble: 516 x 5
## # Groups:   dest [104]
##    dest  flight arr_delay dep_delay in_air_delay
##    &lt;chr&gt;  &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
##  1 ABQ     1505       126        18          108
##  2 ABQ     1505       103         0          103
##  3 ABQ     1505       117        31           86
##  4 ABQ     1505        72         0           72
##  5 ABQ     1505        67         0           67
##  6 ACK     1491        86        -5           91
##  7 ACK     1191       150        71           79
##  8 ACK     1191        39        -1           40
##  9 ACK     1191        24        -9           33
## 10 ACK     1491        52        26           26
## # … with 506 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(in_air_delays) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span> (<span class="kw">aes</span>(<span class="dt">x =</span> dest, <span class="dt">y =</span> in_air_delay), <span class="dt">position =</span> <span class="st">&#39;jitter&#39;</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</code></pre></div>
<p><img src="r4ds-walkthrough_files/figure-html/in_air_delays-1.png" width="672" /></p>
</div>
<div id="find-all-destinations-that-are-flown-by-at-least-two-carriers.-use-that-information-to-rank-the-carriers." class="section level3 unnumbered">
<h3>7. Find all destinations that are flown by at least two carriers. Use that information to rank the carriers.</h3>
<p>The code below will find the destinations that are flown by at least 2 carriers. The second part of the question is vague–how can carriers be ranked by whether a destination is flown to by 2 more more carriers? It would make more sense to rank the destinations. Below I rank the carriers by the number of destinations they fly to.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># destinations that are flown by at least two carriers</span>
not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>( <span class="kw">length</span>(<span class="kw">unique</span>(carrier)) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2</span>)</code></pre></div>
<pre><code>## # A tibble: 315,946 x 19
## # Groups:   dest [75]
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 315,936 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get the same output using the n_distinct() function instead of length(unique())</span>
not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>( <span class="kw">n_distinct</span>(carrier) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2</span>)</code></pre></div>
<pre><code>## # A tibble: 315,946 x 19
## # Groups:   dest [75]
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 315,936 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># carriers that fly to the most destinations:</span>
not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">num_dest =</span> <span class="kw">length</span> (<span class="kw">unique</span>(dest))
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span> (<span class="kw">desc</span>(num_dest))</code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    carrier num_dest
##    &lt;chr&gt;      &lt;int&gt;
##  1 EV            61
##  2 9E            48
##  3 UA            47
##  4 B6            42
##  5 DL            40
##  6 MQ            20
##  7 AA            19
##  8 WN            11
##  9 OO             5
## 10 US             5
## 11 VX             5
## 12 FL             3
## 13 YV             3
## 14 AS             1
## 15 F9             1
## 16 HA             1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># checking to see if length(unique(dest)) worked by selecting one of the flights and manually counting</span>
EV_flights &lt;-<span class="st"> </span>not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span> ( carrier <span class="op">==</span><span class="st"> &#39;EV&#39;</span>)
<span class="kw">length</span>(<span class="kw">unique</span>(EV_flights<span class="op">$</span>dest))</code></pre></div>
<pre><code>## [1] 61</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># we can also group sequentially, if that&#39;s what the question is suggesting</span>
not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">n_distinct</span>(carrier) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># filter for flights to destinations that have more than 2 carriers</span>
<span class="st">  </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># group by carriers in this filtered dataset</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">num_dest =</span> <span class="kw">n_distinct</span>(dest)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># find the number of distinct destinations they fly to</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(num_dest)) <span class="co"># sort the output</span></code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    carrier num_dest
##    &lt;chr&gt;      &lt;int&gt;
##  1 EV            50
##  2 9E            47
##  3 UA            42
##  4 DL            39
##  5 B6            35
##  6 AA            19
##  7 MQ            19
##  8 WN            10
##  9 OO             5
## 10 US             5
## 11 VX             4
## 12 YV             3
## 13 FL             2
## 14 AS             1
## 15 F9             1
## 16 HA             1</code></pre>
</div>
<div id="for-each-plane-count-the-number-of-flights-before-the-first-delay-of-greater-than-1-hour." class="section level3 unnumbered">
<h3>8. For each plane, count the number of flights before the first delay of greater than 1 hour.</h3>
<p>I would first group by flight, and then select the minimum sched_dep_time for flights that were delayed greater than 60 minutes. Then I would count the number of flights that are less than the minimum sched_dep_time in each group of flights. I used full_join() to map the first flight with delay greater than 1 hour to the original flights table, then used summarize() to count the number of flights that came before this for each group within tailnum.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># finds the first occurance of a delay greater than 60 min</span>

min_delay &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span> (dep_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">min_sched_dep =</span>  <span class="kw">min</span> (sched_dep_time)
  )

<span class="co"># join the dep_time of the first occurance of the &gt;60min delay to the original table</span>
(joined_delay &lt;-<span class="st"> </span><span class="kw">full_join</span> (flights,min_delay, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span> (tailnum))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     2    11     1508           1400        68     1807
##  2  2013     3    23     1340           1300        40     1638
##  3  2013     3    24      859            835        24     1142
##  4  2013     7     5     1253           1259        -6     1518
##  5  2013     1     1     1604           1510        54     1817
##  6  2013     1     1     2100           2100         0     2307
##  7  2013     1     2      827            835        -8     1059
##  8  2013     1     2     2014           2020        -6     2256
##  9  2013     1     4     1621           1625        -4     1853
## 10  2013     1     5      834            835        -1     1050
## # … with 336,766 more rows, and 13 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, min_sched_dep &lt;dbl&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use summarize() to figure out how many values came before the first delay &gt; 60min (see column num_before_delay60).</span>
joined_delay <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">num_before_delay60 =</span> <span class="kw">sum</span> ( sched_dep_time <span class="op">&lt;</span><span class="st"> </span>min_sched_dep, <span class="dt">na.rm =</span> T)
  )</code></pre></div>
<pre><code>## # A tibble: 4,044 x 2
##    tailnum num_before_delay60
##    &lt;chr&gt;                &lt;int&gt;
##  1 D942DN                   3
##  2 N0EGMQ                  13
##  3 N10156                  15
##  4 N102UW                  17
##  5 N103US                   0
##  6 N104UW                  28
##  7 N10575                  20
##  8 N105UW                  22
##  9 N107US                  33
## 10 N108UW                  32
## # … with 4,034 more rows</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-4-workflow-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-6-workflow-scripts.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"download": false
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
